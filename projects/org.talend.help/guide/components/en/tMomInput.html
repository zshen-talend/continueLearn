<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tMomInput</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch11.html" title="Chapter&nbsp;11.&nbsp;Internet components"><link rel="prev" href="tMomCommit.html" title="tMomCommit"><link rel="next" href="tMomMessageIdList.html" title="tMomMessageIdList"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="EN" class="section" title="tMomInput"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tMomInput"></a>tMomInput</h2></div></div></div><div class="mediaobject"><img src="../images/tMomInput_icon32_white.png"></div><div class="section" title="tMomInput Properties"><div class="titlepage"><div><div><h3 class="title"><a name="Raa41192"></a>tMomInput Properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Component family</strong></span>
									</p>
								</td><td valign="top">
									<p>Internet </p>
								</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Function</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Fetches a message from a queue on a Message-Oriented
										middle ware system and passes it on to the next
										component.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Purpose</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p><span class="bold"><strong>tMomInput</strong></span> makes it
										possible to set up asynchronous communications via a MOM
										server.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Keep listening</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to keep the MOM server listening for
										and fetching new messages.</p>
									<p> -For <span class="bold"><strong>JBoss Messaging</strong></span>
										server, with this check box selected, the <span class="bold"><strong>Sleeping time (in sec)</strong></span> field will
										appear.</p>
									<p> -For <span class="bold"><strong>Active MQ</strong></span> server,
										with this check box selected, the <span class="bold"><strong>Sleeping time (in sec)</strong></span> field will
										disappear.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Sleeping time (in sec)</em></span>
									</p>
								</td><td valign="top">
									<p>Set the frequency by typing in numbers.</p>
									<p> </p>
									<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This field is not available if the <span class="bold"><strong>MQ Server</strong></span> you selected is
												<span class="bold"><strong>WebSphere
											MQ</strong></span>.</p></td></tr></table></div>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>MQ Server</em></span>
									</p>
								</td><td valign="top">
									<p>Select the MOM server to be used from the list. According
										to the server selected, the parameters required differ
										slightly.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Host/Port</em></span>
									</p>
								</td><td valign="top">
									<p>Fill in the Host name or IP address of the MOM server and
										Port.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Username</em></span>
									</p>
								</td><td valign="top">
									<p>Connection login to the server you select in the <span class="bold"><strong>MQ Server</strong></span> list.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Password</em></span>
									</p>
								</td><td valign="top">
									<p>Connection password to the server you select in the
											<span class="bold"><strong>MQ Server</strong></span> list.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Message From</em></span>
									</p>
								</td><td valign="top">
									<p>Type in the message source, exactly as expected by the
										server; this must include the type and name of the source.
										e.g.: queue/A or topic/testtopic</p>
									<p> Note that the field is case-sensitive.</p>
									<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This field is not available if the <span class="bold"><strong>MQ Server</strong></span> you selected is
												<span class="bold"><strong>WebSphere
											MQ</strong></span>.</p></td></tr></table></div>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Message Type</em></span>
									</p>
								</td><td valign="top">
									<p>Select the message type, either: <span class="bold"><strong>Topic</strong></span> or <span class="bold"><strong>Queue</strong></span>.</p>
									<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This list is not available if the <span class="bold"><strong>MQ Server</strong></span> you selected is
												<span class="bold"><strong>WebSphere
											MQ</strong></span>.</p></td></tr></table></div>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Message Body Type</em></span>
									</p>
								</td><td valign="top">
									<p>Select the message body type, either: <span class="bold"><strong>Text</strong></span> , <span class="bold"><strong>Bytes</strong></span>.or <span class="bold"><strong>Map</strong></span></p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
											Schema</em></span></p>
								</td><td valign="top">
									<p>A schema is a row description, i.e., it defines the number
										of fields that will be processed and passed on to the next
										component. </p>
									<p> In the context of <span class="bold"><strong>tMomInput</strong></span> usage, the schema is read-only. It
										is comprised of two columns: <span class="bold"><strong>From</strong></span> and <span class="bold"><strong>Message</strong></span>.</p>
								</td></tr><tr><td valign="top">
									<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Warning]" src="../images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
											<span class="emphasis"><em>Websphere MQ only </em></span>
										</p></td></tr></table></div>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Channel</em></span>
									</p>
								</td><td valign="top">
									<p>The default value is
										<span class="emphasis"><em>DC.SVRCONN</em></span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Queue Manager</em></span>
									</p>
								</td><td valign="top">
									<p>Fill in the server driver details.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Message Queue</em></span>
									</p>
								</td><td valign="top">
									<p>Fill in the source of the message.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Is using message id to fetch</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to fetch messages according to their
										IDs.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Commit (delete message after reading from the
											queue)</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to force a commit after reading each
										message from the queue.</p>
								</td></tr><tr><td>&nbsp;</td><td valign="top">
									<span class="emphasis"><em>Backout removed messages</em></span>
								</td><td valign="top">
									<p>Select this check box to indicate to the queue manager
										that all the messages read from the server will not be
										deleted when the connection to server is cut off. </p>
									<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This check box and the <span class="bold"><strong>Browse
												message</strong></span> check box in the <span class="bold"><strong>Advanced settings</strong></span> view enable
											you to read messages non-destructively from the queue.
											It is visible only when <span class="bold"><strong>Keep
												listening</strong></span> check box is cleared. For
											further information, see <a class="link" href="https://publib.boulder.ibm.com/iseries/v5r2/ic2924/books/csqzaw07.pdf" target="_top">Page 144 of MQSeries Using Java</a>.</p></td></tr></table></div>
								</td></tr><tr><td valign="top">
									<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Warning]" src="../images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
											<span class="emphasis"><em>ActiveMQ only</em></span>
										</p></td></tr></table></div>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Receive number of messages</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to set the number of messages that
										you will receive on the console.</p>
									<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Warning]" src="../images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
											<span class="italic"> When you want to limit the
												number of messages to receive, the time limit
												becomes inactive and the <span class="bold"><strong>Keep
												listening</strong></span>/<span class="bold"><strong>Sleeping time (in sec)</strong></span> fields
												disappear.</span>
										</p></td></tr></table></div>
								</td></tr><tr><td valign="top">
									<span class="bold"><strong>Advanced settings</strong></span>
								</td><td valign="top">
									<span class="emphasis"><em>Browse message</em></span>
								</td><td valign="top">
									<p>Select this check box to disable <span class="bold"><strong>Commit(delete message after reading from the
											queue)</strong></span> check box and <span class="bold"><strong>Backout removed messages</strong></span> check box in the
											<span class="bold"><strong>Basic settings</strong></span> view and
										open the queue to browse messages.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This check box and the <span class="bold"><strong>Backout removed messages</strong></span> check box in
												the <span class="bold"><strong>Basic settings</strong></span>
												view enable you to read messages non-destructively
												from the queue. <span class="bold"><strong>Browse
												message</strong></span> check box is visible only when
												the <span class="bold"><strong>Backout removed
												messages</strong></span> check box is cleared. For
												further information, see <a class="link" href="http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0m0/index.jsp?topic=%2Fcom.ibm.mq.java.doc%2Fcom%2Fibm%2Fmq%2FMQC.html/" target="_top">MQC: MQOO_BROWSE</a>.</p></td></tr></table></div>
								</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
									<span class="emphasis"><em>Get MQMD Fields</em></span>
								</td><td valign="top">
									<p>Select this check box to set one or more message
										descriptors by adding new fields for MQMD(message queuing
										message descriptor) in the <span class="bold"><strong>Parameter</strong></span> table:</p>
									<p><span class="bold"><strong>Field Name</strong></span>: Select one or
										more message descriptors from the list to retrieve header
										information of the message.</p>
									<p><span class="bold"><strong>Reference Column Name</strong></span>:
										The header and properties information of the message.</p>
									<p>For further information, see <a class="link" href="http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0m0/index.jsp?topic=%2Fcom.ibm.mq.csqzak.doc%2Ffr13040_.htm/" target="_top">Fields for MQMD</a>.</p>
								</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
									<p>
										<span class="emphasis"><em>tStatCatcher Statistics</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to gather the Job processing
										metadata at a Job level as well as at each component
										level.</p>
								</td></tr><tr><td>&nbsp;</td><td valign="top">
									<span class="emphasis"><em>Enable parallel execution</em></span>
								</td><td valign="top">
									<p>Select this check box to perform high-speed data
										processing, by treating multiple data flows simultaneously. </p>
									<p> In the <span class="bold"><strong>Number of parallel
											executions</strong></span> field, either:</p>
									<p> - Enter the number of parallel executions desired.</p>
									<p> - Press <span class="bold"><strong>Ctrl + Space</strong></span> and
										select the appropriate context variable from the
										list.</p>
									<p> </p>
									<p> For further information, see <span class="bluebold">Talend Open Studio</span>
										<span class="bold"><strong>User Guide</strong></span>.</p>
									<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Warning]" src="../images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
											<span class="italic"> The <span class="bold"><strong>Action on table</strong></span> field is not available
												with the parallelization function. Therefore, you
												must use a <span class="bold"><strong>tCreateTable</strong></span> component if you want to
												create a table.</span>
										</p></td></tr></table></div>
									<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Warning]" src="../images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
											<span class="emphasis"><em>When parallel execution is enabled, it is not
												possible to use global variables to retrieve return
												values in a SubJob.</em></span>
										</p></td></tr></table></div>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Usage</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>This component is generally used as a start component. It
										must be linked to an output component.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Limitation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Make sure the relevant ActiveMQ, JBoss or Websphere server
										is launched.</p>
								</td></tr></tbody></table></div></div><div class="section" title="Scenario: asynchronous communication via a MOM server"><div class="titlepage"><div><div><h3 class="title"><a name="Raa41318"></a>Scenario: asynchronous communication via a MOM server</h3></div></div></div><p>This scenario is made of two Jobs. The first Job posts messages on a JBoss
					server queue and the second Job fetches the message from the server.</p><p>In the first Job, a string message is created using a <span class="bold"><strong>tRowGenerator</strong></span> and put on a JBoss server using a <span class="bold"><strong>tMomOutput</strong></span>. An intermediary <span class="bold"><strong>tLogRow</strong></span> component displays the flow being passed.</p><div class="mediaobject"><img src="../images/Use_Case_tMomInput1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Drop the three components required for the first Job from the
								<span class="bold"><strong>Palette</strong></span> onto the design workspace
							and right-click to connect them using a <span class="bold"><strong>Main
							</strong></span>row link.</p></li><li class="listitem"><p> Double-click on <span class="bold"><strong>tRowGenerator</strong></span> to set
							the schema to be randomly generated.</p></li></ul></div><div class="mediaobject"><img src="../images/use_case-tmominput2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Set just one column called <span class="emphasis"><em>message</em></span>. This is the
							message to be put on the MOM queue.</p></li><li class="listitem"><p> This column is of <span class="bold"><strong>String</strong></span> type and is
							nullable. To produce the data, use a preset function which concatenates
							randomly chosen ascii characters to form a 6-char string. This function
							is <code class="code">getAsciiRandomString</code>. (Java version). Click the Preview
							button to view a random sample of data generated.</p></li><li class="listitem"><p> Set the <span class="bold"><strong>Number of rows to be
								generated</strong></span> to <span class="emphasis"><em>10</em></span>.</p></li><li class="listitem"><p> Click <span class="bold"><strong>OK</strong></span> to validate.</p></li><li class="listitem"><p> The <span class="bold"><strong>tLogRow</strong></span> is only used to display
							a intermediary state of the data to be handled. In this example, it
							doesn&#8217;t require any specific configuration.</p></li><li class="listitem"><p> Then select the <span class="bold"><strong>tMomOutput
							</strong></span>component.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMomInput3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In this case, the<span class="bold"><strong> MQ server</strong></span> to be
							used is <span class="bold"><strong>JBoss</strong></span>.</p></li><li class="listitem"><p> In the <span class="bold"><strong>Host</strong></span> and <span class="bold"><strong>Port</strong></span> fields, fill in the relevant connection
							information.</p></li><li class="listitem"><p> Select the <span class="bold"><strong>Message type</strong></span> from the
							list. The message can be of <span class="bold"><strong>Queue</strong></span> or
								<span class="bold"><strong>Topic</strong></span> type. In this example, select
							the <span class="bold"><strong>Queue </strong></span>type from the list. </p></li><li class="listitem"><p> In the <span class="bold"><strong>To</strong></span> field, type in the message
							source information strictly respecting the syntax expected by the
							server. This should match the Message Type you selected, such as:
								<code class="code">queue/A</code>. </p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p> The message name is case-sensitive, therefore <code class="code">queue/A</code> and
							<code class="code">Queue/A</code> are different.</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Then click <span class="bold"><strong>Sync Columns</strong></span> to pass on
							the schema from the preceding component. The schema being read-only, it
							cannot be changed. The data posted onto the MQ comes from the first
							schema column encountered.</p></li><li class="listitem"><p> Press <span class="bold"><strong>F6</strong></span> to execute the Job and view
							the data flow being passed on in the console, thanks to the <span class="bold"><strong>tLogRow</strong></span> component.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMomInput6.png"></div><p>Then set the second Job in order to fetch the queuing messages from the MOM
					server.</p><div class="mediaobject"><img src="../images/Use_Case_tMomInput4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Drop the <span class="bold"><strong>tMomInput</strong></span> component and a
								<span class="bold"><strong>tLogRow</strong></span> from the <span class="bold"><strong>Palette</strong></span> to the design workspace.</p></li><li class="listitem"><p> Select the <span class="bold"><strong>tMomInput</strong></span> to set the
							parameters.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMomInput5.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Select the <span class="bold"><strong>MQ server</strong></span> from the list.
							In this example, a JBoss messaging server is used. </p></li><li class="listitem"><p> Set the server <span class="bold"><strong>Host</strong></span> and <span class="bold"><strong>Port</strong></span> information.</p></li><li class="listitem"><p> Set the <span class="bold"><strong>Message From</strong></span> and the
								<span class="bold"><strong>Message Type</strong></span> to match the source
							and type expected by the messaging server.</p></li><li class="listitem"><p> The <span class="bold"><strong>Schema</strong></span> is read-only and is made
							of two columns: <span class="bold"><strong>From</strong></span> and <span class="bold"><strong>Message</strong></span>.</p></li><li class="listitem"><p> Select the <span class="bold"><strong>Keep listening</strong></span> check box
							and set the verification frequency to <span class="emphasis"><em>5
							</em></span>seconds.</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p> When using the <span class="bold"><strong>Keep Listening</strong></span> option,
						you&#8217;ll need to kill the Job to end it.</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> No need to change any default setting from the <span class="bold"><strong>tLogRow</strong></span>.</p></li><li class="listitem"><p> Save the Job and run it (when launching for the first time or if you
							killed it on a previous run).</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMomInput7.png"></div><p>The messages fetched on the server are displayed on the console.</p></div></div></body></html>