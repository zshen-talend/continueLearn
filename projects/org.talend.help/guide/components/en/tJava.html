<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tJava</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch04.html" title="Chapter&nbsp;4.&nbsp;Custom Code components"><link rel="prev" href="tGroovyFile.html" title="tGroovyFile"><link rel="next" href="tJavaFlex.html" title="tJavaFlex"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="EN" class="section" title="tJava"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tJava"></a>tJava</h2></div></div></div><div class="mediaobject"><img src="../images/tJava_icon32.png"></div><div class="section" title="tJava properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e52079"></a>tJava properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Component family</strong></span>
									</p>
								</td><td valign="top">
									<p>Custom Code</p>
								</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Function</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p><span class="bold"><strong>tJava</strong></span> enables you to
										enter personalized code in order to integrate it in
											<span class="bold"><strong>Talend</strong></span>
										program. You can execute this code only once.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Purpose</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p><span class="bold"><strong>tJava</strong></span> makes it possible
										to extend the functionalities of a <span class="bold"><strong>Talend</strong></span> Job through using Java
										commands.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Code</em></span>
									</p>
								</td><td valign="top">
									<p>Type in the Java code you want to execute according to the
										task you need to perform. For further information about Java
										functions syntax specific to <span class="bold"><strong>Talend</strong></span>, see <span class="bluebold">Talend Open Studio</span> Online Help (Help Contents
										&gt; Developer Guide &gt; API Reference).</p>
									<p> For a complete Java reference, check <a class="link" href="http://docs.oracle.com/javaee/6/api/" target="_top">http://docs.oracle.com/javaee/6/api/</a></p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Advanced settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Import</em></span>
									</p>
								</td><td valign="top">
									<p>Enter the Java code that helps to import, if necessary,
										external libraries used in the <span class="bold"><strong>Main
											code</strong></span> box of the <span class="bold"><strong>Basic
											settings</strong></span> view.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>tStatCatcher Statistics</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to gather the Job processing
										metadata at a Job level as well as at each component
										level.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Usage</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>This component is generally used as a one-component
										subjob.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Limitation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>You should know Java language.</p>
								</td></tr></tbody></table></div></div><div class="section" title="Scenario: Printing out a variable content"><div class="titlepage"><div><div><h3 class="title"><a name="Raa39082"></a>Scenario: Printing out a variable content</h3></div></div></div><p>The following scenario is a simple demo of the extended application of the
						<span class="bold"><strong>tJava</strong></span> component. The Job aims at printing
					out the number of lines being processed using a Java command and the global
					variable provided in <span class="bluebold">Talend Open Studio</span>.</p><div class="mediaobject"><img src="../images/Use_Case_tJava1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Select and drop the following components from the <span class="bold"><strong>Palette</strong></span> onto the design workspace: <span class="bold"><strong>tFileInputDelimited</strong></span>, <span class="bold"><strong>tFileOutputExcel</strong></span>, <span class="bold"><strong>tJava</strong></span>.</p></li><li class="listitem"><p>Connect the <span class="bold"><strong>tFileInputDelimited</strong></span> to
							the <span class="bold"><strong>tFileOutputExcel</strong></span> using a <span class="bold"><strong>Row Main</strong></span> connection. The content from a
							delimited txt file will be passed on through the connection to an
							xls-type of file without further transformation.</p></li><li class="listitem"><p>Then connect the <span class="bold"><strong>tFileInputDelimited</strong></span>
							component to the <span class="bold"><strong>tJava</strong></span> component using
							a <span class="bold"><strong>Then Run</strong></span> link. This link sets a
							sequence ordering <span class="bold"><strong>tJava</strong></span> to be executed
							at the end of the main process.</p></li><li class="listitem"><p>Set the <span class="bold"><strong>Basic settings</strong></span> of the
								<span class="bold"><strong>tFileInputDelimited</strong></span> component. The
							input file used in this example is a simple text file made of two
							columns: <span class="emphasis"><em>Names</em></span> and their respective
								<span class="emphasis"><em>Emails</em></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tJava2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The schema has not been stored in the repository for this use case,
							therefore you need to set manually the two-column schema </p></li><li class="listitem"><p>Click the <span class="bold"><strong>Edit Schema</strong></span> button. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tJava3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>When prompted, click <span class="bold"><strong>OK</strong></span> to accept the
							propagation, so that the <span class="bold"><strong>tFileOutputExcel</strong></span> component gets automatically set with
							the input schema. Therefore no need to set the schema again.</p></li><li class="listitem"><p>Set the output file to receive the input content without changes. If
							the file does not exist already, it will get created.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tJava4.png"></div><p>In this example, the <span class="bold"><strong>Sheet name</strong></span> is
						<span class="emphasis"><em>Email</em></span> and the <span class="bold"><strong>Include
						Header</strong></span> box is selected.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Then select the <span class="bold"><strong>tJava</strong></span> component to
							set the Java command to execute.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tJava5.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the <span class="bold"><strong>Code</strong></span> area, type in the
							following command:</p><p>
							</p><pre class="programlisting">String var = "Nb of line processed: ";<span></span>
var = var + globalMap.get("tFileInputDelimited_1_NB_LINE");<span></span>
System.out.println(var);</pre><p>
						</p></li></ul></div><p>In this use case, we use the <span class="emphasis"><em>NB_Line</em></span> variable. To access
					the global variable list, press Ctrl + Space bar on your keyboard and select the
					relevant global parameter.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Save your Job and press <span class="bold"><strong>F6</strong></span> to execute
							it. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tJava6.png"></div><p>The content gets passed on to the Excel file defined and the Number of lines
					processed are displayed on the <span class="bold"><strong>Run</strong></span>
					console.</p></div></div></body></html>