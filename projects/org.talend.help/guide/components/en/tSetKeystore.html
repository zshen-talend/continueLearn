<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tSetKeystore</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch11.html" title="Chapter&nbsp;11.&nbsp;Internet components"><link rel="prev" href="tSendMail.html" title="tSendMail"><link rel="next" href="tSocketInput.html" title="tSocketInput"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="EN" class="section" title="tSetKeystore"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tSetKeystore"></a>tSetKeystore</h2></div></div></div><div class="mediaobject"><img src="../images/tSetKeystore_icon32_white.png"></div><div class="section" title="tSetKeystore properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e228415"></a>tSetKeystore properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Component family</strong></span>
									</p>
								</td><td valign="top">
									<p>Internet </p>
								</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Function</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p><span class="bold"><strong>tSetKeystore </strong></span>submits
										authentication data of a truststore with or without keystore
										to validation for the SSL connection.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Purpose</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>This component allows you to set the authentication data
										type between <span class="bold"><strong>PKCS 12</strong></span> and
											<span class="bold"><strong>JKS</strong></span>.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>TrustStore type</em></span>
									</p>
								</td><td valign="top">
									<p>Select the type of the TrustStore to be used. It may be
											<span class="bold"><strong>PKCS 12</strong></span> or <span class="bold"><strong>JKS</strong></span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>TrustStore file</em></span>
									</p>
								</td><td valign="top">
									<p>Type in the path, or browse to the certificate TrustStore
										file (including filename) that contains the list of
										certificates that the client trusts.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>TrustStore password</em></span>
									</p>
								</td><td valign="top">
									<p>Type in the password used to check the integrity of the
										TrustStore data.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Need Client authentication</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to validate the keystore data. Once
										doing so, you need complete three fields:</p>
									<p> - <span class="bold"><strong>KeyStore type</strong></span>: select
										the type of the keystore to be used. It may be <span class="bold"><strong>PKCS 12</strong></span> or <span class="bold"><strong>JKS</strong></span>.</p>
									<p> - <span class="bold"><strong>KeyStore file</strong></span>: type in
										the path, or browse to the file (including filename)
										containing the keystore data.</p>
									<p> - <span class="bold"><strong>KeyStore password</strong></span>:
										type in the password for this keystore.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Advanced settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>tStatCatcher Statistics</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to gather the Job processing
										metadata at a Job level as well as at each component
										level.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Usage</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>This component is used standalone.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Connections</strong></span>
									</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>Outgoing links (from one component to another):</p>
									<p>
										<span class="bold"><strong>Trigger</strong></span>: Run if; On Subjob
										Ok, On Subjob Error, On Component Ok; On Component
										Error.</p>
									<p> </p>
									<p> Incoming links (from one component to another):</p>
									<p>
										<span class="bold"><strong>Trigger</strong></span>: Run if, On Subjob
										Ok, On Component Ok, On Component Error.</p>
									<p> </p>
									<p> For further information regarding connections, see
											<span class="bluebold">Talend Open Studio</span> User Guide.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Limitation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>n/a.</p>
								</td></tr></tbody></table></div></div><div class="section" title="Scenario: Extracting customer information from a private WSDL file"><div class="titlepage"><div><div><h3 class="title"><a name="d0e228681"></a>Scenario: Extracting customer information from a private WSDL file</h3></div></div></div><p>This scenario describes a three-component Job that connects to a private WSDL
					file in order to extract customer information.</p><p>The WSDL file used in this Job accesses the corresponding web service under
					the SSL protocol. For this purpose, the most relative code in this file reads as
					follows :</p><p>
					</p><pre class="programlisting">&lt;wsdl:port name="CustomerServiceHttpSoap11Endpoint"
binding="ns:CustomerServiceSoap11Binding"&gt;<span></span>
            &lt;soap:address location="https://192.168.0.22:8443/axis2/services/CustomerService.CustomerServiceHttpSoap11Endpoint/"/&gt;<span></span>
        &lt;/wsdl:port&gt;</pre><p>
				</p><p>Accordingly, we enter the following code in the
						<span class="emphasis"><em>server.xml</em></span> file of Tomcat:</p><p>
					</p><pre class="programlisting">&lt;Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"<span></span>
               maxThreads="150" scheme="https" secure="true"<span></span>
               clientAuth="true" sslProtocol="TLS" <span></span>
     keystoreFile="D:/server.keystore" keystorePass="password"<span></span>
     keystoreType="JKS"<span></span>
     truststoreFile="D:/server.p12" truststorePass="password"<span></span>
     truststoreType="PKCS12"<span></span>
    /&gt;</pre><p>
				</p><p>So we need keystore files to connect to this WSDL file. To replicate this Job,
					proceed as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Drop the following components from the <span class="bold"><strong>Palette</strong></span> onto the design workspace: <span class="bold"><strong>tSetKeystore</strong></span>, <span class="bold"><strong>tWebService</strong></span>, and <span class="bold"><strong>tLogRow</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSetKeystore1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Right-click <span class="bold"><strong>tSetKeystore</strong></span> to open its
							contextual menu.</p></li><li class="listitem"><p>In this menu, select <span class="bold"><strong>Trigger</strong></span> &gt;
								<span class="bold"><strong>On Subjob Ok</strong></span> to connect this
							component to <span class="bold"><strong>tWebService</strong></span>.</p></li><li class="listitem"><p>Right-click <span class="bold"><strong>tWebService</strong></span> to open its
							contextual menu.</p></li><li class="listitem"><p>In this menu, select <span class="bold"><strong>Row</strong></span> &gt;
								<span class="bold"><strong>Main</strong></span> to connect this component to
								<span class="bold"><strong>tLogRow</strong></span>.</p></li><li class="listitem"><p>Double-click <span class="bold"><strong>tSetKeystore</strong></span> to open its
								<span class="bold"><strong>Basic settings</strong></span> view and define the
							component properties.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSetKeystore2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the <span class="bold"><strong>TrustStore type</strong></span> field, select
								<span class="bold"><strong>PKCS12</strong></span> from the drop-down
							list.</p></li><li class="listitem"><p>In the <span class="bold"><strong>TrustStore file</strong></span> field, browse
							to the corresponding truststore file. Here, it is
								<span class="emphasis"><em>server.p12</em></span>.</p></li><li class="listitem"><p>In the <span class="bold"><strong>TrustStore password</strong></span> field,
							type in the password for this truststore file. In this example, it is
								<span class="emphasis"><em>password</em></span>.</p></li><li class="listitem"><p>Select the <span class="bold"><strong>Need Client authentication</strong></span>
							check box to activate the keystore configuration fields.</p></li><li class="listitem"><p>In the <span class="bold"><strong>KeyStore type</strong></span> field, select
								<span class="bold"><strong>JKS</strong></span> from the drop-down list.</p></li><li class="listitem"><p>In the <span class="bold"><strong>KeyStore file</strong></span> field, browse to
							the corresponding keystore file. Here, it is
								<span class="emphasis"><em>server.keystore.</em></span></p></li><li class="listitem"><p>Double-click <span class="bold"><strong>tWebService</strong></span> to open the
							component editor, or select the component in the design workspace and in
							the <span class="bold"><strong>Basic settings</strong></span> view, click the
							three-dot button next to <span class="bold"><strong>Service
								configuration</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSetKeystore3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the <span class="bold"><strong>WSDL</strong></span> field, browse to the
							private WSDL file to be used. In this example, it is
								<span class="emphasis"><em>CustomerService.wsdl</em></span>.</p></li><li class="listitem"><p>Click the refresh button next to the <span class="bold"><strong>WSDL</strong></span> field to retrieve the WSDL description and display
							it in the fields that follow.</p></li><li class="listitem"><p>In the <span class="bold"><strong>Port Name</strong></span> list, select the
							port you want to use,
								<span class="emphasis"><em>CustomerServiceHttpSoap11Endpoint</em></span> in this
							example.</p></li><li class="listitem"><p>In the <span class="bold"><strong>Operation</strong></span> list, select the
							service you want to use. In this example the selected service is
								<span class="emphasis"><em>getCustomer(parameters):Customer</em></span>.</p></li><li class="listitem"><p>Click <span class="bold"><strong>Next</strong></span> to open a new view in the
							editor.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSetKeystore4.png"></div><p>In the panel to the right of the <span class="bold"><strong>Input
						mapping</strong></span> view, the input parameter of the service displays
					automatically. However, you can add other parameters if you select <span class="bold"><strong>[+] parameters</strong></span> and then click the plus button on top
					to display the <span class="bold"><strong>[Parameter Tree]</strong></span> dialog box
					where you can select any of the listed parameters. </p><p>The Web service in this example has only one input parameter, <span class="bold"><strong>ID</strong></span>.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the <span class="bold"><strong>Expression</strong></span> column of the
								<span class="emphasis"><em>parameters.ID</em></span> row, type in the customer ID of
							your interest between quotation marks. In this example, it is
								<span class="emphasis"><em>A00001</em></span>.</p></li><li class="listitem"><p>Click <span class="bold"><strong>Next </strong></span>to open a new view in the
							editor.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSetKeystore5.png"></div><p>In the <span class="bold"><strong>Element</strong></span> list to the left of the view,
					the output parameter of the web service displays automatically. However, you can
					add other parameters if you select <span class="bold"><strong>[+]
						parameters</strong></span> and then click the plus button on top to display the
						<span class="bold"><strong>[Parameter Tree]</strong></span> dialog box where you can
					select any of the parameters listed.</p><p>The Web service in this example has four output parameter:
						<span class="emphasis"><em>return.address</em></span>, <span class="emphasis"><em>return.email</em></span>,
						<span class="emphasis"><em>return.name</em></span> and
					<span class="emphasis"><em>return.phone</em></span>.</p><p>You now need to create a connection between the output parameter of the
					defined Web service and the schema of the output component. To do so:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the panel to the right of the view, click the three-dot button next
							to <span class="bold"><strong>Edit Schema</strong></span> to open a dialog box in
							which you can define the output schema.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSetKeystore6.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the schema editing dialog box, click the plus button to add four
							columns to the output schema.</p></li><li class="listitem"><p>Click in each column and type in the new names,
								<span class="emphasis"><em>Name</em></span>, <span class="emphasis"><em>Phone</em></span>,
								<span class="emphasis"><em>Email</em></span> and <span class="emphasis"><em>Address</em></span> in this
							example. This will retrieve the customer information of your
							interest.</p></li><li class="listitem"><p>Click <span class="bold"><strong>OK</strong></span> to validate your changes and
							to close the schema editing dialog box.</p></li><li class="listitem"><p>In the <span class="bold"><strong>Element</strong></span> list to the right of
							the editor, drag each parameter to the field that corresponds to the
							column you have defined in the schema editing dialog box.</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If available, use the <span class="bold"><strong>Auto map!</strong></span> button,
						located at the bottom left of the interface, to carry out the mapping
						operation automatically.</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Click <span class="bold"><strong>OK</strong></span> to validate your changes and
							to close the editor.</p></li><li class="listitem"><p>In the design workspace, double-click <span class="bold"><strong>tLogRow</strong></span> to open its <span class="bold"><strong>Basic
								settings</strong></span> view and define its properties.</p></li><li class="listitem"><p>Click <span class="bold"><strong>Sync columns</strong></span> to retrieve the
							schema from the preceding component.</p></li><li class="listitem"><p>Save your Job and press <span class="bold"><strong>F6</strong></span> to execute
							it.</p></li></ul></div><p>The information of the customer with ID <span class="emphasis"><em>A00001</em></span> is
					returned and displayed in the console of <span class="bluebold">Talend Open Studio</span>.</p><div class="mediaobject"><img src="../images/Use_Case_tSetKeystore7.png"></div></div></div></body></html>