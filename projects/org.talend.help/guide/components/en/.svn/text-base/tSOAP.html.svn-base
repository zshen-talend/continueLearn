<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tSOAP</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch11.html" title="Chapter&nbsp;11.&nbsp;Internet components"><link rel="prev" href="tSocketOutput.html" title="tSocketOutput"><link rel="next" href="tWebServiceInput.html" title="tWebServiceInput"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="EN" class="section" title="tSOAP"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tSOAP"></a>tSOAP</h2></div></div></div><div class="mediaobject"><img src="../images/tSOAP_icon32.png"></div><div class="section" title="tSOAP properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e230015"></a>tSOAP properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Component family</strong></span>
									</p>
								</td><td valign="top">
									<p>Internet </p>
								</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Function</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p><span class="bold"><strong>tSOAP</strong></span> sends the defined
										SOAP message with the given parameters to the invoked Web
										service and returns the value as defined, based on the given
										parameters.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Purpose</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>This component calls a method via a Web service in order
										to retrieve the values of the parameters defined in the
										component editor.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
											Schema</em></span></p>
								</td><td valign="top">
									<p>A schema is a row description, i.e., it defines the number
										of fields that will be processed and passed on to the next
										component. </p>
									<p> This component always uses a built-in, read-only schema
										that contains three columns:</p>
									<p> - <span class="bold"><strong>Header</strong></span>: stores the
										SOAP message header of the response from the server
										end.</p>
									<p> - <span class="bold"><strong>Body</strong></span>: stores the SOAP
										message body of the response from the server end.</p>
									<p> - <span class="bold"><strong>Fault</strong></span>: stores the
										error information when an error occurs during the SOAP
										message processing.</p>
									<p> </p>
									<p> Click <span class="bold"><strong>Edit Schema</strong></span> to
										view the schema structure.</p>
									<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Warning]" src="../images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
											<span class="emphasis"><em>Changing the schema type may result in loss of
												the schema structure and therefore failure of the
												component.</em></span>
										</p></td></tr></table></div>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Use NTLM</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box if you want to use the NTLM
										authentication protocol.</p>
									<p>
										<span class="bold"><strong>Domain</strong></span>: Name of the client
										domain.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Need authentication</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box and enter a user name and a password
										in the corresponding fields if this is necessary to access
										the service.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Use http proxy</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box if you are using a proxy server and
										fill in the necessary information.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Trust server with SSL</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to validate the server certificate
										to the client via an SSL protocol and fill in the
										corresponding fields:</p>
									<p>
										<span class="bold"><strong>TrustStore file</strong></span>: enter the
										path (including filename) to the certificate TrustStore file
										that contains the list of certificates that the client
										trusts.</p>
									<p>
										<span class="bold"><strong>TrustStore password</strong></span>: enter
										the password used to check the integrity of the TrustStore
										data. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>ENDPOINT</em></span>
									</p>
								</td><td valign="top">
									<p>Type in the URL address of the invoked Web server.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>SOAP Action</em></span>
									</p>
								</td><td valign="top">
									<p>Type in the URL address of the SOAPAction HTTP header
										field to be used to identify the intent of the SOAP HTTP
										request.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>SOAP version</em></span>
									</p>
								</td><td valign="top">
									<p>Select the version of the SOAP system you are
										using.</p>
									<p> </p>
									<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Warning]" src="../images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
											<span class="emphasis"><em>The required SOAP Envelope varies among
												versions.</em></span>
										</p></td></tr></table></div>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>SOAP message</em></span>
									</p>
								</td><td valign="top">
									<p>Type in the SOAP message to be sent to the invoked Web
										service. The global and context variables can be used when
										you write a SOAP message.</p>
									<p> For further information about the context variables, see
											<span class="bluebold">Talend Open Studio</span>
										<span class="bold"><strong>User Guide</strong></span>.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Advanced settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Temporary folder (for wsdl2java)</em></span>
									</p>
								</td><td valign="top">
									<p>Set or browse to a temporary folder that you configured in
										order to store the WSDL files.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>tStatCatcher Statistics</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to gather the job processing
										metadata at a Job level as well as at each component
										level.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Usage</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>This component can be used as an input or as an
										intermediate component.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Connections</strong></span>
									</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>Outgoing links (from one component to another):</p>
									<p>
										<span class="bold"><strong>Row</strong></span>: Main; Iterate</p>
									<p>
										<span class="bold"><strong>Trigger</strong></span>: Run if; On
										Component Ok; On Component Error.</p>
									<p> </p>
									<p> Incoming links (from one component to another):</p>
									<p>
										<span class="bold"><strong>Row</strong></span>: Main; Iterate</p>
									<p>
										<span class="bold"><strong>Trigger</strong></span>: Run if; On
										Component Ok; On Component Error.</p>
									<p> For further information regarding connections, see
											<span class="bluebold">Talend Open Studio</span>
										<span class="bold"><strong>User Guide</strong></span>.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Limitation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>N/A</p>
								</td></tr></tbody></table></div></div><div class="section" title="Scenario: Extracting the weather information using a Web service"><div class="titlepage"><div><div><h3 class="title"><a name="Raa15285"></a>Scenario: Extracting the weather information using a Web service</h3></div></div></div><p>This scenario describes a two-component Job that uses a Web service to
					retrieve the weather information of a given American city.</p><p>The Web service to be used is <a class="link" href="http://www.deeptraining.com/webservices/weather.asmx" target="_top">http://www.deeptraining.com/webservices/weather.asmx</a>.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Drop the following components from the <span class="bold"><strong>Palette</strong></span> onto the design workspace: <span class="bold"><strong>tSOAP</strong></span> and <span class="bold"><strong>tLogRow</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_case_tSOAP1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Right click <span class="bold"><strong>tSOAP</strong></span> to open the
							contextual menu.</p></li><li class="listitem"><p>Select <span class="bold"><strong>Row &gt; Main</strong></span>.</p></li><li class="listitem"><p>Click <span class="bold"><strong>tLogRow</strong></span> to connect the
							components together using a <span class="bold"><strong>Main Row</strong></span>
							link.</p></li><li class="listitem"><p>Double-click <span class="bold"><strong>tSOAP</strong></span> to open its
								<span class="bold"><strong>Basic settings</strong></span> view and define the
							component properties.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_case_tSOAP2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In <span class="bold"><strong>ENDPOINT</strong></span> field, type in or
							copy-paste the URL address of the Web service to be used between the
							quotation marks:
								<span class="emphasis"><em>&#8220;http://www.deeptraining.com/webservices/weather.asmx&#8221;</em></span>.</p></li><li class="listitem"><p>In the <span class="bold"><strong>SOAP Action</strong></span> field, type in or
							copy-paste the URL address of the SOAPAction HTTP header field that
							indicates that you want to retrieve the weather information:
								<span class="emphasis"><em>http://litwinconsulting.com/webservices/GetWeather</em></span>.</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>You can see this address by looking at the WSDL for the Web service you
						are calling. For the Web service of this example, in a web browser, append
							<code class="code">?wsdl</code> on the end of the URL of the Web service used in the
							<span class="bold"><strong>ENDPOINT</strong></span> field, open the corresponding
						web page, and then see the SOAPAction defined under the operation
						node:</p><p>
						</p><pre class="programlisting">&lt;wsdl:operation name="GetWeather"&gt;<span></span>
&lt;soap:operation soapAction="http://litwinconsulting.com/webservices/GetWeather"
style="document"/&gt;</pre><p>
					</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the <span class="bold"><strong>SOAP version</strong></span> field, select the
							version of the SOAP system being used. In this scenario, the version is
								<span class="emphasis"><em>SOAP 1.1</em></span>.</p></li><li class="listitem"><p>In the <span class="bold"><strong>SOAP message</strong></span> field, enter the
							XML-format message used to retrieve the weather information from the
							invoked Web service. In this example, the weather information of Chicago
							is needed, so the message is:</p><p>
							</p><pre class="programlisting">"&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\"
xmlns:web=\"http://litwinconsulting.com/webservices/\"&gt;<span></span>
 &lt;soapenv:Header/&gt;<span></span>
  &lt;soapenv:Body&gt;<span></span>
     &lt;web:GetWeather&gt;<span></span>
         &lt;web:City&gt;Chicago&lt;/web:City&gt;<span></span>
      &lt;/web:GetWeather&gt;<span></span>
   &lt;/soapenv:Body&gt;<span></span>
 &lt;/soapenv:Envelope&gt;"</pre><p>
						</p></li><li class="listitem"><p>Save your Job and press <span class="bold"><strong>F6</strong></span> to execute
							it.</p></li></ul></div><p>The weather of Chicago is returned and displayed in the console of the
						<span class="bold"><strong>Run</strong></span> view.</p><div class="mediaobject"><img src="../images/Use_case_tSOAP3.png"></div></div></div></body></html>