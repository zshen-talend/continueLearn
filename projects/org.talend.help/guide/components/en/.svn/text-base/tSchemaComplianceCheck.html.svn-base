<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tSchemaComplianceCheck</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="Raa78577.html" title="Chapter&nbsp;5.&nbsp;Data Quality components"><link rel="prev" href="tReplaceList.html" title="tReplaceList"><link rel="next" href="tUniqRow.html" title="tUniqRow"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="EN" class="section" title="tSchemaComplianceCheck"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tSchemaComplianceCheck"></a>tSchemaComplianceCheck</h2></div></div></div><div class="mediaobject"><img src="../images/tSchemaComplianceCheck_icon32_white.png"></div><div class="section" title="tSchemaComplianceCheck Properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e55736"></a>tSchemaComplianceCheck Properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Component family</strong></span>
									</p>
								</td><td valign="top">
									<p>Data Quality</p>
								</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Function</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Validates all input rows against a reference schema or
										checks type, nullability, length of rows against reference
										values. The validation can be carried out in full or
										partly.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Purpose</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Helps to ensure the data quality of any source data
										against a reference data source. </p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p><span class="emphasis"><em>Base Schema</em></span> and <span class="emphasis"><em>Edit
											schema</em></span></p>
								</td><td valign="top">
									<p>A schema is a row description, i.e., it defines the number
										of fields that will be processed and passed on to the next
										component. The schema is either built-in or remote in the
										Repository. </p>
									<p> Describe the structure and nature of your data to be
										processed as it is.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Built-in</strong></span>: The schema will
										be created and stored locally for this component only.
										Related topic: see <span class="bluebold">Talend Open Studio</span>
										<span class="bold"><strong>User Guide</strong></span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Repository</strong></span>: The schema
										already exists and is stored in the Repository, hence can be
										reused in various projects and Job designs. Related topic:
										see <span class="bluebold">Talend Open Studio</span>
										<span class="bold"><strong>User Guide</strong></span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Check all columns from schema</em></span>
									</p>
								</td><td valign="top">
									<p>Select this option to carry out all checks on all columns
										against the base schema. </p>
								</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
									<p>
										<span class="emphasis"><em>Custom defined</em></span>
									</p>
								</td><td valign="top">
									<p>Select this option to carry out particular checks on
										particular columns. When this option is selected, the
											<span class="bold"><strong>Checked Columns</strong></span> table
										and the <span class="bold"><strong>Trim the excess content of
											column when length checking chosen and the length is
											greater than defined length</strong></span> check box
										show.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Checked Columns</em></span>
									</p>
								</td><td valign="top">
									<p>In this table, define what checks are to be carried out on
										which columns. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Column</strong></span>: Displays the
										columns names.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Type</strong></span>: Select the type of
										data each column is supposed to contain. This validation is
										mandatory for all columns.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">&nbsp;</td><td valign="top">
									<p><span class="bold"><strong>Date pattern</strong></span>: Define the
										expected date format for each column with the data type of
											<span class="emphasis"><em>Date</em></span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">&nbsp;</td><td valign="top">
									<p><span class="bold"><strong>Nullable</strong></span>: Select the
										check box in an individual column to define the column to be
										nullable, that is, to allow rows with this column empty to
										go to the output flow regardless of the base schema
										definition. To define all columns to be nullable, select the
										check box in the table header.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">&nbsp;</td><td valign="top">
									<p><span class="bold"><strong>Undefined or empty</strong></span>:
										Select the check box in an individual column to reject rows
										with this column empty while the column is not nullable in
										the base schema definition. To carry out this verification
										on all the columns, select the check box in the table
										header.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Max length</strong></span>: Select the
										check box in an individual column to verify the data length
										of the column against the length definition of the base
										schema. To carry out this verification on all the columns,
										select the check box in the table header.</p>
								</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
									<p>
										<span class="emphasis"><em>Trim the excess content of column when length
											checking chosen and the length is greater than defined
											length</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to remove the part in excess of the
										defined length from the valid output flow instead of
										rejecting the row if the length check option is
										selected.</p>
								</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
									<p>
										<span class="emphasis"><em>Use another schema for compliance check</em></span>
									</p>
								</td><td valign="top">
									<p>Define a reference schema as you expect the data to be, in
										order to reject the non-compliant data.</p>
									<p> It can be restrictive on data type, null values, and/or
										length.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Advanced settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>tStatCatcher Statistics</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to collect log data at the component
										level.</p>
								</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
									<p>
										<span class="emphasis"><em>Use Fastest Date Check</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to perform a fast date format check
										using the <span class="emphasis"><em>TalendDate.isDate()</em></span> method of the
												<span class="emphasis"><em>TalendDate</em></span>
										system routine if <span class="emphasis"><em>Date pattern</em></span> is not
										defined. For more information about routines, see <span class="bluebold">Talend Open Studio</span>
										<span class="bold"><strong>User Guide</strong></span>.</p>
								</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
									<p>
										<span class="emphasis"><em>Treat all empty string as NULL</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to treat any empty fields in any
										columns as null values, instead of empty strings.</p>
									<p> By default, this check box is selected. When it is
										cleared, the <span class="bold"><strong>Choose
											Column(s)</strong></span> table shows to let you select
										individual columns.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Usage</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>This component is an intermediary step in the flow
										allowing to exclude from the main flow the non-compliant
										data. This component cannot be a start component as it
										requires an input flow. It also requires at least one output
										component to gather the validated flow, and possibly a
										second output component for rejected data using Rejects
										link. For more information, see <span class="bluebold">Talend Open Studio</span>
										<span class="bold"><strong>User Guide</strong></span>.</p>
								</td></tr></tbody></table></div></div><div class="section" title="Scenario: Validating data against schema"><div class="titlepage"><div><div><h3 class="title"><a name="d0e56154"></a>Scenario: Validating data against schema</h3></div></div></div><p>This very basic scenario shows how to check the type, nullability and length
					of an incoming flow against a defined reference schema. The incoming flow comes
					from a simple CSV file that contains heterogeneous data including wrong data
					type, data exceeding the maximum length, wrong ID and null values in
					non-nullable columns, as shown below:</p><div class="mediaobject"><img src="../images/Use_Case_tSchemaComplianceCheck5.png"></div><p>Upon validation, the valid rows and the rejected rows are displayed
					respectively in two tables on the <span class="bold"><strong>Run</strong></span> console. </p><div class="mediaobject"><img src="../images/Use_Case_tSchemaComplianceCheck1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Drop the following components: a <span class="bold"><strong>tFileInputDelimited</strong></span>, a <span class="bold"><strong>tSchemaComplianceCheck</strong></span>, and two <span class="bold"><strong>tLogRow</strong></span> components from the <span class="bold"><strong>Palette</strong></span> to the design workspace.</p></li><li class="listitem"><p>Connect the <span class="bold"><strong>tFileInputDelimited</strong></span>
							component to the <span class="bold"><strong>tSchemaComplianceCheck</strong></span>
							component using a <span class="bold"><strong>Row</strong></span> &gt; <span class="bold"><strong>Main</strong></span> connection.</p></li><li class="listitem"><p>Connect the <span class="bold"><strong>tSchemaComplianceCheck</strong></span>
							component to the first <span class="bold"><strong>tLogRow</strong></span>
							component using a <span class="bold"><strong>Row &gt; Main</strong></span>
							connection. This output flow will gather the valid data.</p></li><li class="listitem"><p>Connect the <span class="bold"><strong>tSchemaComplianceCheck</strong></span>
							component to the second <span class="bold"><strong>tLogRow</strong></span>
							component using a <span class="bold"><strong>Row &gt; Rejects</strong></span>
							connection. This second output flow will gather the non-compliant data.
						</p></li><li class="listitem"><p>Select the <span class="bold"><strong>Rejects</strong></span> connection, and
							notice that the schema passed to the second <span class="bold"><strong>tLogRow</strong></span> contains two more columns:
								<span class="emphasis"><em>ErrorCode</em></span> and
							<span class="emphasis"><em>ErrorMessage</em></span>. These two read-only columns provide
							information about the rejected data to ease error handling and
							troubleshooting if needed.</p></li><li class="listitem"><p>Double-click the <span class="bold"><strong>tFileInputDelimited</strong></span>
							component to display its <span class="bold"><strong>Basic settings</strong></span>
							view.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSchemaComplianceCheck2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Fill in the <span class="bold"><strong>File name</strong></span> field by
							browsing to the input file.</p></li><li class="listitem"><p>Specify the header row. In this use case, the first row of the input
							file is the header row.</p></li><li class="listitem"><p>Leave the other parameters as they are.</p></li><li class="listitem"><p>Click <span class="bold"><strong>Edit schema</strong></span> to describe the
							data structure of the input file. In this use case, the schema is made
							of five columns: <span class="emphasis"><em>ID</em></span>, <span class="emphasis"><em>Name</em></span>,
								<span class="emphasis"><em>BirthDate</em></span>, <span class="emphasis"><em>State</em></span>, and
								<span class="emphasis"><em>City</em></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSchemaComplianceCheck3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Leave the <span class="bold"><strong>Type</strong></span> field as permissive as
							possible. You will define the actual type of the data in the <span class="bold"><strong>tSchemaComplianceCheck</strong></span> component.</p></li><li class="listitem"><p>Fill the <span class="bold"><strong>Length</strong></span> field for the
								<span class="emphasis"><em>Name</em></span>, <span class="emphasis"><em>State</em></span> and
								<span class="emphasis"><em>City</em></span> columns with <span class="emphasis"><em>7</em></span>,
								<span class="emphasis"><em>10</em></span> and <span class="emphasis"><em>10</em></span> respectively.
						</p></li><li class="listitem"><p>Click <span class="bold"><strong>OK</strong></span> to propagate the schema and
							close the schema dialog box.</p></li><li class="listitem"><p>Double-click the <span class="bold"><strong>tSchemaComplianceCheck</strong></span> component to display its
								<span class="bold"><strong>Basic settings</strong></span> view, wherein you
							will define most of the validation parameters.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSchemaComplianceCheck4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Select the <span class="bold"><strong>Custom defined</strong></span> option in
							the <span class="bold"><strong>Mode</strong></span> area to perform custom defined
							checks. </p><p> In this example, we use the <span class="bold"><strong>Checked
								columns</strong></span> table to set the validation parameters. However,
							you can also select the <span class="bold"><strong>Check all columns from
								schema</strong></span> check box if you want to perform all the checks
							(type, nullability and length) on all the columns against the base
							schema, or select the <span class="bold"><strong>Use another schema for
								compliance check</strong></span> option and define a new schema as the
							expected structure of the data.</p></li><li class="listitem"><p>In the <span class="bold"><strong>Checked Columns</strong></span> table, define
							the checks to be performed. In this use case:</p><p> - The type of the <span class="emphasis"><em>ID</em></span> column should be <span class="bold"><strong>Int</strong></span>.</p><p> - The length of the <span class="emphasis"><em>Name</em></span>,
								<span class="emphasis"><em>State</em></span> and <span class="emphasis"><em>City</em></span> columns
							should be checked.</p><p> - The type of the <span class="emphasis"><em>BirthDate</em></span> column should be
								<span class="bold"><strong>Date</strong></span>, and the expected date pattern
							is <span class="emphasis"><em>dd-MM-yyyy</em></span>. </p><p> - All the columns should be checked for null values, so clear the
								<span class="bold"><strong>Nullable</strong></span> check box for all the
							columns.</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>To send rows containing fields exceeding the defined maximum length to the
						reject flow, make sure that the <span class="bold"><strong>Trim the excess
							content of column when length checking chosen and the length is greater
							than defined length</strong></span> check box is cleared. </p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the <span class="bold"><strong>Advanced settings</strong></span> view of the
								<span class="bold"><strong>tSchemaComplianceCheck </strong></span>component,
							select the <span class="bold"><strong>Treat all empty string as
								NULL</strong></span> option to sent any rows containing empty fields to
							the reject flow.</p></li><li class="listitem"><p>To view the validation result in tables on the <span class="bold"><strong>Run</strong></span> console, double-click each <span class="bold"><strong>tLogRow</strong></span> component and select the <span class="bold"><strong>Table</strong></span> option in the <span class="bold"><strong>Basic
								settings</strong></span> view.</p></li><li class="listitem"><p>Save your Job and press <span class="bold"><strong>F6</strong></span> to launch
							it. </p><p> Two tables are displayed on the console, showing the valid data and
							rejected data respectively.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSchemaComplianceCheck6.png"></div></div></div></body></html>