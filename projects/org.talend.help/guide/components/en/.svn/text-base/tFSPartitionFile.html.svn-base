<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tFSPartitionFile</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Enterprise"><link rel="up" href="Raa55271.html" title="Chapter&nbsp;11.&nbsp;FileScale components"><link rel="prev" href="tFSJoin.html" title="tFSJoin"><link rel="next" href="tFSSort.html" title="tFSSort"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="EN" class="section" title="tFSPartitionFile"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tFSPartitionFile"></a>tFSPartitionFile</h2></div></div></div><div class="mediaobject"><img src="../images/tFSPartitionFile_icon32.png"></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Warning]" src="../images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p><span class="emphasis"><em>This component will be available in the </em></span><span class="bold"><strong>Palette</strong></span><span class="emphasis"><em> of the studio on the condition that
                                you have subscribed to the relevant edition of </em></span><span class="bluebold">Talend Enterprise Data Integration Big Data
				edition</span><span class="emphasis"><em>.</em></span> For further
                        information about the Massively Parallel eXtention mode, see <span class="bluebold">Talend Enterprise Data Integration Big Data
				edition</span><span class="emphasis"><em> User
                        Guide.</em></span></p></td></tr></table></div><div class="section" title="tFSPartitionFile Properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e247141"></a>tFSPartitionFile Properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
                                                  <p><span class="bold"><strong>Component
                                                  family</strong></span></p>
                                                </td><td valign="top">
                                                  <p>FileScale</p>
                                                </td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
                                                  <p><span class="bold"><strong>Function</strong></span></p>
                                                </td><td colspan="2" valign="top">
                                                  <p><span class="bold"><strong>tFSPartitionFile
                                                  </strong></span>enables you to partition mass data from
                                                  an input file based on the hash or round-robin
                                                  partitioning method before writing it to an output
                                                  file. This will facilitates the management of very
                                                  large tables.</p>
                                                  <p> This component has real-time capabilities
                                                  for partitioning large scale files. To optimize
                                                  performance, the component usually sorts data
                                                  before processing it.</p>
                                                </td></tr><tr><td valign="top">
                                                  <p><span class="bold"><strong>Purpose</strong></span></p>
                                                </td><td colspan="2" valign="top">
                                                  <p>Helps partitioning mass data before writing
                                                  it in an output file.</p>
                                                </td></tr><tr><td valign="top">
                                                  <p><span class="bold"><strong>Basic
                                                  settings</strong></span></p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Schema type</em></span> and
                                                  <span class="emphasis"><em>Edit Schema</em></span></p>
                                                </td><td valign="top">
                                                  <p>A schema is a row description, i.e., it
                                                  defines the number of fields that will be
                                                  processed and passed on to the next component. The
                                                  schema is either built-in or remote in the
                                                  Repository. </p>
                                                  <p> Click <span class="bold"><strong>Edit Schema
                                                  </strong></span>to make changes to the schema. </p>
                                                  <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you make changes to the schema, it
									automatically becomes built-in.</p></td></tr></table></div>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="bold"><strong>Repository</strong></span>:
                                                  You have already created the schema and stored it
                                                  in the Repository. You can reuse it in various
                                                  projects and Job flowcharts. Related topic: see
                                                  <span class="bluebold">Talend Enterprise Studio</span>
                                                  <span class="bold"><strong>User
                                                  Guide</strong></span>.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="bold"><strong>Built-in</strong></span>:
                                                  You create and store the schema locally for this
                                                  component only. Related topic: see <span class="bluebold">Talend Enterprise Studio</span>
                                                  <span class="bold"><strong>User
                                                  Guide</strong></span>.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Property type</em></span></p>
                                                </td><td valign="top">
                                                  <p>Either <span class="bold"><strong>Built-in</strong></span> or <span class="bold"><strong>Repository</strong></span>. </p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="bold"><strong>Built-in</strong></span>:
                                                  No property data stored centrally.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="bold"><strong>Repository</strong></span>:
                                                  Select the repository file where Properties are
                                                  stored. The fields that follow are pre-filled
                                                  using the fetched data.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Input File Name</em></span></p>
                                                </td><td valign="top">
                                                  <p>Name of the file holding the data you want
                                                  to partition.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Output File Name</em></span></p>
                                                </td><td valign="top">
                                                  <p>Name of the file where you want to write the
                                                  partitioned data.</p>
                                                  <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The generated set of the output files will
                                                  be postfixed with an auto-increment number
                                                  depending on the number of partitions you
                                                  define.</p></td></tr></table></div>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Record separator</em></span>
                                                  (char)</p>
                                                </td><td valign="top">
                                                  <p>Character, string or regular expression to
                                                  separate records (lines).</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Field separator</em></span>
                                                  (char)</p>
                                                </td><td valign="top">
                                                  <p>Character, string or regular expression to
                                                  separate fields in a record.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Header</em></span></p>
                                                </td><td valign="top">
                                                  <p>Number of records to be skipped in the
                                                  beginning of the file.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Footer</em></span></p>
                                                </td><td valign="top">
                                                  <p>Number of records to be skipped at the end
                                                  of the file.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Number of
                                                  partitions</em></span></p>
                                                </td><td valign="top">
                                                  <p>Number of partitions in the file.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Partition</em></span></p>
                                                </td><td valign="top">
                                                  <p>Select from the list the partition method
                                                  you want to use:</p>
                                                  <p>
                                                  <span class="bold"><strong>Round-robin</strong></span>: The
                                                  records are partitioned on a round-robin basis so
                                                  that each partition contains a more or less equal
                                                  number of rows and load balancing is achieved.
                                                  Because there is no partition key, rows are
                                                  distributed randomly across all partitions.</p>
                                                  <p>
                                                  <span class="bold"><strong>Hash</strong></span>: The records
                                                  are hashed into partitions based on the value of a
                                                  key column or columns selected from the file
                                                  schema. </p>
                                                  <p> Select the <span class="bold"><strong>Partition
                                                  Key</strong></span> check box that corresponds to the
                                                  column(s) you want to use as a base to partition
                                                  data.</p>
                                                </td></tr><tr><td valign="top">
                                                  <p><span class="bold"><strong>Advanced
                                                  settings</strong></span></p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Generate FSLang
                                                  File</em></span></p>
                                                </td><td valign="top">
                                                  <p>Select this check box to generate the FSLang
                                                  file corresponding to your Job and click the
                                                  three-dot button next to the <span class="bold"><strong>FSLang File Name</strong></span> field to specify its
                                                  path and its name.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Assign FileScale
                                                  Path</em></span></p>
                                                </td><td valign="top">
                                                  <p>Select this check box and then click the
                                                  three-dot button next to the <span class="bold"><strong>FileScale Path</strong></span> field to select the
                                                  FileScale program executable file required to
                                                  execute the component.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Specify Number of Process
                                                  Child</em></span></p>
                                                </td><td valign="top">
                                                  <p>Select this check box and enter the number
                                                  of child processes to use for carrying out the
                                                  operation.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Sort results</em></span></p>
                                                </td><td valign="top">
                                                  <p>Select this check box to sort the
                                                  results.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>Custom FileScale Parameter
                                                  (separated by,)</em></span></p>
                                                </td><td valign="top">
                                                  <p>Enter the parameters for any specific
                                                  operation you want to add to the FileScale
                                                  executable call.</p>
                                                </td></tr><tr><td>
                                                  <p>&nbsp;</p>
                                                </td><td valign="top">
                                                  <p><span class="emphasis"><em>tStatCatcher
                                                  Statistics</em></span></p>
                                                </td><td valign="top">
                                                  <p>Select this check box to gather the Job
                                                  processing metadata at a Job level as well as at
                                                  each component level.</p>
                                                </td></tr><tr><td valign="top">
                                                  <p><span class="bold"><strong>Usage</strong></span></p>
                                                </td><td colspan="2" valign="top">
                                                  <p>This component handles files therefore it
                                                  does not require input and output data flows. It
                                                  is used to partition data in large scale
                                                  files.</p>
                                                </td></tr><tr><td valign="top">
                                                  <p><span class="bold"><strong>Limitation</strong></span></p>
                                                </td><td colspan="2" valign="top">
                                                  <p>Limitation is imposed by limits of physical
                                                  memory and CPU architectures. For example, total
                                                  length of processed files cannot exceed file
                                                  system limit for LargeFile support (maximum value
                                                  of 64 signed bits).</p>
                                                </td></tr></tbody></table></div></div><div class="section" title="Scenario: Partitioning mass data based on the hash method before writing it to an output file"><div class="titlepage"><div><div><h3 class="title"><a name="d0e247625"></a>Scenario: Partitioning mass data based on the hash method before writing it
                        to an output file</h3></div></div></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Warning]" src="../images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p><span class="emphasis"><em>Make sure that you have unzipped and saved locally the
                                        FileScale executable file delivered by </em></span><span class="bold"><strong>Talend</strong></span><span class="emphasis"><em>. You must
                                        define the path of this executable file in the
                                        </em></span><span class="bold"><strong>Advanced settings
                                        </strong></span><span class="emphasis"><em>view of </em></span><span class="bold"><strong>tFSPartitionFile</strong></span><span class="emphasis"><em>.</em></span></p></td></tr></table></div><p>This scenario describes a Job that uses the <span class="bold"><strong>tFSPartitionFile </strong></span>component to partition, in high speed,
                        very big data according to the hash method and using two of the input
                        columns as partition keys.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Drop the following components from the <span class="bold"><strong>Palette</strong></span> to the design workspace:
                                                <span class="bold"><strong>tRowGenerator</strong></span>,
                                                <span class="bold"><strong>tFileOutputDelimited</strong></span> and <span class="bold"><strong>tFSPartitionFile</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_FSPartitionFile.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Connect <span class="bold"><strong>tRowGenerator</strong></span> first
                                        to <span class="bold"><strong>tFileOutputDelimited</strong></span>
                                        using a <span class="bold"><strong>Row &gt; Main</strong></span> link
                                        and then to <span class="bold"><strong>tFSPartitionFile</strong></span> using an <span class="bold"><strong>OnSubjobOk</strong></span> link.</p></li></ul></div><p>In this scenario, the <span class="bold"><strong>tRowGenerator</strong></span> component
                        will generate data according to the schema you define in the component
                                <span class="bold"><strong>Basic settings</strong></span> view and send it to
                        the input file. If data generation is errorless, the <span class="bold"><strong>tFSPartitionFile</strong></span> component will partition data into six
                        subsets according to the defined partition method.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Click <span class="bold"><strong>tRowGenerator</strong></span> to
                                        display its <span class="bold"><strong>Basic settings</strong></span>
                                        view and define the component properties. </p></li><li class="listitem"><p>Click the three-dot button next to <span class="bold"><strong>RowGenerator Editor</strong></span> to open the
                                        component editor where you can define your schema.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_FSPartitionFile1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the upper half of the editor, click the plus button to add
                                        the columns you want to write in the input file.</p></li><li class="listitem"><p>Define the schema and set the parameters of the
                                        columns.</p><p> In this scenario, the input file contains five columns:
                                                <span class="emphasis"><em>id</em></span>,
                                                <span class="emphasis"><em>firstname</em></span>,
                                                <span class="emphasis"><em>lastname</em></span>,
                                                <span class="emphasis"><em>city</em></span> and
                                                <span class="emphasis"><em>age.</em></span></p></li></ul></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Warning]" src="../images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p><span class="emphasis"><em>Make sure to define the length of your columns. Otherwise,
                                        an error message will display when executing your
                                        Job.</em></span></p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>If required, click the <span class="bold"><strong>Preview</strong></span> tab in the lower half of the
                                        editor to display the corresponding view and then click the
                                                <span class="bold"><strong>View</strong></span> button to
                                        display a sample of the generated data.</p></li><li class="listitem"><p>Click <span class="bold"><strong>OK</strong></span> to validate your
                                        schema and close the <span class="bold"><strong>tRowGenerator</strong></span> editor. </p></li><li class="listitem"><p>Click <span class="bold"><strong>tFileOutputDelimited</strong></span> to
                                        display its <span class="bold"><strong>Basic settings</strong></span>
                                        view and define the component properties.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_FSPartitionFile2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Set the <span class="bold"><strong>tFileOutputdelimited</strong></span>
                                        properties.</p></li></ul></div><p>For this scenario, we want to define a context variables for the input file
                        path. You can create context variables in different ways. For more
                        information about how to create and use context variables, see <span class="bluebold">Talend Enterprise Studio</span> User Guide. In this example,
                        we want to define context variables directly from the component view.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Place your pointer in the field that you want to parameterize,
                                                <span class="bold"><strong>File Name</strong></span> in this
                                        example, and then press <span class="bold"><strong>F5</strong></span>.</p><p> A dialog box displays.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_FSPartitionFile3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Give a name to this new variable and select its type from the
                                                <span class="bold"><strong>Type</strong></span> list.</p></li><li class="listitem"><p>In the <span class="bold"><strong>Default value</strong></span> field,
                                        type in the context value you want to use for the input file
                                        path.</p></li><li class="listitem"><p>Click <span class="bold"><strong>Finish</strong></span> to validate your
                                        changes and close the dialog box.</p><p> The newly created variable is displayed in the <span class="bold"><strong>File Name</strong></span> field and in the
                                                <span class="bold"><strong>Contexts</strong></span>
                                        view.</p></li><li class="listitem"><p>In the <span class="bold"><strong>Basic settings</strong></span> view of
                                                <span class="bold"><strong>tFileOutputDelimited</strong></span>, click the
                                                <span class="bold"><strong>Edit schema</strong></span> button
                                        to display the schema you defined in the editor and modify
                                        it if required.</p></li><li class="listitem"><p>Click <span class="bold"><strong>OK</strong></span> to close the dialog
                                        box.</p></li><li class="listitem"><p>Click <span class="bold"><strong>tFSPartitionFile</strong></span> to
                                        open its <span class="bold"><strong>Basic settings</strong></span>
                                        view and define the component properties.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_FSPartitionFile4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Set schema and property type to <span class="bold"><strong>Built-In</strong></span>.</p></li><li class="listitem"><p>Click the <span class="bold"><strong>Edit schema</strong></span> button
                                        to display a dialog box. Here you can define your column
                                        schema. This schema must corresponds to the input file
                                        schema.</p></li><li class="listitem"><p>Click <span class="bold"><strong>OK</strong></span> to close the schema
                                        dialog box.</p><p> The defined column schema displays in the <span class="bold"><strong>Partition configuration</strong></span>
                                        table.</p></li><li class="listitem"><p>Set the input and output file names using the variable context
                                        you define earlier by pressing <span class="bold"><strong>Ctrl +
                                                Space</strong></span> and selecting the variable from the
                                        list.</p></li><li class="listitem"><p>Define the record and field separators and then the header and
                                        footer of the file, if any.</p></li><li class="listitem"><p>In the <span class="bold"><strong>Number of partitions</strong></span>
                                        field, enter a number of the data subsets you want to
                                        create, six in this scenario.</p></li><li class="listitem"><p>From the <span class="bold"><strong>Partition</strong></span> list,
                                        select the partition method you want to use, <span class="bold"><strong>Hash </strong></span>in this scenario.</p></li><li class="listitem"><p>In the <span class="bold"><strong>Partition
                                        </strong></span>configuration table, select the check boxes that
                                        correspond to the input columns you want to use as partition
                                        keys, <span class="emphasis"><em>id</em></span> and
                                                <span class="emphasis"><em>firstname</em></span> in this
                                        scenario.</p></li><li class="listitem"><p>Click the <span class="bold"><strong>Advanced settings</strong></span>
                                        tab to display the advanced settings view.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_FSPartitionFile5.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Select the <span class="bold"><strong>Assign FileScale
                                                Path</strong></span> check box to display the <span class="bold"><strong>FileScale Path</strong></span> field and then
                                        browse to the executable file delivered by <span class="bold"><strong>Talend</strong></span>.</p></li><li class="listitem"><p>Save your Job and press <span class="bold"><strong>F6</strong></span> to
                                        execute it. </p></li></ul></div><p>A progress bar displays below the <span class="bold"><strong>tFSPartition</strong></span> component in the design workspace to show
                        the completed percentage of the operation. This progress bar will make it
                        evident how the huge input data is partitioned at a very high speed.</p><p>When the percentage progress bar reaches 100%, the data is partitioned into
                        six subsets as defined in the component settings and written in the defined
                        output files as shown in the below capture. </p><div class="mediaobject"><img src="../images/Use_Case_FSPartitionFile6.png"></div><p>The generated set of the output files is postfixed with an auto-increment
                        number depending on the number of partitions you define, six in this
                        scenario.</p></div></div></body></html>