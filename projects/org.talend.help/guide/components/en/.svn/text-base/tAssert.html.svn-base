<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tAssert</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch12.html" title="Chapter&nbsp;12.&nbsp;Logs &amp; Errors components"><link rel="prev" href="ch12.html" title="Chapter&nbsp;12.&nbsp;Logs &amp; Errors components"><link rel="next" href="tAssertCatcher.html" title="tAssertCatcher"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="EN" class="section" title="tAssert"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tAssert"></a>tAssert</h2></div></div></div><div class="mediaobject"><img src="../images/tAssert_icon32_white.png"></div><div class="section" title="tAssert Properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e231901"></a>tAssert Properties</h3></div></div></div><p>The <span class="bold"><strong>tAssert</strong></span> component works alongside
						<span class="bold"><strong>tAssertCatcher</strong></span> to evaluate the status of a
					Job execution. It concludes with the boolean result based on an assertive
					statement related to the execution and feed the result to <span class="bold"><strong>tAssertCatcher</strong></span> for proper Job status presentation.</p><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Component family</strong></span>
									</p>
								</td><td valign="top">
									<p>Logs &amp; Errors </p>
								</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Function</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Provides the Job status messages to <span class="bold"><strong>tAssertCatcher</strong></span>.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Purpose</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Generates the boolean evaluation on the concern for the
										Job execution status. The status includes:</p>
									<p> - <span class="bold"><strong>Ok</strong></span>: the Job execution
										succeeds.</p>
									<p> - <span class="bold"><strong>Fail</strong></span>: the Job
										execution fails. The tested Job's result does not match the
										expectation or an execution error occured at runtime.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Description</em></span>
									</p>
								</td><td valign="top">
									<p>Type in your descriptive message to help identify the
										assertion of a <span class="bold"><strong>tAssert</strong></span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Expression</em></span>
									</p>
								</td><td valign="top">
									<p>Type in the assertive statement you base the evaluation
										on.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Usage</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>This component follows the action the assertive condition
										is directly related to. It can be the intermediate or end
										component of the main Job, or the start, intermediate or end
										component of the secondary Job.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Limitation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>The evaluation of <span class="bold"><strong>tAssert</strong></span>
										is captured only by <span class="bold"><strong>tAssertCatcher</strong></span>.</p>
								</td></tr></tbody></table></div></div><div class="section" title="Scenario: Setting up the assertive condition for a Job execution"><div class="titlepage"><div><div><h3 class="title"><a name="Raa92732"></a>Scenario: Setting up the assertive condition for a Job execution</h3></div></div></div><p>This scenario describes how to set up an assertive condition in <span class="bold"><strong>tAssert</strong></span> in order to evaluate that a Job execution
					succeeds or not. Moreover, you can also find out how the two different
					evaluation results display and the way to read them. Apart from <span class="bold"><strong>tAssert</strong></span>, the scenario uses the following components
					as well:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="bold"><strong>tFileInputDelimited</strong></span> and <span class="bold"><strong>tFileOutputDelimited</strong></span>. The two components
							compose the main Job of which the execution status is evaluated. For the
							detailed information on the two components, see <a class="xref" href="tFileInputDelimited.html" title="tFileInputDelimited">the section called &#8220;tFileInputDelimited&#8221;</a> and <a class="xref" href="tFileOutputDelimited.html" title="tFileOutputDelimited">the section called &#8220;tFileOutputDelimited&#8221;</a>.</p></li><li class="listitem"><p><span class="bold"><strong>tFileCompare</strong></span>. It realizes the
							comparison between the output file of the main Job and a standard
							reference file. The comparative result is evaluated by <span class="bold"><strong>tAssert</strong></span> against the assertive condition set
							up in its settings. For more detailed information on <span class="bold"><strong>tFileCompare</strong></span>, see <a class="xref" href="tFileCompare.html" title="tFileCompare">the section called &#8220;tFileCompare&#8221;</a>.</p></li><li class="listitem"><p><span class="bold"><strong>tAssertCatcher</strong></span>. It captures the
							evaluation generated by <span class="bold"><strong>tAssert</strong></span>. For
							more information on <span class="bold"><strong>tAssertCatcher</strong></span>, see
								<a class="xref" href="tAssertCatcher.html" title="tAssertCatcher">the section called &#8220;tAssertCatcher&#8221;</a>.</p></li><li class="listitem"><p><span class="bold"><strong>tLogRow</strong></span>. It allows you to read the
							captured evaluation. For more information on <span class="bold"><strong>tLogRow</strong></span>, see <a class="xref" href="tLogRow.html" title="tLogRow">the section called &#8220;tLogRow&#8221;</a>.</p></li></ul></div><p>First proceed as follows to design the main Job:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Prepare a delimited <span class="emphasis"><em>.csv</em></span> file as the source file
							read by your main Job.</p></li><li class="listitem"><p>Edit two rows in the delimited file. The contents you edit are not
							important, so feel free to simplify them.</p></li><li class="listitem"><p>Name it <span class="emphasis"><em>source.csv</em></span>.</p></li><li class="listitem"><p>In <span class="bluebold">Talend Open Studio</span>,
							create a new job <span class="emphasis"><em>JobAssertion</em></span>.</p></li><li class="listitem"><p>Place <span class="bold"><strong>tFileInputDelimited</strong></span> and
								<span class="bold"><strong>tFileOutputDelimited</strong></span> on the
							workspace.</p></li><li class="listitem"><p>Connect them with a <span class="bold"><strong>Row Main</strong></span> link to
							create the main Job.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAssert1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Double-click <span class="bold"><strong>tFileInputDelimited</strong></span> to
							open its <span class="bold"><strong>Component</strong></span> view.</p></li><li class="listitem"><p>In the <span class="bold"><strong>File Name</strong></span> field of the
								<span class="bold"><strong>Component</strong></span> view, fill in the path or
							browse to <span class="emphasis"><em>source.csv</em></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAssert2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Still in the <span class="bold"><strong>Component</strong></span> view, set
								<span class="bold"><strong>Property Type</strong></span> to <span class="bold"><strong>Built-In</strong></span> and click <span class="inlinemediaobject"><img src="../images/schema_icon.png"></span> next to <span class="bold"><strong>Edit
								schema</strong></span> to define the data to pass on to <span class="bold"><strong>tFileOutputDelimited</strong></span>. In the scenario, define
							the data presented in <span class="emphasis"><em>source.csv</em></span> you created.
						</p></li></ul></div><p>For more information about schema types, see <span class="bluebold">Talend Open Studio</span>
					<span class="bold"><strong>User Guide</strong></span>.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Define the other parameters in the corresponding fields according to
								<span class="emphasis"><em>source.csv</em></span> you created.</p></li><li class="listitem"><p>Double-click <span class="bold"><strong>tFileOutputDelimited</strong></span> to
							open its <span class="bold"><strong>Component</strong></span> view.</p></li><li class="listitem"><p>In the <span class="bold"><strong>File Name</strong></span> field of the
								<span class="bold"><strong>Component</strong></span> view, fill in or browse
							to specify the path to the output file, leaving the other fields as they
							are by default.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAssert4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Press <span class="bold"><strong>F6</strong></span> to execute the main Job. It
							reads <span class="emphasis"><em>source.csv</em></span>, pass the data to<span class="bold"><strong> tFileOutputDelimited</strong></span> and output an delimited
							file, <span class="emphasis"><em>out.csv</em></span>.</p></li></ul></div><p>Then contine to edit the Job to see how <span class="bold"><strong>tAssert</strong></span> evaluates the execution status of the main Job.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Rename <span class="emphasis"><em>out.csv</em></span> as
								<span class="emphasis"><em>reference.csv</em></span>.This file is used as the expected
							result the main Job should output.</p></li><li class="listitem"><p>Place <span class="bold"><strong>tFileCompare</strong></span>, <span class="bold"><strong>tAssert</strong></span> and<span class="bold"><strong>
								tLogRow</strong></span> on the workspace.</p></li><li class="listitem"><p>Connect them with <span class="bold"><strong>Row Main</strong></span>
							link.</p></li><li class="listitem"><p>Connect <span class="bold"><strong>tFileInputDelimited</strong></span> to
								<span class="bold"><strong>tFileCompare</strong></span> with <span class="bold"><strong>OnSubjobOk</strong></span> link.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAssert5.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Double-click <span class="bold"><strong>tFileCompare</strong></span> to open its
								<span class="bold"><strong>Component</strong></span> view.</p></li><li class="listitem"><p>In the <span class="bold"><strong>Component</strong></span> view, fill in the
							corresponding file paths in the <span class="bold"><strong>File to
								compare</strong></span> field and the <span class="bold"><strong>Reference
								file</strong></span> field, leaving the other fields as default.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAssert6.png"></div><p>For more information on the <span class="bold"><strong>tFileCompare</strong></span>
					component, see <a class="xref" href="tFileCompare.html" title="tFileCompare">the section called &#8220;tFileCompare&#8221;</a>.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Then click <span class="bold"><strong>tAssert</strong></span> and click the
								<span class="bold"><strong>Component</strong></span> tab on the lower side of
							the workspace.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAssert7.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the <span class="bold"><strong>Component</strong></span> view, edit the
							assertion <code class="code">row2.differ==0</code> in the <span class="bold"><strong>expression</strong></span> field and the descriptive message of the
							assertion in <span class="bold"><strong>description</strong></span> field.</p></li></ul></div><p>In the <span class="bold"><strong>expression</strong></span> field, <code class="code">row2 </code>is
					the data flow transmissing from <span class="bold"><strong>tFileCompare</strong></span>
						to<span class="bold"><strong> tAssert</strong></span>, <code class="code">differ</code> is one of
					the columns of the <span class="bold"><strong>tFileCompare</strong></span> schema and
					presents whether the compared files are identical, and <code class="code">0</code> means no
					difference is detected between the <span class="emphasis"><em>out.csv</em></span> and
						<span class="emphasis"><em>reference.csv</em></span> by <span class="bold"><strong>tFileCompare</strong></span>. Hence when the compared files are identical, the
					assertive condition is thus fulfilled, <span class="bold"><strong>tAssert</strong></span>
					concludes that the main Job succeeds; otherwise, it concludes failure.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <span class="emphasis"><em>differ</em></span> column is in the read-only <span class="bold"><strong>tFileCompare</strong></span> schema. For more information on its
						schema, see <a class="xref" href="tFileCompare.html" title="tFileCompare">the section called &#8220;tFileCompare&#8221;</a>.</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Press <span class="bold"><strong>F6</strong></span> to execute the Job.</p></li><li class="listitem"><p>Check the result presented in the <span class="bold"><strong>Run</strong></span>
							view</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAssert8.png"></div><p>The console shows the comparison result of <span class="bold"><strong>tFileCompare</strong></span>: <code class="code">Files are identical</code>. But you find
					nowhere the evaluation result of <span class="bold"><strong>tAssert</strong></span>.</p><p>So you need <span class="bold"><strong>tAssertCatcher</strong></span> to capture the
					evaluation.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Place <span class="bold"><strong>tAssertCatcher</strong></span> and <span class="bold"><strong>tLogRow</strong></span> on the workspace.</p></li><li class="listitem"><p>Connect them with <span class="bold"><strong>Row Main</strong></span>
							link.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAssert9.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Use the default configuration in the <span class="bold"><strong>Component</strong></span> view of <span class="bold"><strong>tAssertCatcher</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAssert10.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Press <span class="bold"><strong>F6</strong></span> to execute the Job.</p></li><li class="listitem"><p>Check the result presented in the <span class="bold"><strong>Run</strong></span>
							view. You will see the Job status information is added in:</p><p>
							</p><pre class="programlisting">2010-01-29 15:37:33|fAvAzH|TASSERT|JobAssertion|java|tAssert_1|Ok|--|
The output file should be identical with the reference file</pre><p>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAssert11.png"></div><p>The descriptive information on <span class="emphasis"><em>JobAssertion</em></span> in the
					console is organized according to the <span class="bold"><strong>tAssertCatcher</strong></span> schema. This schema includes, in the following
					order, the execution time, the process ID, the project name, the Job name, the
					code language, the evaluation origin, the evaluation result, detailed
					information of the evaluation, descriptive message of the assertion. For more
					information on the schema of <span class="bold"><strong>tAssertCatcher</strong></span>,
					see <a class="xref" href="tAssertCatcher.html" title="tAssertCatcher">the section called &#8220;tAssertCatcher&#8221;</a>.</p><p>The console indicates that the execution status of Job
						<span class="emphasis"><em>JobAssertion</em></span> is <span class="emphasis"><em>Ok</em></span>. In addition to
					the evalution, you can still see other descriptive information about
						<span class="emphasis"><em>JobAssertion</em></span> including the descriptive message you have
					edited in the <span class="bold"><strong>Basic settings</strong></span> of <span class="bold"><strong>tAssert</strong></span>. </p><p>Then you will perform operations to make the main Job fail to generate the
					expected file. To do so, proceed as follows in the same Job you have
					executed:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Delete a row in <span class="emphasis"><em>reference.csv</em></span>.</p></li><li class="listitem"><p>Press <span class="bold"><strong>F6</strong></span> to execute the Job
							again.</p></li><li class="listitem"><p>Check the result presented in <span class="bold"><strong>Run</strong></span>
							view.</p><p>
							</p><pre class="programlisting">2010-02-01 19:47:43|GeHJNO|TASSERT|JobAssertion|tAssert_1|Failed|Test
logically failed|The output file should be identical with the reference
file</pre><p>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAssert12.png"></div><p>The console shows that the execution status of the main Job is
						<span class="emphasis"><em>Failed</em></span>. The detailed explanation for this status is
					closely behind it, reading <code class="code">Test logically failed</code>. </p><p>You can thus get a basic idea about your present Job status: it fails to
					generate the expected file because of a logical failure. This logical failure
					could come from a logical mistake during the Job design.</p><p>The status and its explanatory information are presented respectively in the
						<span class="emphasis"><em>status</em></span> and the <span class="emphasis"><em>substatus</em></span> columns
					of the <span class="bold"><strong>tAssertCatcher</strong></span> schema. For more
					information on the columns, see <a class="xref" href="tAssertCatcher.html" title="tAssertCatcher">the section called &#8220;tAssertCatcher&#8221;</a>.</p></div></div></body></html>