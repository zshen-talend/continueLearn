<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tFlowMeterCatcher</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch12.html" title="Chapter&nbsp;12.&nbsp;Logs &amp; Errors components"><link rel="prev" href="tFlowMeter.html" title="tFlowMeter"><link rel="next" href="tLogCatcher.html" title="tLogCatcher"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="EN" class="section" title="tFlowMeterCatcher"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tFlowMeterCatcher"></a>tFlowMeterCatcher</h2></div></div></div><div class="mediaobject"><img src="../images/tFlowMeterCatcher_icon32_white.png"></div><div class="section" title="tFlowMeterCatcher Properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e233934"></a>tFlowMeterCatcher Properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Component family</strong></span>
									</p>
								</td><td valign="top">
									<p>Logs &amp; Errors</p>
								</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Function</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Based on a defined sch.ema, the <span class="bold"><strong>tFlowMeterCatcher</strong></span> catches the processing
										volumetric from the <span class="bold"><strong>tFlowMeter
										</strong></span>component and passes them on to the output
										component.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Purpose</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Operates as a log function triggered by the use of a
											<span class="bold"><strong>tFlowMeter</strong></span> component in
										the Job.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Schema type</em></span>
									</p>
								</td><td valign="top">
									<p>A schema is a row description, i.e., it defines the fields
										to be processed and passed on to the next component. In this
										particular case, the schema is read-only, as this component
										gathers standard log information including:</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Moment</strong></span>: Processing time
										and date </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Pid</strong></span>: Process ID</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Father_pid</strong></span>: Process ID of
										the father Job if applicable. If not applicable, Pid is
										duplicated.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Root_pid</strong></span>: Process ID of
										the root Job if applicable. If not applicable, pid of
										current Job is duplicated.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>System_pid</strong></span>: Process id
										generated by the system</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Project:</strong></span> Project name,
										the Job belongs to.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Job</strong></span>: Name of the current
										Job</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Job_repository_id</strong></span>: ID
										generated by the application.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Job_version</strong></span>: Version
										number of the current Job</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Context</strong></span>: Name of the
										current context</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Origin</strong></span>: Name of the
										component if any</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Label</strong></span>: Label of the row
										connection preceding the <span class="bold"><strong>tFlowMeter</strong></span> component in the Job, and that
										will be analyzed for volumetrics.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Count</strong></span>: Actual number of
										rows being processed </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Reference</strong></span>: Number of rows
										passing the reference link.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Thresholds</strong></span>: Only used
										when the relative mode is selected in the <span class="bold"><strong>tFlowMeter</strong></span> component. </p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Usage</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>This component is the start component of a secondary Job
										which triggers automatically at the end of the main Job.
									</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Limitation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>The use of this component cannot be separated from the use
										of the <span class="bold"><strong>tFlowMeter</strong></span>. For more
										information, see <a class="xref" href="tFlowMeter.html" title="tFlowMeter">the section called &#8220;tFlowMeter&#8221;</a></p>
								</td></tr></tbody></table></div></div><div class="section" title="Scenario: Catching flow metrics from a Job"><div class="titlepage"><div><div><h3 class="title"><a name="Raa48663"></a>Scenario: Catching flow metrics from a Job</h3></div></div></div><p>The following basic Job aims at catching the number of rows being passed in
					the flow processed. The measures are taken twice, once after the input
					component, that is, before the filtering step and once right after the filtering
					step, that is, before the output component.</p><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Drop the following components from the <span class="bold"><strong>Palette</strong></span> to the design workspace: <span class="bold"><strong>tMysqlInput</strong></span>, <span class="bold"><strong>tFlowMeter</strong></span>
							(x2), <span class="bold"><strong>tMap</strong></span>, <span class="bold"><strong>tLogRow</strong></span>, <span class="bold"><strong>tFlowMeterCatcher</strong></span> and <span class="bold"><strong>tFileOutputDelimited</strong></span>.</p></li><li class="listitem"><p>Link components using row main connections and click on the label to
							give consistent name throughout the Job, such as
								<span class="emphasis"><em>US_States</em></span> from the input component and
								<span class="emphasis"><em>filtered_states</em></span> for the output from the
								<span class="bold"><strong>tMap</strong></span> component, for example.</p></li><li class="listitem"><p>Link the <span class="bold"><strong>tFlowMeterCatcher</strong></span> to the
								<span class="bold"><strong>tFileOutputDelimited</strong></span> component
							using a row main link also as data is passed.</p></li><li class="listitem"><p>On the <span class="bold"><strong>tMysqlInput</strong></span> Component view,
							configure the connection properties as <span class="bold"><strong>Repository</strong></span>, if the table metadata are stored in the
							Repository. Or else, set the Type as <span class="bold"><strong>Built-in</strong></span> and configure manually the connection and
							schema details if they are built-in for this Job.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The 50 States of the USA are recorded in the table
								<span class="emphasis"><em>states</em></span>. In order for all 50 entries of the
							table to get selected, the query to run onto the Mysql database is as
							follows:</p><p>
							<code class="code">select * from states</code>. </p></li><li class="listitem"><p>Select the relevant <span class="bold"><strong>encoding type</strong></span> on
							the Advanced settings vertical tab.</p></li><li class="listitem"><p>Then select the following component which is a <span class="bold"><strong>tFlowMeter</strong></span> and set its properties. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Select the check box <span class="bold"><strong>Use input connection name
								as label</strong></span>, in order to reuse the label you chose in the
							log output file (<span class="bold"><strong>tFileOutputDelimited</strong></span>).
						</p></li><li class="listitem"><p>The mode is <span class="bold"><strong>Absolute</strong></span> as there is no
							reference flow to meter against, also no <span class="bold"><strong>Threshold</strong></span> is to be set for this example.</p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Then launch the <span class="bold"><strong>tMap</strong></span> editor to set
							the filtering properties.</p></li><li class="listitem"><p>For this use case, drag and drop the ID and State columns from the
							Input area of the <span class="bold"><strong>tMap</strong></span> towards the
							Output area. No variable is used in this example.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher5.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>On the Output flow area (labelled <span class="emphasis"><em>filtered_states</em></span>
							in this example), click the arrow &amp; plus button to activate the
							expression filter field. </p></li><li class="listitem"><p>Drag the <span class="emphasis"><em>State</em></span> column from the Input area
								(<span class="emphasis"><em>row2</em></span>) towards the expression filter field and
							type in the rest of the expression in order to filter the state labels
							starting with the letter <span class="emphasis"><em>M</em></span>. The final expression
							looks like: <code class="code">row2.State.startsWith("M")</code>
						</p></li><li class="listitem"><p>Click <span class="bold"><strong>OK</strong></span> to validate the
							setting.</p></li><li class="listitem"><p>Then select the second <span class="bold"><strong>tFlowMeter</strong></span>
							component and set its properties.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher6.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Select the check box <span class="bold"><strong>Use input connection name
								as label</strong></span>.</p></li><li class="listitem"><p>Select <span class="bold"><strong>Relative </strong></span>as <span class="bold"><strong>Mode</strong></span> and in the <span class="bold"><strong>Reference connections</strong></span> list, select
								<span class="emphasis"><em>US_States</em></span> as reference to be measured
							against.</p></li><li class="listitem"><p>Once again, no threshold is used for this use case.</p></li><li class="listitem"><p>No particular setting is required in the <span class="bold"><strong>tLogRow</strong></span>. </p></li><li class="listitem"><p>Neither does the <span class="bold"><strong>tFlowMeterCatcher</strong></span> as
							this component&#8217;s properties are limited to a preset schema which
							includes typical log information.</p></li><li class="listitem"><p>So eventually set the log output component (<span class="bold"><strong>tFileOutputDelimited</strong></span>).</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher8.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Select the <span class="bold"><strong>Append</strong></span> check box in order
							to log all <span class="bold"><strong>tFlowMeter</strong></span> measures.</p></li><li class="listitem"><p>Then save your Job and press <span class="bold"><strong>F6</strong></span> to
							execute it.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher9.png"></div><p>The <span class="bold"><strong>Run</strong></span> view shows the filtered state labels
					as defined in the Job.</p><div class="mediaobject"><img src="../images/Use_Case_tFlowMeterCatcher7.png"></div><p>In the delimited csv file, the number of rows shown in column <span class="bold"><strong>count</strong></span> varies between <span class="bold"><strong>tFlowMeter1</strong></span> and <span class="bold"><strong>tFlowMeter2</strong></span> as
					the filtering has then been carried out. The <span class="emphasis"><em>reference</em></span>
					column shows also this difference.</p></div></div></body></html>