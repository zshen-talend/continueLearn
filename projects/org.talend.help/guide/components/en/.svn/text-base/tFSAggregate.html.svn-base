<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tFSAggregate</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Enterprise"><link rel="up" href="Raa55271.html" title="Chapter&nbsp;11.&nbsp;FileScale components"><link rel="prev" href="Raa55271.html" title="Chapter&nbsp;11.&nbsp;FileScale components"><link rel="next" href="tFSCheck.html" title="tFSCheck"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="EN" class="section" title="tFSAggregate"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tFSAggregate"></a>tFSAggregate</h2></div></div></div><div class="mediaobject"><img src="../images/tFSAggregate_icon32.png"></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Warning]" src="../images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p><span class="emphasis"><em>This component will be available in the </em></span><span class="bold"><strong>Palette</strong></span><span class="emphasis"><em> of the studio on the condition that you have
                subscribed to the relevant edition of </em></span><span class="bluebold">Talend Enterprise Data Integration Big Data
				edition</span><span class="emphasis"><em>.</em></span></p></td></tr></table></div><div class="section" title="tFSAggregate properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e242836"></a>tFSAggregate properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
                            <p><span class="bold"><strong>Component family</strong></span></p>
                        </td><td valign="top">
                            <p>FileScale</p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
                            <p><span class="bold"><strong>Function</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p><span class="bold"><strong>tFSAggregate</strong></span> performs an
                                aggregation based on one or more columns. For each output line, an
                                aggregation key is provided, as well as the result of the
                                corresponding aggregation operation (count, avg or sum). </p>
                            <p> This component has high speed capabilities for aggregating large
                                scale files.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="bold"><strong>Purpose</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p><span class="bold"><strong>tFSAggregate</strong></span> helps setting
                                metrics and statistics based on values or calculations from one or
                                several large scale files.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="bold"><strong>Basic settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Schema type and Edit Schema</em></span></p>
                        </td><td valign="top">
                            <p>A schema is a row description, i.e., it defines the number of
                                fields that will be processed and passed on to the next component.
                                The schema is either built-in or remote in the Repository. </p>
                            <p> Click <span class="bold"><strong>Edit Schema </strong></span>to make
                                changes to the schema. </p>
                            <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you make changes to the schema, it automatically becomes
									built-in.</p></td></tr></table></div>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="bold"><strong>Repository</strong></span>: You have already
                                created the schema and stored it in the Repository. You can reuse it
                                in various projects and job flowcharts. Related topic: see <span class="bluebold">Talend Enterprise Studio</span>
                                <span class="bold"><strong>User Guide</strong></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="bold"><strong>Built-in</strong></span>: You create and store
                                the schema locally for this component only. Related topic: see
                                    <span class="bluebold">Talend Enterprise Studio</span>
                                <span class="bold"><strong>User Guide</strong></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Property type</em></span></p>
                        </td><td valign="top">
                            <p>Either <span class="bold"><strong>Built-in</strong></span> or <span class="bold"><strong>Repository</strong></span>. </p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="bold"><strong>Built-in</strong></span>: No property data stored
                                centrally.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="bold"><strong>Repository</strong></span>: Select the repository
                                file where Properties are stored. The fields that follow are
                                pre-filled in using the fetched data.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Input File Name</em></span></p>
                        </td><td valign="top">
                            <p>Name of the file holding the data you want to collect.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Output File Name</em></span></p>
                        </td><td valign="top">
                            <p>Name of the file where you want to write the collected
                                data.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Record separator</em></span> (char)</p>
                        </td><td valign="top">
                            <p>Character, string or regular expression to separate records
                                (lines).</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Field separator</em></span> (char)</p>
                        </td><td valign="top">
                            <p>Character, string or regular expression to separate fields in a
                                record.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Header</em></span></p>
                        </td><td valign="top">
                            <p>Number of records to be skipped in the beginning of the
                                file.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Footer</em></span></p>
                        </td><td valign="top">
                            <p>Number of records to be skipped at the end of the file.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Group by</em></span></p>
                        </td><td valign="top">
                            <p><span class="bold"><strong>Column</strong></span>: List of the columns of
                                the input file.</p>
                            <p>
                                <span class="bold"><strong>Key Attribute</strong></span>: Select the check box
                                next to the name of the column(s) you want to use to regroup
                                data.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Operations</em></span></p>
                        </td><td valign="top">
                            <p><span class="bold"><strong>Additional Output Column</strong></span>: Enter
                                the name you want to use for the column containing the results of
                                the aggregation operation.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="bold"><strong>Function</strong></span>: Select the type of the
                                aggregation operation to perform:</p>
                            <p>
                                <span class="bold"><strong>count</strong></span>: calculates the number of
                                lines,</p>
                            <p>
                                <span class="bold"><strong>avg</strong></span>: calculates the average,</p>
                            <p>
                                <span class="bold"><strong>sum</strong></span>: calculates the sum.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="bold"><strong>Input Column</strong></span>: Select the input
                                column from which the values are collected for the aggregation
                                operation.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="bold"><strong>Advanced settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Generate FSLang File</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to generate the FSLang file corresponding to
                                your Job and click the three-dot button next to the <span class="bold"><strong>FSLang File Name</strong></span> field to specify its
                                path and its name.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Assign FileScale Path</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box and then click the three-dot button next to
                                the <span class="bold"><strong>FileScale Path</strong></span> field to select
                                the FileScale program executive file required to execute the
                                component.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Specify Number of Process Child</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box and enter the number of child processes to
                                use for carrying out the aggregation.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Sort results</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to sort the results.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Custom FileScale Parameter (separated
                                by,)</em></span></p>
                        </td><td valign="top">
                            <p>Enter the parameters for any specific operation you want to add to
                                the FileScale executable call.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>tStatCatcher Statistics</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to gather the job processing metadata at a
                                job level as well as at each component level.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="bold"><strong>Usage</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>This component handles files therefore it does not require input
                                and output data flows. It is used to aggregate data from large scale
                                files.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="bold"><strong>Limitation</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>Limitation is imposed by the limits of physical memory and Central
                                Processing Unit architectures. For example, total length of
                                processed files cannot exceed file system limit for LargeFile
                                support (maximum value of 64 signed bits).</p>
                        </td></tr></tbody></table></div></div><div class="section" title="Scenario: Aggregating data from a large file"><div class="titlepage"><div><div><h3 class="title"><a name="Raa18215"></a>Scenario: Aggregating data from a large file</h3></div></div></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Warning]" src="../images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p><span class="emphasis"><em>Make sure that you have unzipped and saved locally the FileScale
                    executable file delivered by </em></span><span class="bold"><strong>Talend</strong></span><span class="emphasis"><em>.
                    You must define the path of this executable file in the </em></span><span class="bold"><strong>Advanced settings </strong></span><span class="emphasis"><em>view of </em></span><span class="bold"><strong>tFSAggregate</strong></span><span class="emphasis"><em>.</em></span></p></td></tr></table></div><p>This scenario describes a Job that uses the <span class="bold"><strong>tFSAggregate
            </strong></span>component to aggregate, in high speed, very big customers&#8217; data according to
            the States in which they are based, calculating the number of customers that have been
            aggregated for each State and the average of their incomes.</p><p>In this scenario, we have already stored the input schemas of the large input file in
            the Repository. For more information about storing schema metadata in the Repository,
            see <span class="bluebold">Talend Enterprise Studio</span>
            <span class="bold"><strong>User Guide</strong></span>.</p><p>The input file contains nine columns: <span class="emphasis"><em>id</em></span>,
                <span class="emphasis"><em>CustomerName</em></span>, <span class="emphasis"><em>CustomerAddress</em></span>,
                <span class="emphasis"><em>idState</em></span>, <span class="emphasis"><em>id2</em></span>,
            <span class="emphasis"><em>RegTime</em></span>, <span class="emphasis"><em>RegisterTime</em></span>,
                <span class="emphasis"><em>Sum1</em></span> and <span class="emphasis"><em>Sum2</em></span>.</p><div class="mediaobject"><img src="../images/Use_Case_tFSAggregate1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the <span class="bold"><strong>Repository</strong></span> tree view, expand <span class="bold"><strong>Metadata</strong></span> and the file node where you have stored the
                    input schemas and drop the relevant metadata onto the design workspace.</p><p>The <span class="bold"><strong>[Components]</strong></span> dialog box displays.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFSSort2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Select <span class="bold"><strong>tFSAggregate</strong></span> from the list and click
                        <span class="bold"><strong>OK</strong></span> to close the dialog box.</p><p>The <span class="bold"><strong>tFSAggregate</strong></span> component displays in the
                    design workspace.</p></li><li class="listitem"><p>Double-click <span class="bold"><strong>tFSAggregate</strong></span> to display its
                        <span class="bold"><strong>Basic settings</strong></span> view. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFSAggregate2.png"></div><p>All <span class="bold"><strong>tFSAggregate</strong></span> property fields are automatically
            filled in. If you did not define your input schemas locally in the Repository, fill in
            the details manually after selecting <span class="bold"><strong>Built-in</strong></span> in the
                <span class="bold"><strong>Schema Type</strong></span> and <span class="bold"><strong>Property
                Type</strong></span> fields.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the <span class="bold"><strong>Output File Name</strong></span> field, browse to the
                    output file you want to write the aggregated data in. </p></li><li class="listitem"><p>In the <span class="bold"><strong>Group by </strong></span>table, select the check
                    box(es) next to the column name(s) you want to use to regroup the data. You can
                    select multiple columns as aggregation set if you want to regroup data based on
                    multiple criteria. For this scenario, we want to use the
                        <span class="emphasis"><em>idState</em></span> column to regroup the data.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFSAggregate3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the <span class="bold"><strong>Operations</strong></span> table, click the plus
                    button to add two columns that will hold the results of the aggregation
                    operation.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFSAggregate4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the first line of the <span class="bold"><strong>Additional Output
                        column</strong></span> list, enter a name for the first additional output column,
                        <span class="emphasis"><em>count</em></span> in this scenario. </p></li><li class="listitem"><p>Click in the first line of the <span class="bold"><strong>Function</strong></span> list
                    and select the aggregation operation you want to perform, <span class="bold"><strong>count</strong></span> in this scenario. </p></li><li class="listitem"><p>Click in the first line of the <span class="bold"><strong>Input Column</strong></span>
                    list and select the column from which the input values are to be taken,
                        <span class="emphasis"><em>id</em></span> in this scenario.</p></li></ul></div><p>Thus, the column <span class="emphasis"><em>count</em></span> will be added to the output file and will
            contain the number of the <span class="emphasis"><em>id</em></span> of the customers regrouped by
            State.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the second line of the <span class="bold"><strong>Additional Output
                        column</strong></span> list, enter a name for the second additional output
                    column, <span class="emphasis"><em>avg</em></span> in this scenario.</p></li><li class="listitem"><p>Click in the second line of the <span class="bold"><strong>Function</strong></span> list
                    and select the aggregation operation you want to perform, <span class="bold"><strong>avg</strong></span> in this scenario.</p></li><li class="listitem"><p>Click in the second line of the <span class="bold"><strong>Input Column</strong></span>
                    list and select the column from which the input values are to be taken,
                        <span class="emphasis"><em>Sum1</em></span> in this scenario.</p></li></ul></div><p>Thus, the column <span class="emphasis"><em>avg</em></span> will be added to the output file and will
            contain the average of the <span class="emphasis"><em>Sum1</em></span> of the customers.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Click the <span class="bold"><strong>Advanced settings</strong></span> tab to display
                    the advanced settings view and then select the <span class="bold"><strong>Assign
                        FileScale Path</strong></span> check box to display the <span class="bold"><strong>FileScale Path</strong></span> field and then browse to the executable file
                    delivered by <span class="bold"><strong>Talend</strong></span>.</p></li><li class="listitem"><p>Save your Job and press <span class="bold"><strong>F6</strong></span> to execute it. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFSAggregate5.png"></div><p>A progress bar displays below the <span class="bold"><strong>tFSAggregate</strong></span>
            component in the design workspace to show the completed percentage of the aggregation
            operation. This progress bar will make it evident how the huge input data is aggregated
            at a very high speed.</p><p>When the percentage progress bar reaches 100%, the specified data is regrouped and
            written in the two new defined output columns.</p></div></div></body></html>