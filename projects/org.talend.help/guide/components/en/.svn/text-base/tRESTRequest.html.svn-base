<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tRESTRequest</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="Raa48933.html" title="Chapter&nbsp;9.&nbsp;ESB components"><link rel="prev" href="tESBProviderResponse.html" title="tESBProviderResponse"><link rel="next" href="tRESTResponse.html" title="tRESTResponse"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="EN" class="section" title="tRESTRequest"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tRESTRequest"></a>tRESTRequest</h2></div></div></div><div class="mediaobject"><img src="../images/tRESTRequest_icon32_white.png"></div><div class="section" title="tRESTRequest properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e191767"></a>tRESTRequest properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Component family</strong></span>
									</p>
								</td><td valign="top">
									<p>ESB/REST</p>
								</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Function</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p><span class="bold"><strong>tRESTRequest</strong></span> sends HTTP
										request from the client end to the server end to
										post/read/delete data.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Purpose</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>This component allows you to use GET/POST/PUT/DELETE
										operations to send HTTP requests to the server end.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>REST Endpoint</em></span>
									</p>
								</td><td valign="top">Fill this field with the URI location where
									REST-ful web service will be accessible for requests.</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>REST API Mapping</em></span>
									</p>
								</td><td valign="top">
									<p>Click the plus button beneath the mapping table to add
										lines for specifying HTTP request:</p>
									<p><span class="bold"><strong>Output Flow</strong></span>: Click the
										three-dot button to specify the name of an output flow and
										set the schema for the output flow in the dialog box
										afterwards.</p>
									<p><span class="bold"><strong>HTTP Verb</strong></span>: Select a HTTP
										method(GET/POST/PUT/DELETE) from the list.</p>
									<p><span class="bold"><strong>URI pattern</strong></span>: Fill this
										field with REST-ful URIs that describe the resource.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Keep listening</em></span>
									</p>
								</td><td valign="top">
									<p>Check this box when you want to ensure that the provider
										(and therefore Talend Job) will continue listening for
										requests after processing the first incoming request.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Advanced settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>tStatCatcher Statistics</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to gather the Job processing
										metadata at a Job level as well as at each component
										level.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Usage</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>This component covers the possibility that a Talend Job
										can be wrapped as a service, with the ability to input a
										request to a service into a Job and return the Job result as
										a service response.</p>
									<p> The <span class="bold"><strong>tRESTRequest</strong></span>
										component should be used with the <span class="bold"><strong>tRESTResponse</strong></span> component to provide a Job
										result as a response, in case of a request-response
										communication style. </p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Limitation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>n/a</p>
								</td></tr></tbody></table></div></div><div class="section" title="Scenario: REST service sending a message with a response"><div class="titlepage"><div><div><h3 class="title"><a name="fhan-20111104-esb-trestrequest-scenario"></a>Scenario: REST service sending a message with a response</h3></div></div></div><p>This scenario describes the process of sending a message to the web server and
					receiving the response from the server.</p><div class="mediaobject" align="center"><img src="../images/use_case-trestrequest1.png" align="middle"></div><div class="section" title="Configuring the tRESTRequest component"><div class="titlepage"><div><div><h4 class="title"><a name="d0e191966"></a>Configuring the tRESTRequest component</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Drop the following components from the <span class="bold"><strong>Palette</strong></span> onto the design workspace: <span class="bold"><strong>tRESTRequest</strong></span>, <span class="bold"><strong>tXMLMap</strong></span> and <span class="bold"><strong>tRESTResponse</strong></span>.</p></li><li class="listitem"><p>Double-click <span class="bold"><strong>tRESTRequest</strong></span> in the
								design workspace to display its <span class="bold"><strong>Basic
									settings</strong></span> view.</p><div class="mediaobject" align="center"><img src="../images/use_case-trestrequest2.png" align="middle"></div></li><li class="listitem"><p>Fill the <span class="bold"><strong>REST Endpoint</strong></span> field with
								the URI location where the REST-ful web service will be accessible
								for requests. For example,
									<span class="emphasis"><em>"http://192.168.0.235:8088/user"</em></span>.</p></li><li class="listitem"><p>Click the plus button to add one line in the <span class="bold"><strong>REST API Mapping</strong></span> table.</p></li><li class="listitem"><p>Select the newly-added line and click the three-dot button in the
									<span class="bold"><strong>Output Flow</strong></span> column to add a
								schema for the output flow.</p><p>In this scenario, the output flow will be named as
									<span class="emphasis"><em>GetOneUser</em></span>. </p><div class="mediaobject" align="center"><img src="../images/use_case-trestrequest3.png" align="middle"></div><p>Then click the plus button to add a new line
									<span class="emphasis"><em>id</em></span> for the schema in the dialog box.</p></li><li class="listitem"><p>Click <span class="bold"><strong>OK</strong></span> to save the
								schema.</p></li><li class="listitem"><p>Select <span class="bold"><strong>GET</strong></span> from the list in the
									<span class="bold"><strong>HTTP Verb</strong></span> column.</p></li><li class="listitem"><p>Fill the field in the <span class="bold"><strong>URI Pattern</strong></span>
								column with <code class="code">"/{id}/"</code>.</p></li><li class="listitem"><p>Select the <span class="bold"><strong>Keep Listening</strong></span> check
								box.</p></li></ol></div></div><div class="section" title="Configuring the tXMLMap component"><div class="titlepage"><div><div><h4 class="title"><a name="d0e192061"></a>Configuring the tXMLMap component</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Connect <span class="bold"><strong>tRESTRequest</strong></span> to <span class="bold"><strong>tXMLMap</strong></span> using <span class="bold"><strong>Row</strong></span> &gt; <span class="bold"><strong>GetOneUser</strong></span>
								connection.</p></li><li class="listitem"><p>Double-click <span class="bold"><strong>tXMLMap</strong></span> in the
								design workspace to display its <span class="bold"><strong>Basic
									settings</strong></span> and click the three-dot button to open the
									<span class="bold"><strong>Map Editor</strong></span>.</p><div class="mediaobject" align="center"><img src="../images/use_case-trestrequest4.png" align="middle"></div></li><li class="listitem"><p>Click the plus button on the top right to add an output and name
								the output as <span class="emphasis"><em>ResponseUsers</em></span>.</p></li><li class="listitem"><p>Click the plus button on the bottom right to add two columns for
								the output.</p><p>Name the first column as <span class="emphasis"><em>body</em></span> and set the
									<span class="bold"><strong>Type</strong></span> to <span class="bold"><strong>Document</strong></span>.</p><p>Name the second column as <span class="emphasis"><em>string</em></span> and set the
									<span class="bold"><strong>Type</strong></span> to <span class="bold"><strong>String</strong></span>.</p></li><li class="listitem"><p>Right-click on the node <span class="bold"><strong>root</strong></span> and
								select <span class="bold"><strong>Create Sub-Element</strong></span> to create
								a sub-element.</p><div class="mediaobject" align="center"><img src="../images/use_case-trestrequest5.png" align="middle"></div><p>Name the sub-element as <span class="emphasis"><em>foo</em></span> in the popup
								dialog box.</p></li><li class="listitem"><p>Right-click on the <span class="emphasis"><em>foo</em></span> node created in the
								previous step and select <span class="bold"><strong>As loop
									element</strong></span>.</p><div class="mediaobject" align="center"><img src="../images/use_case-trestrequest6.png" align="middle"></div><p>Fill the field to the left of <span class="emphasis"><em>foo</em></span> node with
									<span class="emphasis"><em>"foo"</em></span>.</p></li><li class="listitem"><p>Click <span class="bold"><strong>OK</strong></span> to save the
								settings.</p></li></ol></div></div><div class="section" title="Configuring the tRESTResponse component"><div class="titlepage"><div><div><h4 class="title"><a name="d0e192169"></a>Configuring the tRESTResponse component</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Connect <span class="bold"><strong>tXMLMap</strong></span> to <span class="bold"><strong>tRESTResponse</strong></span> using <span class="bold"><strong>Row</strong></span> &gt; <span class="bold"><strong>ResponseUsers</strong></span> connection.</p></li><li class="listitem"><p>Click <span class="bold"><strong>Sync columns</strong></span> to retrieve
								the schema defined in the preceding component.</p><div class="mediaobject" align="center"><img src="../images/use_case-trestrequest7.png" align="middle"></div></li><li class="listitem"><p>Select <span class="bold"><strong>OK(200)</strong></span> from the <span class="bold"><strong>Return status code</strong></span> list.</p></li><li class="listitem"><p>Leave rest of the settings as they are.</p></li></ol></div></div><div class="section" title="Saving and executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e192209"></a>Saving and executing the Job</h4></div></div></div><p>Save the Job and press <span class="bold"><strong>F6</strong></span> to execute
						it.</p><div class="mediaobject" align="center"><img src="../images/use_case-trestrequest8.png" align="middle"></div><p> The HTTP request for a user id is sent to the server with a HTTP
						response.</p></div></div></div></body></html>