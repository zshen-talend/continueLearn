<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tFileFetch</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch11.html" title="Chapter&nbsp;11.&nbsp;Internet components"><link rel="prev" href="ch11.html" title="Chapter&nbsp;11.&nbsp;Internet components"><link rel="next" href="internet-tFileInputJSON.html" title="tFileInputJSON"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="EN" class="section" title="tFileFetch"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tFileFetch"></a>tFileFetch</h2></div></div></div><div class="mediaobject"><img src="../images/tFileFetch.png"></div><div class="section" title="tFileFetch properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e214080"></a>tFileFetch properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Component family</strong></span>
									</p>
								</td><td valign="top">
									<p>Internet</p>
								</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Function</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p><span class="bold"><strong>tFileFetch</strong></span> retrieves a
										file via a defined protocol</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Purpose</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p><span class="bold"><strong>tFileFetch</strong></span> allows you to
										retrieve file data according to the protocol which is in
										place.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Protocol</em></span>
									</p>
								</td><td valign="top">
									<p>Select the protocol you want to use from the list and fill
										in the corresponding fields: <span class="bold"><strong>http,
											https, ftp, smb</strong></span>.</p>
									<p> </p>
									<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The properties differ slightly depending on the type
											of protocol selected. The additional fields are defined
											in this table, after the basic settings. </p></td></tr></table></div>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>URI</em></span>
									</p>
								</td><td valign="top">
									<p>Type in the URI of the site from which the file is to be
										fetched.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Use cache to save resource</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to save the data in the
										cache.</p>
									<p> </p>
									<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This option allows you to process the file data flow
											(in streaming mode) without saving it on your drive.
											This is faster and improves performance.</p></td></tr></table></div>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>smb</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Domain</em></span>
									</p>
								</td><td valign="top">
									<p>Enter the Microsoft server domain name</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>smb</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Username and Password</em></span>
									</p>
								</td><td valign="top">
									<p>Enter the authentication information required to access
										the server.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Destination Directory</em></span>
									</p>
								</td><td valign="top">
									<p>Browse to the destination folder where the file fetched is
										to be placed.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Destination Filename</em></span>
									</p>
								</td><td valign="top">
									<p>Enter a new name for the file fetched.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https, ftp</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Create full path according to URI</em></span>
									</p>
								</td><td valign="top">
									<p>This check box is selected by default. It allows you to
										reproduce the URI directory path. To save the file at the
										root of your destination directory, clear the check
										box.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Add header</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box if you want to add one or more HTTP
										request headers as fetch conditions. In the Headers table,
										enter the name(s) of the HTTP header parameter(s) in the
										Headers field and the corresponding value(s) in the Value
										field.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>POST method</em></span>
									</p>
								</td><td valign="top">
									<p>This check box is selected by default. It allows you to
										use the POST method. In the Parameters table, enter the name
										of the variable(s) in the Name field and the corresponding
										value in the Value field.</p>
									<p> Clear the check box if you want to use the GET
										method.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https, ftp</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Die on error</em></span>
									</p>
								</td><td valign="top">
									<p>Clear this check box to skip the rows in error and to
										complete the process for the error free rows</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https, ftp, smb</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Read Cookie</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box for <span class="bold"><strong>tFileFetch</strong></span> to load a web authentication
										cookie.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https, ftp, smb</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Save Cookie</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to save the web page authentication
										cookie. This means you will not have to log on to the same
										web site in the future.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https, ftp, smb</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Cookie directory</em></span>
									</p>
								</td><td valign="top">
									<p>Click <span class="bold"><strong>[...]</strong></span> and browse to
										where you want to save the cookie in your directory, or to
										where the cookie is already saved.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https, ftp, smb</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Cookie policy</em></span>
									</p>
								</td><td valign="top">
									<p>Choose a cookie policy from this drop-down list. Four
										options are available, i.e. BROWSER_COMPATIBILITY, DEFAULT,
										NETSCAPE and RFC_2109. </p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https, ftp, smb</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Single cookie header</em></span>
									</p>
								</td><td valign="top">
									<p>Check this box to put all cookies into one request header
										for maximum compatibility among different servers.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Advanced settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>tStatCatcher Statistics</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to collect the log data at each
										component level.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Timeout</em></span>
									</p>
								</td><td valign="top">
									<p>Enter the number of seconds after which the protocol
										connection should close.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Print response to console</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to print the server response in the
										console.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Upload file</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to upload one or more files to the
										server. In the Name field, enter the name of the file you
										want to upload and in the File field, indicate the
										path.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https, ftp</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Enable proxy server</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box if you are connecting via a proxy
										and complete the fields which follow with the relevant
										information.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Enable NTLM Credentials</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box if you are using an NTLM
										authentication protocol.</p>
									<p>
										<span class="bold"><strong>Domain</strong></span>: The client domain
										name.</p>
									<p>
										<span class="bold"><strong>Host</strong></span>: The client&#8217;s IP
										address.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Need authentication</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box and enter the username and password
										in the relevant fields, if they are required to access the
										protocol.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>http, https</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Support redirection</em></span>
									</p>
								</td><td valign="top">
									<p>Select this check box to repeat the redirection request
										until redirection is successful and the file can be
										retrieved.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Usage</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>This component is generally used as a start component to
										feed the input flow of a Job and is often connected to the
										Job using an <span class="bold"><strong>OnSubjobOk</strong></span> or
											<span class="bold"><strong>OnComponentOk</strong></span> link,
										depending on the context.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Limitation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>n/a</p>
								</td></tr></tbody></table></div></div><div class="section" title="Scenario 1: Fetching data through HTTP"><div class="titlepage"><div><div><h3 class="title"><a name="d0e214724"></a>Scenario 1: Fetching data through HTTP</h3></div></div></div><p>This scenario describes a three-component Job which retrieves data from an
					HTTP website and select data that will be stored in a delimited file. </p><div class="mediaobject"><img src="../images/Use_Case_tFileFetch1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Drop a <span class="bold"><strong>tFileFetch</strong></span>, a <span class="bold"><strong>tFileInputRegex</strong></span> and a <span class="bold"><strong>tFileOutputDelimited</strong></span> onto your design workspace and
							connect them as preceding.</p></li><li class="listitem"><p> In the <span class="bold"><strong>tFileFetch</strong></span>
							<span class="bold"><strong>Basic settings</strong></span> panel, select the
							protocol you want to use from the list. Here, use the HTTP
							protocol.</p></li><li class="listitem"><p> Type in the URI where the file to be fetched can be retrieved
							from.</p></li><li class="listitem"><p> In the <span class="bold"><strong>Destination directory</strong></span> field,
							browse to the folder where the fetched file is to be stored. </p></li><li class="listitem"><p> In the <span class="bold"><strong>Filename</strong></span> field, type in a new
							name for the file if you want it to be changed. In this example,
								<span class="emphasis"><em>filefetch.txt</em></span>.</p></li><li class="listitem"><p> If needed, select the <span class="bold"><strong>Add header</strong></span>
							check box and define one or more HTTP request headers as fetch
							conditions. For example, to fetch the file only if it has been modified
							since 19:43:31 GMT, October 29, 1994, fill in the <span class="bold"><strong>Name</strong></span> and <span class="bold"><strong>Value</strong></span> fields
							with "If-Modified-Since" and "Sat, 29 Oct 1994 19:43:31 GMT"
							respectivley in the <span class="bold"><strong>Headers</strong></span> table. For
							details about HTTP request header definitions, see <a class="link" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14" target="_top">Header Field Definitions</a>. </p></li><li class="listitem"><p> Select the <span class="bold"><strong>tFileInputRegex</strong></span>, set the
								<span class="bold"><strong>File name</strong></span> so that it corresponds to
							the file fetched earlier.</p></li><li class="listitem"><p> Using a regular expression, in the <span class="bold"><strong>Regex
							</strong></span>field, select the relevant data from the fetched file. In
							this example: &lt;td(?: class="leftalign")?&gt; \s* (t\w+) \s*
							&lt;/td&gt; </p></li></ul></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Warning]" src="../images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						<span class="emphasis"><em>Regex syntaxe requires double quotes.</em></span>
					</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Define the <span class="bold"><strong>header</strong></span>, <span class="bold"><strong>footer</strong></span> and <span class="bold"><strong>limit</strong></span> if need be. In this case, ignore these
							fields.</p></li><li class="listitem"><p> Define also the schema describing the flow to be passed on to the
							final output.</p></li><li class="listitem"><p> The schema should be automatically propagated to the final output,
							but to be sure, check the schema in the <span class="bold"><strong>Basic
								settings</strong></span> panel of the <span class="bold"><strong>tFileOutputDelimited </strong></span>component.</p></li><li class="listitem"><p> Then press <span class="bold"><strong>F6</strong></span> to run the Job.</p></li></ul></div></div><div class="section" title="Scenario 2: Reusing stored cookie to fetch files through HTTP"><div class="titlepage"><div><div><h3 class="title"><a name="d0e214842"></a>Scenario 2: Reusing stored cookie to fetch files through HTTP</h3></div></div></div><p>This scenario describes a two-component Job which logs in a given HTTP website
					and then using cookie stored in a user-defined local directory, fetches data
					from this website. </p><div class="mediaobject"><img src="../images/Use_Case_tFileFetch2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Drop two <span class="bold"><strong>tFileFetch</strong></span> onto your design
							workspace and connect them using the <span class="bold"><strong>OnSubjobOk</strong></span> link.</p></li><li class="listitem"><p> Double click <span class="bold"><strong>tFileFetch_1</strong></span> to open
							its component view.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFileFetch3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the <span class="bold"><strong>Procotol</strong></span> field, select the
							protocol you want to use from the list. Here, we use the
								<span class="emphasis"><em>HTTP</em></span> protocol.</p></li><li class="listitem"><p> In the <span class="bold"><strong>URI</strong></span> field, type in the URI
							through which you can log in the website and fetch the web page
							accordingly. In this example, the URI is
								<code class="code">http://www.codeproject.com/script/Membership/LogOn.aspx?rp=http%3a%2f%2fwww.codeproject.com%2fKB%2fcross-platform%2fjavacsharp.aspx&amp;download=true</code>.</p></li><li class="listitem"><p> In the <span class="bold"><strong>Destination directory</strong></span> field,
							browse to the folder where the fetched file is to be stored. This folder
							will be created on the fly if it does not exist. In this example, type
							in <span class="emphasis"><em>C:/Logpage</em></span>.</p></li><li class="listitem"><p> In the <span class="bold"><strong>Destination Filename</strong></span> field,
							type in a new name for the file if you want it to be changed. In this
							example, <span class="emphasis"><em>webpage.html</em></span>.</p></li><li class="listitem"><p> Under the <span class="bold"><strong>Parameters</strong></span> table, click
							the plus button to add two rows.</p></li><li class="listitem"><p> In the <span class="bold"><strong>Name</strong></span> column of the <span class="bold"><strong>Parameters</strong></span> table, type in a new name
							respectively for the two rows. In this example, they are
								<span class="emphasis"><em>Email</em></span> and <span class="emphasis"><em>Password</em></span>, which
							are required by the website you are logging in.</p></li><li class="listitem"><p> In the <span class="bold"><strong>Value</strong></span> column, type in the
							authentication information.</p></li><li class="listitem"><p> Select the <span class="bold"><strong>Save cookie</strong></span> check box to
							activate the <span class="bold"><strong>Cookie directory</strong></span>
							field.</p></li><li class="listitem"><p> In the <span class="bold"><strong>Cookie directory</strong></span> field,
							browse to the folder where you want to store cookie file and type in a
							name for the cookie to be saved. This folder must exist already. In this
							example, the directory is <span class="emphasis"><em>C:/temp/Cookie</em></span>.</p></li><li class="listitem"><p> Double click <span class="bold"><strong>tFileFetch_2</strong></span> to open
							its <span class="bold"><strong>Component</strong></span> view.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFileFetch4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the <span class="bold"><strong>Procotol</strong></span> list, select
								<span class="bold"><strong>http</strong></span>.</p></li><li class="listitem"><p> In the <span class="bold"><strong>URI</strong></span> field, type in the
							address from which you fetch the files of your interest. In this
							example, the address is
								<code class="code">http://www.codeproject.com/KB/java/RemoteShell/RemoteShell.zip</code>.</p></li><li class="listitem"><p> In the <span class="bold"><strong>Destination directory</strong></span> field,
							type in the directory or browse to the folder where you want to store
							the fetched files. This folder can be automatically created if it does
							not exist yet during the execution process. In this example, type in
								<span class="emphasis"><em>C:/JavaProject</em></span>.</p></li><li class="listitem"><p> In the <span class="bold"><strong>Destination Filename</strong></span> field,
							type in a new name for the file if you want it to be changed. In this
							example, <span class="emphasis"><em>RemoteShell.zip</em></span>.</p></li><li class="listitem"><p> Clear the <span class="bold"><strong>Post method</strong></span> check box to
							deactivate the <span class="bold"><strong>Parameter</strong></span> table.</p></li><li class="listitem"><p> Select the <span class="bold"><strong>Read cookie</strong></span> check box to
							activate the <span class="bold"><strong>Cookie directory</strong></span>
							field.</p></li><li class="listitem"><p> In the <span class="bold"><strong>Cookie directory</strong></span> field, type
							in the directory or browse to the cookie file you have saved and need to
							use. In this example, the directory is
								<span class="emphasis"><em>C:/temp/Cookie</em></span>.</p></li><li class="listitem"><p> Then press <span class="bold"><strong>F6</strong></span> to run the Job.</p></li><li class="listitem"><p> Check each folder you have used to store the fetched files.</p></li></ul></div></div><div class="section" title="Related scenario: Reading the data from a remote file in streaming mode"><div class="titlepage"><div><div><h3 class="title"><a name="Raa56909"></a>Related scenario: Reading the data from a remote file in streaming
					mode</h3></div></div></div><p>For an example of transferring data in streaming mode, see <a class="xref" href="tFileFetch.html#Raa56909" title="Related scenario: Reading the data from a remote file in streaming mode">the section called &#8220;Related scenario: Reading the data from a remote file in streaming
					mode&#8221;</a></p></div></div></body></html>