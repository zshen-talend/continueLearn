<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tAdvancedFileOutputXML</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch19.html" title="Chapitre&nbsp;19.&nbsp;Composants XML"><link rel="prev" href="ch19.html" title="Chapitre&nbsp;19.&nbsp;Composants XML"><link rel="next" href="tDTDValidator.html" title="tDTDValidator"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="FR" class="section" title="tAdvancedFileOutputXML"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tAdvancedFileOutputXML"></a>tAdvancedFileOutputXML</h2></div></div></div><div class="mediaobject"><img src="../images/tAdvancedFileOutputXML_icon32_white.png"></div><div class="section" title="Propri&eacute;t&eacute;s du tAdvancedFileOutputXML"><div class="titlepage"><div><div><h3 class="title"><a name="d0e270821"></a>Propri&eacute;t&eacute;s du tAdvancedFileOutputXML</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Famille de composant</strong></span>
									</p>
								</td><td valign="top">
									<p>File/Output ou XML</p>
								</td><td valign="top"> </td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Fonction</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Le composant <span class="bold"><strong>tAdvancedFileOutputXML</strong></span> transmet des donn&eacute;es
										vers un fichier de type XML et propose une interface de
										gestion des boucles et des Group by si n&eacute;cessaire.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Objectif</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Le <span class="bold"><strong>tAdvancedFileOutputXML</strong></span>
										cr&eacute;e un fichier XML contenant les valeurs des donn&eacute;es
										d&eacute;finies dans l&#8217;arborescence XML.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Use Output Stream</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez la case pour traiter le flux de donn&eacute;es qui vous
										int&eacute;resse. Une fois coch&eacute;e, le champ <span class="bold"><strong>Output Stream</strong></span> s&#8217;affiche et vous pouvez
										saisir le flux de donn&eacute;es souhait&eacute;.</p>
									<p>Le flux de donn&eacute;es &agrave; traiter doit &ecirc;tre ajout&eacute; au flux afin
										que ce composant r&eacute;cup&egrave;re ces donn&eacute;es via la variable
										repr&eacute;sentative correspondante.</p>
									<p>Cette variable peut &ecirc;tre pr&eacute;d&eacute;finie dans votre Studio ou
										fournie par le contexte ou les composants utilis&eacute;(s) avec ce
										composant. Sinon, vous pouvez la d&eacute;finir manuellement et
										l&#8217;utiliser selon votre Job, par exemple &agrave; l&#8217;aide d&#8217;un
											<span class="bold"><strong>tJava</strong></span> ou d&#8217;un <span class="bold"><strong>tJavaFlex</strong></span>.</p>
									<p>Afin d&#8217;&eacute;viter les d&eacute;sagr&eacute;ments de la saisie, vous pouvez
										s&eacute;lectionner la variable qui vous int&eacute;resse dans la liste
										d&#8217;autocompl&eacute;tion (<span class="bold"><strong>Ctrl+Espace</strong></span>) afin de remplir le champ, si
										cette variable a &eacute;t&eacute; correctement d&eacute;finie.</p>
									<p>Pour pus d&#8217;informations concernant l&#8217;utilisation d&#8217;un
										flux, consultez&nbsp;<a class="xref" href="tFileInputDelimited.html#Raa47862" title="Sc&eacute;nario&nbsp;2&nbsp;: Lire les donn&eacute;es d&#8217;un fichier distant en mode stream">la section intitul&eacute;e &laquo;&nbsp;Sc&eacute;nario&nbsp;2&nbsp;: Lire les donn&eacute;es d&#8217;un fichier distant en mode stream&nbsp;&raquo;</a>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>File name</em></span>
									</p>
								</td><td valign="top">
									<p>Chemin d&#8217;acc&egrave;s et nom du fichier de sortie, et/ou variable
										&agrave; utiliser.</p>
									<p>Ce champ est indisponible si vous avez coch&eacute; la case
											<span class="bold"><strong>Use Output
										Stream</strong></span>.</p>
									<p>Pour plus d&#8217;informations, consultez le <span class="bold"><strong>Guide utilisateur</strong></span> de <span class="bluebold">Talend Open Studio</span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Configure XML tree</em></span>
									</p>
								</td><td valign="top">
									<p>Ouvre l&#8217;interface d&#8217;aide &agrave; la cr&eacute;ation du fichier XML.
										Pour plus d&#8217;informations sur l&#8217;interface, consultez <a class="xref" href="tAdvancedFileOutputXML.html#Raa35713" title="D&eacute;finir un arbre XML">la section intitul&eacute;e &laquo;&nbsp;D&eacute;finir un arbre XML&nbsp;&raquo;</a>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="emphasis"><em>Schema</em></span> et <span class="emphasis"><em>Edit
											Schema</em></span></p>
								</td><td valign="top">
									<p>Un sch&eacute;ma est une description de lignes, i.e., il d&eacute;finit
										le nombre de champ qui sont trait&eacute;s et pass&eacute;s au composant
										suivant. Le sch&eacute;ma est soit local (built-in) soit distant
										dans le Repository.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Built-in</strong></span>&nbsp;: Le sch&eacute;ma est
										cr&eacute;&eacute; et conserv&eacute; ponctuellement pour ce composant seulement.
										Voir &eacute;galement&nbsp;le <span class="bold"><strong>Guide
											utilisateur</strong></span> de <span class="bluebold">Talend Open Studio</span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Repository&nbsp;</strong></span>: Le sch&eacute;ma
										existe d&eacute;j&agrave; et est stock&eacute; dans le Repository. Ainsi, il peut
										&ecirc;tre r&eacute;utilis&eacute; dans divers projets et Job designs. Voir
										&eacute;galement&nbsp;le <span class="bold"><strong>Guide
											utilisateur</strong></span> de <span class="bluebold">Talend Open Studio</span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Sync columns</em></span>
									</p>
								</td><td valign="top">
									<p>Cliquez sur ce bouton pour synchroniser le sch&eacute;ma de
										sortie avec celui d&#8217;entr&eacute;e. La fonction <span class="bold"><strong>Sync</strong></span> ne s&#8217;affiche que si une
										connexion de type Row est li&eacute;e au composant de
										sortie.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Append the source xml file</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette option pour ajouter de nouvelles lignes &agrave; la
										fin de votre fichier source XML. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Generate compact file</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour g&eacute;n&eacute;rer un fichier ne comprenant
										aucun espace vide ni aucun s&eacute;parateur de ligne. L&#8217;ensemble
										des &eacute;l&eacute;ments se pr&eacute;sente alors sur une ligne unique, ce qui
										permet de r&eacute;duire le poids du fichier. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Include DTD or XSL</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour ajouter la d&eacute;claration DOCTYPE
										indiquant le nom de l&#8217;&eacute;l&eacute;ment racine et le chemin d&#8217;acc&egrave;s et
										le nom du fichier DTD ou pour ajouter l&#8217;instruction de
										traitement indiquant le type de feuille de style (telle que
										les XSL) utilis&eacute;e et son chemin d&#8217;acc&egrave;s et nom.</p>
									<p><span class="bold"><strong>DTD</strong></span>&nbsp;: saisissez le nom de
										l&#8217;&eacute;l&eacute;ment racine dans le champ <span class="bold"><strong>Root
											Element</strong></span> et saisissez le chemin d&#8217;acc&egrave;s et le
										nom du fichier DTD dans le champ <span class="bold"><strong>File
											Name</strong></span>.</p>
									<p><span class="bold"><strong>XSL</strong></span>&nbsp;: saisissez le type
										de feuille de style dans le champ <span class="bold"><strong>Type</strong></span> et saisissez le chemin d&#8217;acc&egrave;s et le
										nom du fichier dans le champ <span class="bold"><strong>File
											Name</strong></span>.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Advanced settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Split output in several files</em></span>
									</p>
								</td><td valign="top">
									<p>Si le fichier XML de sortie est lourd, vous pouvez le
										scinder en plusieurs fichiers en d&eacute;finissant un certain
										nombre de lignes par fichier.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Create directory only if not exists</em></span>
									</p>
								</td><td valign="top">
									<p>Cette case est coch&eacute;e par d&eacute;faut. Cette option permet de
										cr&eacute;er le dossier contenant le fichier XML de sortie s&#8217;il
										n&#8217;existe pas d&eacute;j&agrave;.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Create empty element if needed</em></span>
									</p>
								</td><td valign="top">
									<p>Cette case est coch&eacute;e par d&eacute;faut. Si le contenu de la
										colonne <span class="bold"><strong>Associated Column</strong></span>
										est nul ou si aucune colonne n&#8217;est associ&eacute;e au n&#339;ud XML,
										cette option cr&eacute;era une balise ouvrante et une balise
										fermante aux endroits pr&eacute;vus.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Create attribute even if its value is
											NULL</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour g&eacute;n&eacute;rer l&#8217;attribut de la balise XML
										pour la colonne d&#8217;entr&eacute;e associ&eacute;e dont la valeur est
										null.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Create attribute even if it is unmapped</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour g&eacute;n&eacute;rer l&#8217;attribut de la balise
										pour la colonne d&#8217;entr&eacute;e associ&eacute;e non mapp&eacute;e.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Create associated XSD file</em></span>
									</p>
								</td><td valign="top">
									<p>Si l&#8217;un des &eacute;l&eacute;ments XML est associ&eacute; &agrave; un espace de
										nommage, cette option cr&eacute;era le fichier XSD
										correspondant.</p>
									<p> </p>
									<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Pour utiliser cette option, vous devez s&eacute;lectionner le
											mode de g&eacute;n&eacute;ration <span class="bold"><strong>Dom4J</strong></span> dans la liste <span class="bold"><strong>Generation mode</strong></span>.</p></td></tr></table></div>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Advanced separator</em></span>
										<span class="emphasis"><em>(for number)</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette option pour modifier les s&eacute;parateurs utilis&eacute;s
										pour les nombres&nbsp;:</p>
									<p><span class="bold"><strong>Thousands separator</strong></span>&nbsp;:
										d&eacute;finissez le s&eacute;parateur utilis&eacute; pour les milliers.</p>
									<p><span class="bold"><strong>Decimal separator</strong></span>&nbsp;:
										d&eacute;finissez le s&eacute;parateur utilis&eacute; pour les d&eacute;cimaux. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Generation mode</em></span>
									</p>
								</td><td valign="top">
									<p>S&eacute;lectionnez le mode de g&eacute;n&eacute;ration le plus rapide mais
										consommant de la m&eacute;moire (<span class="bold"><strong>Fast but
											memory-consuming - Dom4J</strong></span>) ou le plus lent ne
										consommant pas de m&eacute;moire (<span class="bold"><strong>Slow with
											no memory consumed</strong></span>) en fonction de votre
										m&eacute;moire disponible.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Encoding</em></span>
									</p>
								</td><td valign="top">
									<p>S&eacute;lectionnez l&#8217;encodage &agrave; partir de la liste ou
										s&eacute;lectionnez <span class="bold"><strong>Custom</strong></span> et
										d&eacute;finissez-le manuellement. Ce champ est obligatoire pour la
										manipulation des donn&eacute;es de base de donn&eacute;es.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Don&#8217;t generate empty file</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour annuler la g&eacute;n&eacute;ration du fichier si
										celui-ci est vide. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>tStatCatcher Statistics</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour collecter les donn&eacute;es de log du
										Job, aussi bien au niveau du Job qu&#8217;au niveau de chaque
										composant. </p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Utilisation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Utilisez ce composant pour cr&eacute;er un fichier XML &agrave; partir
										des donn&eacute;es transmises par d&#8217;autres composants via une
										connexion de type Row.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Limitation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>n/a</p>
								</td></tr></tbody></table></div><div class="section" title="D&eacute;finir un arbre XML"><div class="titlepage"><div><div><h4 class="title"><a name="Raa35713"></a>D&eacute;finir un arbre XML</h4></div></div></div><p>Double-cliquez sur le composant <span class="bold"><strong>tAdvancedFileOutputXML</strong></span> pour ouvrir l&#8217;interface d&eacute;di&eacute;e ou
						cliquez sur le bouton <span class="bold"><strong>[...]</strong></span> du champ
							<span class="bold"><strong>Configure Xml Tree</strong></span> de l&#8217;onglet
							<span class="bold"><strong>Basic settings </strong></span>dans la vue <span class="bold"><strong>Component</strong></span>.</p><div class="mediaobject"><img src="../images/XMLtree_adv_mapping1.png"></div><p>Le champ <span class="bold"><strong>Schema List</strong></span> de la zone <span class="bold"><strong>Linker Source</strong></span>, &agrave; gauche de l&#8217;interface, contient
						toutes les colonnes du flux d&#8217;entr&eacute;e (&agrave; condition que le flux d&#8217;entr&eacute;e soit
						connect&eacute; au composant <span class="bold"><strong>tAdvancedFileOutputXML</strong></span>).</p><p>A droite de l&#8217;interface, dans la zone <span class="bold"><strong>Linker
							Target</strong></span>, d&eacute;finissez la structure XML que vous souhaitez
						obtenir en sortie.</p><p>Vous pouvez la cr&eacute;er manuellement ou tout simplement importer la structure
						XML. Puis importez les colonnes du sch&eacute;ma d&#8217;entr&eacute;e dans l&#8217;&eacute;l&eacute;ment de l&#8217;arbre
						XML correspondant.</p><div class="section" title="Importer un arbre XML"><div class="titlepage"><div><div><h5 class="title"><a name="d0e271474"></a>Importer un arbre XML</h5></div></div></div><p>Le meilleur moyen de renseigner l&#8217;arbre XML est d&#8217;importer un fichier
							XML bien form&eacute;.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Renommez la balise racine qui s&#8217;affiche par d&eacute;faut dans le
									panneau <span class="bold"><strong>XML tree,</strong></span> en cliquant
									sur celle-ci.</p></li><li class="listitem"><p>Dans la colonne <span class="bold"><strong>XML Tree</strong></span>,
									cliquez-droit sur le champ <span class="bold"><strong>root
										tag</strong></span> pour afficher le menu contextuel.</p></li><li class="listitem"><p>Dans le menu, s&eacute;lectionnez <span class="bold"><strong>Import XML
										tree</strong></span>.</p></li><li class="listitem"><p>S&eacute;lectionnez le fichier &agrave; importer et cliquez sur <span class="bold"><strong>OK</strong></span>.</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Vous pouvez importer la structure XML d&#8217;un fichier au format XML,
								XSD et DTD.</p></td></tr></table></div><div class="mediaobject"><img src="../images/XMLtree_adv_mapping2.png"></div><p>La colonne <span class="bold"><strong>XML Tree</strong></span> est donc
							automatiquement renseign&eacute;e avec les &eacute;l&eacute;ments. Vous pouvez supprimer et
							ajouter des &eacute;l&eacute;ments ou des sous &eacute;l&eacute;ments &agrave; l&#8217;arbre&nbsp;:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnez l&#8217;&eacute;l&eacute;ment ad&eacute;quat dans l&#8217;arbre.</p></li><li class="listitem"><p>Cliquez-droit pour faire appara&icirc;tre le menu contextuel.</p></li><li class="listitem"><p>S&eacute;lectionnez <span class="bold"><strong>Delete</strong></span> pour
									supprimer la s&eacute;lection de l&#8217;arbre ou s&eacute;lectionnez l&#8217;option
									ad&eacute;quate parmi les suivantes&nbsp;: <span class="bold"><strong>Add
										sub-element</strong></span>, <span class="bold"><strong>Add
										attribute</strong></span>, <span class="bold"><strong>Add
										namespace</strong></span> pour enrichir l&#8217;arbre.</p></li></ul></div></div><div class="section" title="Cr&eacute;er manuellement l&#8217;arbre XML"><div class="titlepage"><div><div><h5 class="title"><a name="d0e271540"></a>Cr&eacute;er manuellement l&#8217;arbre XML</h5></div></div></div><p>Si vous ne poss&eacute;dez pas de structure XML d&eacute;j&agrave; d&eacute;finie, vous pouvez la
							cr&eacute;er manuellement.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Dans la colonne <span class="bold"><strong>XML Tree</strong></span>,
									cliquez une fois sur le champ <span class="bold"><strong>root
										tag</strong></span> pour le renommer.</p></li><li class="listitem"><p>Cliquez droit sur ce champ pour afficher le menu
									contextuel.</p></li><li class="listitem"><p>Dans le menu, s&eacute;lectionnez <span class="bold"><strong>Add
										sub-element</strong></span> pour cr&eacute;er le premier &eacute;l&eacute;ment de la
									structure.</p></li></ul></div><p>Vous pouvez aussi ajouter un attribut ou un &eacute;l&eacute;ment enfant &agrave; n&#8217;importe
							quel &eacute;l&eacute;ment de l&#8217;arbre ou supprimer n&#8217;importe quel &eacute;l&eacute;ment de
							l&#8217;arbre.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnez l&#8217;&eacute;l&eacute;ment ad&eacute;quat dans l&#8217;arbre que vous venez de
									cr&eacute;er.</p></li><li class="listitem"><p>Cliquez-droit &agrave; gauche du nom de l&#8217;&eacute;l&eacute;ment pour afficher le
									menu contextuel.</p></li><li class="listitem"><p>Dans le menu, s&eacute;lectionnez l&#8217;option ad&eacute;quate parmi les
									suivantes&nbsp;: <span class="bold"><strong>Add sub-element</strong></span>,
										<span class="bold"><strong>Add attribute</strong></span>, <span class="bold"><strong>Add namespace</strong></span> ou <span class="bold"><strong>Delete</strong></span>.</p></li></ul></div></div></div><div class="section" title="Mapping de donn&eacute;es XML"><div class="titlepage"><div><div><h4 class="title"><a name="Raa33522"></a>Mapping de donn&eacute;es XML</h4></div></div></div><p>Une fois votre arbre XML cr&eacute;&eacute;, vous pouvez alimenter chaque &eacute;l&eacute;ment ou
						sous-&eacute;l&eacute;ment XML avec les colonnes du flux d&#8217;entr&eacute;e dans la colonne
							<span class="bold"><strong>Related Column</strong></span>&nbsp;:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur une des entr&eacute;es de la colonne <span class="bold"><strong>Schema List</strong></span>.</p></li><li class="listitem"><p>Glissez-la dans le sous-&eacute;l&eacute;ment correspondant &agrave; droite.</p></li><li class="listitem"><p>Rel&acirc;chez-la pour que le mapping soit effectif.</p></li></ul></div><div class="mediaobject"><img src="../images/XMLtree_adv_mapping3.png"></div><p>Une fl&egrave;che bleue appara&icirc;t pour illustrer ce mapping. S&#8217;il est disponible,
						utilisez le bouton <span class="bold"><strong>Auto-Map</strong></span> situ&eacute; en bas &agrave;
						gauche de l&#8217;interface, il permet d&#8217;effectuer cette op&eacute;ration
						automatiquement.</p><p>Vous pouvez d&eacute;connecter n&#8217;importe quel mapping de n&#8217;importe quel &eacute;l&eacute;ment
						de l&#8217;arbre XML&nbsp;:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnez l&#8217;&eacute;l&eacute;ment de l&#8217;arbre XML que vous souhaitez
								d&eacute;connecter de sa source respective.</p></li><li class="listitem"><p>Cliquez-droit &agrave; gauche de son nom pour afficher le menu
								contextuel.</p></li><li class="listitem"><p>S&eacute;lectionnez <span class="bold"><strong>Disconnect
								linker</strong></span>.</p></li></ul></div><p>La fl&egrave;che bleue dispara&icirc;t.</p></div><div class="section" title="D&eacute;finir le statut du n&#339;ud"><div class="titlepage"><div><div><h4 class="title"><a name="d0e271634"></a>D&eacute;finir le statut du n&#339;ud</h4></div></div></div><p>D&eacute;finir l&#8217;arbre XML et le transfert de donn&eacute;es ne suffit pas. Vous devez
						aussi d&eacute;finir l&#8217;&eacute;lement sur lequel la boucle est effectu&eacute;e et si n&eacute;cessaire
						l&#8217;&eacute;l&eacute;ment &agrave; partir duquel le regroupement est effectu&eacute;.</p><div class="section" title="El&eacute;ment Boucle"><div class="titlepage"><div><div><h5 class="title"><a name="d0e271639"></a>El&eacute;ment Boucle</h5></div></div></div><p>L&#8217;&eacute;l&eacute;ment Boucle permet de d&eacute;finir l&#8217;&eacute;l&eacute;ment objet d&#8217;une it&eacute;ration.
							L&#8217;&eacute;l&eacute;ment Boucle est g&eacute;n&eacute;ralement un g&eacute;n&eacute;rateur de lignes.</p><p>Pour d&eacute;finir un &eacute;l&eacute;ment comme un &eacute;l&eacute;ment Boucle&nbsp;:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnez l&#8217;&eacute;l&eacute;ment ad&eacute;quat dans l&#8217;arbre XML.</p></li><li class="listitem"><p>Cliquez-droit &agrave; gauche du nom de l&#8217;&eacute;l&eacute;ment pour afficher le
									menu contextuel.</p></li><li class="listitem"><p>S&eacute;lectionnez l&#8217;option <span class="bold"><strong>Set as Loop
										Element</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/XMLtree_adv_mapping4.png"></div><p>La colonne <span class="bold"><strong>Node Status</strong></span> affiche le
							nouveau statut s&eacute;lectionn&eacute;.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Il ne peut y avoir qu&#8217;un seul &eacute;l&eacute;ment Boucle &agrave; la fois.</p></td></tr></table></div></div><div class="section" title="El&eacute;ment Group"><div class="titlepage"><div><div><h5 class="title"><a name="d0e271670"></a>El&eacute;ment Group</h5></div></div></div><p>L&#8217;&eacute;l&eacute;ment Group est optionnel, il repr&eacute;sente un &eacute;l&eacute;ment constant sur
							lequel est effectu&eacute;e une fonction Groupby. L&#8217;&eacute;l&eacute;ment Group ne peut &ecirc;tre
							d&eacute;fini que si un &eacute;l&eacute;ment Boucle a &eacute;t&eacute; pr&eacute;alablement d&eacute;fini.</p><p>Lorsque vous utilisez un &eacute;l&eacute;ment Group, les lignes doivent &ecirc;tre tri&eacute;es
							pour pouvoir &ecirc;tre regroup&eacute;es par le n&#339;ud s&eacute;lectionn&eacute;.</p><p>Pour d&eacute;finir un &eacute;l&eacute;ment comme &eacute;l&eacute;ment Group&nbsp;:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnez l&#8217;&eacute;l&eacute;ment ad&eacute;quat dans l&#8217;arbre XML.</p></li><li class="listitem"><p>Cliquez-droit &agrave; gauche du nom de l&#8217;&eacute;l&eacute;ment pour afficher le
									menu contextuel.</p></li><li class="listitem"><p>S&eacute;lectionnez l&#8217;option <span class="bold"><strong>Set as Group
										Element</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/XMLtree_adv_mapping5.png"></div><p>La colonne <span class="bold"><strong>Node Status</strong></span> affiche le
							nouveau statut s&eacute;lectionn&eacute; et tout autre statut de regroupement est
							automatiquement d&eacute;fini, si n&eacute;cessaire.</p><p>Une fois le mapping termin&eacute;, cliquez sur <span class="bold"><strong>OK</strong></span> pour valider les param&egrave;tres et continuez la
							configuration de votre Job.</p></div></div></div><div class="section" title="Sc&eacute;nario&nbsp;: Cr&eacute;er un fichier XML &agrave; l&#8217;aide d&#8217;une boucle"><div class="titlepage"><div><div><h3 class="title"><a name="d0e271705"></a>Sc&eacute;nario&nbsp;: Cr&eacute;er un fichier XML &agrave; l&#8217;aide d&#8217;une boucle</h3></div></div></div><p>Le sc&eacute;nario suivant d&eacute;crit la cr&eacute;ation d&#8217;un fichier XML &agrave; partir d&#8217;un fichier
					plat tri&eacute; contenant une vid&eacute;oth&egrave;que.</p><div class="mediaobject"><img src="../images/Use_Case_tAdvancedFileOutputXML1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Dans la palette de composants, cliquez sur les composants <span class="bold"><strong>tFileInputDelimited</strong></span> et <span class="bold"><strong>tAdvancedFileOutputXML</strong></span> et d&eacute;posez-les dans l&#8217;espace de
							mod&eacute;lisation.</p></li><li class="listitem"><p>Sinon, si vous avez d&eacute;j&agrave; cr&eacute;&eacute; une m&eacute;tadonn&eacute;e contenant la description
							du fichier d&#8217;entr&eacute;e dans le n&#339;ud <span class="bold"><strong>Metadata</strong></span> du <span class="bold"><strong>Repository</strong></span>,
							alors vous pouvez cliquer-d&eacute;poser directement cette m&eacute;tadonn&eacute;e dans
							l&#8217;espace de mod&eacute;lisation pour param&eacute;trer automatiquement le flux
							d&#8217;entr&eacute;e.</p></li><li class="listitem"><p>Cliquez-droit sur le composant d&#8217;entr&eacute;e et reliez-le au composant
								<span class="bold"><strong>tAdvancedFileOutputXML</strong></span> &agrave; l&#8217;aide
							d&#8217;une connexion de type <span class="bold"><strong>Row
							Main</strong></span>.</p></li><li class="listitem"><p>S&eacute;lectionnez le composant <span class="bold"><strong>tFileInputDelimited</strong></span> et param&eacute;trez ses propri&eacute;t&eacute;s dans la
							vue <span class="bold"><strong>Component</strong></span> en bas de la fen&ecirc;tre du
							Studio.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAdvancedFileOutputXML2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Dans la liste d&eacute;roulante <span class="bold"><strong>Property
								Type</strong></span>, s&eacute;lectionnez l&#8217;option <span class="bold"><strong>Repository</strong></span> si la description de votre fichier est
							stock&eacute;e dans une m&eacute;tadonn&eacute;e du Repository. Si vous cliquez-d&eacute;posez le
							composant directement &agrave; partir de la m&eacute;tadonn&eacute;e, vous n&#8217;aurez pas besoin
							de modifier ses propri&eacute;t&eacute;s.</p></li><li class="listitem"><p>Sinon, s&eacute;lectionnez l&#8217;option <span class="bold"><strong>Built-In</strong></span>
							et renseignez manuellement les champs de l&#8217;onglet <span class="bold"><strong>Basic settings</strong></span>.</p></li><li class="listitem"><p>Le fichier d&#8217;entr&eacute;e contient les colonnes suivantes, s&eacute;par&eacute;es par des
							points-virgules&nbsp;: <span class="emphasis"><em>id</em></span>, <span class="emphasis"><em>name</em></span>,
								<span class="emphasis"><em>category</em></span>, <span class="emphasis"><em>year</em></span>,
								<span class="emphasis"><em>language</em></span>, <span class="emphasis"><em>director</em></span> et
								<span class="emphasis"><em>cast</em></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAdvancedFileOutputXML3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Dans cette exemple, le champ <span class="bold"><strong>Cast</strong></span>
							regroupe diff&eacute;rentes valeurs et <span class="bold"><strong>id</strong></span>
							s&#8217;incr&eacute;mente lorsque l&#8217;on change de film.</p></li><li class="listitem"><p>Si n&eacute;cessaire, d&eacute;finissez le sch&eacute;ma du <span class="bold"><strong>tFileDelimitedInput </strong></span>en fonction de la structure du
							fichier.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAdvancedFileOutputXML4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Une fois que vous avez v&eacute;rifi&eacute; que le sch&eacute;ma du fichier d&#8217;entr&eacute;e
							correspond &agrave; vos attentes, cliquez sur <span class="bold"><strong>OK</strong></span> pour valider.</p></li><li class="listitem"><p>Puis s&eacute;lectionnez le composant <span class="bold"><strong>tAdvancedFileOutputXML</strong></span> et cliquez sur la vue <span class="bold"><strong>Component</strong></span> pour param&eacute;trer ses propri&eacute;t&eacute;s,
							ainsi que le mapping dans l&#8217;onglet <span class="bold"><strong>Basic
								settings</strong></span>. Notez que vous pouvez directement
							double-cliquer sur le composant pour ouvrir l&#8217;interface de
							mapping.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAdvancedFileOutputXML5.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Dans le champ <span class="bold"><strong>File Name</strong></span>, s&eacute;lectionnez
							le fichier qui sera &eacute;crit &agrave; la fin du Job, s&#8217;il existe d&eacute;j&agrave; ou saisissez
							le chemin d&#8217;acc&egrave;s et le nom du fichier qui seront cr&eacute;&eacute;s automatiquement
							pour la sortie.</p></li><li class="listitem"><p>Par d&eacute;faut, le sch&eacute;ma (description du fichier) est automatiquement
							propag&eacute; &agrave; partir du flux d&#8217;entr&eacute;e. Mais vous pouvez le modifier si
							n&eacute;cessaire.</p></li><li class="listitem"><p>Puis cliquez sur le bouton <span class="bold"><strong>[...]</strong></span> ou
							double-cliquez sur le composant <span class="bold"><strong>tAdvancedFileOutputXML</strong></span> dans l&#8217;espace de mod&eacute;lisation
							pour ouvrir l&#8217;&eacute;diteur de mapping.</p></li><li class="listitem"><p>Les colonnes du sch&eacute;ma du fichier d&#8217;entr&eacute;e sont list&eacute;es &agrave; gauche de
							l&#8217;interface.</p></li><li class="listitem"><p>A droite de l&#8217;interface, configurez l&#8217;arbre XML afin qu&#8217;il refl&egrave;te la
							structure du fichier de sortie.</p></li><li class="listitem"><p>Vous pouvez soit cr&eacute;er la structure n&#339;ud par n&#339;ud. Pour plus
							d&#8217;informations sur la cr&eacute;ation manuelle de l&#8217;arbre XML, consultez <a class="xref" href="tAdvancedFileOutputXML.html#Raa35713" title="D&eacute;finir un arbre XML">la section intitul&eacute;e &laquo;&nbsp;D&eacute;finir un arbre XML&nbsp;&raquo;</a>
						</p></li><li class="listitem"><p>Dans cet exemple, un mod&egrave;le XML est utilis&eacute; pour renseigner
							automatiquement l&#8217;arbre XML.</p></li><li class="listitem"><p>Cliquez-droit sur le champ <span class="bold"><strong>root tag</strong></span>
							qui appara&icirc;t par d&eacute;faut et s&eacute;lectionnez l&#8217;option <span class="bold"><strong>Import XML tree</strong></span> &agrave; la fin des options du menu
							contextuel.</p></li><li class="listitem"><p>Dans la fen&ecirc;tre <span class="bold"><strong>Ouvrir</strong></span>, s&eacute;lectionnez
							le fichier XML &agrave; importer et cliquez sur <span class="bold"><strong>OK</strong></span> pour valider l&#8217;import.</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Vous pouvez importer la structure XML d&#8217;un fichier au format XML, XSD et
						DTD.</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Puis cliquez-d&eacute;posez chaque champ de la colonne <span class="bold"><strong>Schema List</strong></span> vers son &eacute;l&eacute;ment correspondant dans l&#8217;arbre
							XML de la colonne <span class="bold"><strong>XML tree</strong></span> tel que
							d&eacute;crit dans <a class="xref" href="tAdvancedFileOutputXML.html#Raa33522" title="Mapping de donn&eacute;es XML">la section intitul&eacute;e &laquo;&nbsp;Mapping de donn&eacute;es XML&nbsp;&raquo;</a>.</p></li><li class="listitem"><p>Le mapping appara&icirc;t sous la forme d&#8217;une fl&egrave;che bleue entre la zone de
							gauche et celle de droite.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tAdvancedFileOutputXML6.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Enfin, dans la colonne <span class="bold"><strong>Node Status</strong></span>,
							d&eacute;finissez le statut du n&#339;ud sur lequel la boucle est effectu&eacute;e. Dans
							cet exemple, l&#8217;&eacute;l&eacute;ment <span class="emphasis"><em>Cast</em></span> correspondant &agrave;
							l&#8217;&eacute;l&eacute;ment Boucle puisque les donn&eacute;es de ce champ dans le fichier
							d&#8217;entr&eacute;e ne sont jamais les m&ecirc;mes.</p></li><li class="listitem"><p>Cliquez-droit sur l&#8217;&eacute;l&eacute;ment <span class="bold"><strong>Cast</strong></span> de
							l&#8217;arbre XML et s&eacute;lectionnez l&#8217;option <span class="bold"><strong>Set as loop
								element</strong></span>.</p></li><li class="listitem"><p>Pour regrouper les donn&eacute;es par film, l&#8217;&eacute;l&eacute;ment <span class="bold"><strong>Movie</strong></span> doit aussi &ecirc;tre d&eacute;fini comme &eacute;l&eacute;ment Group.</p></li><li class="listitem"><p>Cliquez-droit sur le n&#339;ud parent <span class="bold"><strong>Movie</strong></span> de l&#8217;arbre XML et s&eacute;lectionnez l&#8217;option <span class="bold"><strong>Set as group element</strong></span>.</p></li><li class="listitem"><p>Le statut s&eacute;lectionn&eacute; para&icirc;t sur la ligne de l&#8217;&eacute;l&eacute;ment correspondant
							dans la colonne <span class="bold"><strong>Node Status</strong></span>.</p></li><li class="listitem"><p>Cliquez sur <span class="bold"><strong>OK</strong></span> pour valider la
							configuration.</p></li></ul></div><p>Puis appuyez sur <span class="bold"><strong>F6</strong></span> pour ex&eacute;cuter le
					Job.</p><div class="mediaobject"><img src="../images/Use_Case_tAdvancedFileOutputXML7.png"></div><p>Le fichier XML de sortie affiche la structure telle qu&#8217;elle a &eacute;t&eacute;
					d&eacute;finie.</p></div></div></body></html>