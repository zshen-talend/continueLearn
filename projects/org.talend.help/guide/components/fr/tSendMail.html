<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tSendMail</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch11.html" title="Chapitre&nbsp;11.&nbsp;Composants Internet"><link rel="prev" href="tSCPTruncate.html" title="tSCPTruncate"><link rel="next" href="tSetKeystore.html" title="tSetKeystore"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="FR" class="section" title="tSendMail"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tSendMail"></a>tSendMail</h2></div></div></div><div class="mediaobject"><img src="../images/tSendMail.png"></div><a name="Xaa1625985"></a><div class="section" title="Propri&eacute;t&eacute;s du tSendMail"><div class="titlepage"><div><div><h3 class="title"><a name="d0e228921"></a>Propri&eacute;t&eacute;s du tSendMail</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Famille de composant</strong></span>
									</p>
								</td><td valign="top">
									<p>Internet</p>
								</td><td valign="top"> </td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Fonction</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Le composant <span class="bold"><strong>tSendMail</strong></span>
										envoie des messages et toute autre pi&egrave;ce jointe aux
										destinataires sp&eacute;cifi&eacute;s.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Objectif</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Le <span class="bold"><strong>tSendMail</strong></span> permet de
										pr&eacute;venir des destinataires d&#8217;un &eacute;tat particulier d&#8217;un Job ou
										de possibles erreurs.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>To</em></span>
									</p>
								</td><td valign="top">
									<p>Adresse e-mail du destinataire principal.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>From</em></span>
									</p>
								</td><td valign="top">
									<p>Adresse e-mail du serveur d'envoi.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Show sender&#8217;s name?</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour d&eacute;finir le nom d&#8217;exp&eacute;diteur &agrave;
										afficher dans les messages. </p>
									<p><span class="bold"><strong>Sendername</strong></span>&nbsp;: renseignez
										le nom de l&#8217;exp&eacute;diteur. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Cc</em></span>
									</p>
								</td><td valign="top">
									<p>Adresse e-mail des destinataires en copie.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Bcc</em></span>
									</p>
								</td><td valign="top">
									<p>Adresse e-mail des destinataires en copie cach&eacute;e. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Subject</em></span>
									</p>
								</td><td valign="top">
									<p>Objet du mail.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Message</em></span>
									</p>
								</td><td valign="top">
									<p>Contenu du message. Appuyez sur<span class="bold"><strong>
											Ctrl+Espace</strong></span> pour afficher la liste des
										variables disponibles.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Die if the attachment file doesn&#8217;t
											exist</em></span>
									</p>
								</td><td valign="top">
									<p>D&eacute;cochez cette case pour que les messages soient envoy&eacute;s
										m&ecirc;me si aucune pi&egrave;ce jointe n&#8217;est attach&eacute;e. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Attachment / File and Content Transfer
											Encoding</em></span>
									</p>
								</td><td valign="top">
									<p>Cliquez sur le bouton <span class="bold"><strong>[+]</strong></span>
										pour ajouter autant de lignes que n&eacute;cessaire dans lesquelles
										vous pouvez ajouter des masques de fichier ou des chemins
										d'acc&egrave;s aux fichiers &agrave; envoyer dans l'e-mail, s'il y en
										a.&nbsp;Deux options sont disponibles pour l'encodage du contenu
										&agrave; transf&eacute;rer : <span class="bold"><strong>Default</strong></span> et
											<span class="bold"><strong>Base64</strong></span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Other Headers</em></span>
									</p>
								</td><td valign="top">
									<p>Cliquez sur le bouton <span class="bold"><strong>[+]</strong></span>
										pour ajouter des lignes de filtre&nbsp;: </p>
									<p><span class="bold"><strong>Key</strong></span>&nbsp;: saisissez la cl&eacute; de
										tout en-t&ecirc;te diff&eacute;rent de l&#8217;en-t&ecirc;te standard.</p>
									<p><span class="bold"><strong>Value</strong></span>&nbsp;: saisissez la
										valeur correspondante &agrave; la cl&eacute;. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>SMTP Host et Port</em></span>
									</p>
								</td><td valign="top">
									<p>Adresse IP du serveur SMTP utilis&eacute; pour l&#8217;envoi
										d&#8217;e-mails.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>SSL Support </em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour authentifier le serveur aupr&egrave;s du
										client via un protocole s&eacute;curis&eacute; SSL. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>STARTTLS Support</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour authentifier le serveur aupr&egrave;s du
										client via un protocole s&eacute;curis&eacute; STARTTLS. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Importance</em></span>
									</p>
								</td><td valign="top">
									<p>S&eacute;lectionnez dans la liste d&eacute;roulante le niveau de
										priorit&eacute; de votre message. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Need authentication?</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez la case d&#8217;authentification et renseignez le nom de
										l&#8217;utilisateur (username) et son mot de passe (password), si
										cela est n&eacute;cessaire pour acc&eacute;der au service.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Die on error</em></span>
									</p>
								</td><td valign="top">
									<p>Cette case est coch&eacute;e par d&eacute;faut et stoppe le Job en cas
										d&#8217;erreur. D&eacute;cochez cette case pour terminer le traitement
										avec les lignes sans erreurs, et les lignes contenant les
										erreurs seront ignor&eacute;es.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Advanced settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>MIME subtype from the &#8216;text&#8217; MIME type</em></span>
									</p>
								</td><td valign="top">
									<p>S&eacute;lectionnez dans la liste d&eacute;roulante la forme &agrave; attribuer
										au texte du message. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Encoding</em></span>
									</p>
								</td><td valign="top">
									<p>S&eacute;lectionnez l&#8217;encodage &agrave; partir de la liste ou
										s&eacute;lectionnez <span class="bold"><strong>Custom</strong></span> et
										d&eacute;finissez-le manuellement. Ce champ est obligatoire pour la
										manipulation des donn&eacute;es des bases de donn&eacute;es.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>tStatCatcher Statistics</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour collecter les donn&eacute;es de log au
										niveau du Job ainsi qu&#8217;au niveau de chaque composant.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Utilisation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Ce composant est g&eacute;n&eacute;ralement utilis&eacute; en tant que sous-Job
										mais peut aussi &ecirc;tre utilis&eacute; comme composant de sortie ou de
										fin de Job. Il peut &ecirc;tre connect&eacute; aux autres composants via
										des liens Row ou Iterate.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Limitation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>n/a</p>
								</td></tr></tbody></table></div></div><div class="section" title="Sc&eacute;nario&nbsp;: Envoyer un e-mail lors d&#8217;une erreur"><div class="titlepage"><div><div><h3 class="title"><a name="d0e229408"></a>Sc&eacute;nario&nbsp;: Envoyer un e-mail lors d&#8217;une erreur</h3></div></div></div><p>Ce sc&eacute;nario est un Job compos&eacute; de trois composants permettant d&#8217;envoyer un
					e-mail &agrave; des destinataires sp&eacute;cifiques lorsqu&#8217;une erreur se produit.</p><div class="mediaobject"><img src="../images/Use_Case_tSendMail.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>A partir de la <span class="bold"><strong>Palette</strong></span>,
							cliquez-d&eacute;posez les composants suivants dans l&#8217;espace de mod&eacute;lisation&nbsp;:
								<span class="bold"><strong>tFileInputDelimited</strong></span>, <span class="bold"><strong>tFileOutputXML</strong></span> et <span class="bold"><strong>tSendMail</strong></span>.</p></li><li class="listitem"><p>Cliquez-droit sur le composant <span class="bold"><strong>tFileInputDelimited</strong></span> et reliez-le au composant <span class="bold"><strong>tFileOutputXML</strong></span> &agrave; l&#8217;aide d&#8217;un lien de type
								<span class="bold"><strong>Row</strong></span><span class="emphasis"><em> &gt;
								</em></span><span class="bold"><strong>Main</strong></span>. </p></li><li class="listitem"><p>Cliquez-droit sur le composant <span class="bold"><strong>tFileInputDelimited</strong></span> et reliez-le au composant <span class="bold"><strong>tSendMail</strong></span> &agrave; l&#8217;aide d&#8217;un lien de type
								<span class="bold"><strong>Trigger</strong></span><span class="emphasis"><em> &gt;
								</em></span><span class="bold"><strong>OnSubjobError</strong></span>. </p></li><li class="listitem"><p>Double-cliquez sur le composant <span class="bold"><strong>tFileInputDelimited </strong></span>pour afficher l&#8217;onglet <span class="bold"><strong>Basic settings</strong></span> du composant et configurer ses
							param&egrave;tres de base. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSendMail3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>A partir de la liste <span class="bold"><strong>Property type</strong></span>,
							s&eacute;lectionnez&nbsp;: </p><p>-<span class="bold"><strong>Repository</strong></span> si vous avez d&eacute;j&agrave; stock&eacute;
							les m&eacute;tadonn&eacute;es de votre fichier d&#8217;entr&eacute;e dans le <span class="bold"><strong>Repository</strong></span>, les champs suivants sont alors renseign&eacute;s
							automatiquement avec les informations stock&eacute;es, ou </p><p>-<span class="bold"><strong>Built-in</strong></span> si aucune m&eacute;tadonn&eacute;e n&#8217;est
							stock&eacute;e pour votre fichier d&#8217;entr&eacute;e&nbsp;; vous devez alors renseigner
							manuellement les champs suivants. </p><p>Dans cet exemple, c&#8217;est le mode <span class="bold"><strong>Built-in</strong></span> qui est utilis&eacute;. </p></li><li class="listitem"><p>Dans le champ <span class="bold"><strong>File Name</strong></span>, renseignez
							le chemin d&#8217;acc&egrave;s ou cliquez sur le bouton <span class="bold"><strong>[...]</strong></span> pour parcourir vos dossiers jusqu&#8217;au fichier &agrave;
							traiter. Ce champ est obligatoire.</p><p>Dans cet exemple, le fichier &agrave; traiter est
								<span class="emphasis"><em>customer_mail.csv</em></span>. </p></li><li class="listitem"><p>D&eacute;finissez le s&eacute;parateur de lignes dans le champ <span class="bold"><strong>Row separator</strong></span> afin d&#8217;identifier la fin d&#8217;une ligne. Puis
							d&eacute;finissez le s&eacute;parateur de champs dans <span class="bold"><strong>Field
								separator</strong></span> pour d&eacute;limiter les champs composant une ligne. </p><p>Les s&eacute;parateurs utilis&eacute;s dans ce sc&eacute;nario sont des s&eacute;parateurs de
							champs et de lignes classiques de fichier CSV. </p></li><li class="listitem"><p>Dans ce sc&eacute;nario, l&#8217;en-t&ecirc;te (<span class="bold"><strong>Header</strong></span>),
							le pied de page (<span class="bold"><strong>Footer</strong></span>) et la limite
							de lignes lues (<span class="bold"><strong>Limit</strong></span>) n&#8217;ont pas besoin
							d&#8217;&ecirc;tre d&eacute;finis. </p></li><li class="listitem"><p>S&eacute;lectionnez l&#8217;option <span class="bold"><strong>Built-in</strong></span> &agrave;
							partir de la liste d&eacute;roulante <span class="bold"><strong>Schema</strong></span> et
							renseignez manuellement les informations concernant le fichier d&eacute;limit&eacute;
							dans les champs correspondants. </p></li><li class="listitem"><p>Cliquez sur le bouton<span class="bold"><strong> [...] </strong></span>&agrave; c&ocirc;t&eacute; du
							champ <span class="bold"><strong>Edit schema</strong></span> pour afficher la
							bo&icirc;te de dialogue permettant de d&eacute;finir la structure des donn&eacute;es. Dans
							ce sc&eacute;nario, le sch&eacute;ma comporte quatre colonnes&nbsp;:
								<span class="emphasis"><em>Id</em></span>, <span class="emphasis"><em>Name</em></span>,
								<span class="emphasis"><em>Address</em></span> et <span class="emphasis"><em>IdState</em></span>.
						</p></li><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>[+]</strong></span> pour
							ajouter autant de lignes que n&eacute;cessaire &agrave; la structure des donn&eacute;es. Dans
							cet exemple, il n&#8217;y a qu&#8217;une seule colonne dans le sch&eacute;ma&nbsp;:
								<span class="emphasis"><em>xmlStr</em></span>.</p></li><li class="listitem"><p>Cliquez sur <span class="bold"><strong>OK</strong></span> pour valider vos
							changements et fermer la bo&icirc;te de dialogue. </p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Si vous avez pr&eacute;alablement stock&eacute; votre sch&eacute;ma dans le r&eacute;pertoire
							<span class="bold"><strong>Metadata</strong></span> sous <span class="bold"><strong>File delimited</strong></span>, s&eacute;lectionnez l&#8217;option <span class="bold"><strong>Repository</strong></span> dans la liste d&eacute;roulante <span class="bold"><strong>Schema</strong></span> puis cliquez sur le bouton <span class="bold"><strong>[...]</strong></span> &agrave; c&ocirc;t&eacute; du champ pour afficher la bo&icirc;te de dialogue
							<span class="bold"><strong>[Repository Content]</strong></span> &agrave; partir de
						laquelle vous pouvez s&eacute;lectionner un sch&eacute;ma pertinent. Cliquez sur <span class="bold"><strong>Ok </strong></span>pour fermer la bo&icirc;te de dialogue et remplir
						les champs automatiquement avec les m&eacute;tadonn&eacute;es contenues dans le sch&eacute;ma. </p><p>Pour plus d&#8217;informations sur le stockage des sch&eacute;mas de m&eacute;tadonn&eacute;es dans
						le <span class="bold"><strong>Repository</strong></span>, consultez le <span class="bold"><strong>Guide Utilisateur</strong></span> de <span class="bluebold">Talend Open Studio</span>. </p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Assurez-vous que la case <span class="bold"><strong>Skip empty
								rows</strong></span> est coch&eacute;e afin d&#8217;ignorer les lignes vierges.</p></li><li class="listitem"><p>Double-cliquez sur le composant <span class="bold"><strong>tFileOutputXML
							</strong></span>pour afficher l&#8217;onglet <span class="bold"><strong>Basic
								settings</strong></span> du composant et configurer ses param&egrave;tres de
							base.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSendMail4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>[...]</strong></span> &agrave; c&ocirc;t&eacute; du
							champ <span class="bold"><strong>File Name</strong></span> pour s&eacute;lectionner le
							r&eacute;pertoire de destination du fichier et saisissez le nom du fichier.
							Dans ce sc&eacute;nario, appelez le fichier
								<span class="emphasis"><em>customer_data.xml</em></span>.</p></li><li class="listitem"><p>Dans le champ <span class="bold"><strong>Row tag</strong></span>, saisissez
							entre guillemets le nom que vous souhaitez donner &agrave; la balise contenant
							les donn&eacute;es.</p></li><li class="listitem"><p>Cliquez sur <span class="bold"><strong>Edit schema</strong></span> et
							assurez-vous que le sch&eacute;ma est r&eacute;cup&eacute;r&eacute; &agrave; partir du sch&eacute;ma d&#8217;entr&eacute;e. Si
							n&eacute;cessaire, cliquez sur <span class="bold"><strong>Sync columns</strong></span>
							pour r&eacute;cup&eacute;rer le sch&eacute;ma du composant pr&eacute;c&eacute;dent.</p></li><li class="listitem"><p>Double-cliquez sur le composant <span class="bold"><strong>tSendMail
							</strong></span>pour afficher l&#8217;onglet <span class="bold"><strong>Basic
								settings</strong></span> du composant et configurer ses param&egrave;tres de
							base.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSendMail5.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Saisissez les adresses e-mail des destinataires dans le champ
								<span class="bold"><strong>To</strong></span> et les champs <span class="bold"><strong>Cc</strong></span> et <span class="bold"><strong>Bcc</strong></span>
							selon vos pr&eacute;f&eacute;rences, ainsi que celle de l&#8217;exp&eacute;diteur dans le champ
								<span class="bold"><strong>From</strong></span>.</p></li><li class="listitem"><p>Cochez la case <span class="bold"><strong>Show sender&#8217;s name?</strong></span>
							puis renseignez le nom de l&#8217;exp&eacute;diteur dans le champ <span class="bold"><strong>Sendername</strong></span> pour que votre message ait une
							meilleure visibilit&eacute; aupr&egrave;s de vos destinataires. </p></li><li class="listitem"><p>Renseignez l&#8217;objet du message dans le champ <span class="bold"><strong>Subject</strong></span>. </p></li><li class="listitem"><p>Saisissez dans le champ <span class="bold"><strong>Message</strong></span> le
							message contenant le code d&#8217;erreur produit &agrave; l&#8217;aide de la variable
							globale correspondante. Acc&eacute;dez &agrave; la liste des variables en appuyant sur
								<span class="bold"><strong>Ctrl+Espace</strong></span>.</p></li><li class="listitem"><p>Ajoutez des pi&egrave;ces jointes et des informations sur les en-t&ecirc;tes, si
							n&eacute;cessaire, dans les champs respectifs <span class="bold"><strong>Attachments</strong></span> et <span class="bold"><strong>Other
								headers</strong></span>. </p></li><li class="listitem"><p>Saisissez les informations SMTP dans les champs <span class="bold"><strong>SMTP host</strong></span> et <span class="bold"><strong>SMTP
							port</strong></span>.</p></li><li class="listitem"><p>Enregistrez votre Job puis appuyez sur <span class="bold"><strong>F6</strong></span> pour l&#8217;ex&eacute;cuter. </p></li></ul></div><p>Dans ce sc&eacute;nario, le fichier contenant les donn&eacute;es &agrave; transf&eacute;rer vers une
					sortie XML ne peut &ecirc;tre trouv&eacute;. Le composant <span class="bold"><strong>tSendMail</strong></span> s&#8217;ex&eacute;cute lorsque cette erreur est rencontr&eacute;e et
					envoie un mail de notification au destinataire sp&eacute;cifi&eacute;.</p></div></div></body></html>