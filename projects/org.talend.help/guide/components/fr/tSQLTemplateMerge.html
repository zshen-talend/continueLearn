<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tSQLTemplateMerge</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="Raa48933.html" title="Chapitre&nbsp;7.&nbsp;Composants ELT"><link rel="prev" href="tSQLTemplateFilterRows.html" title="tSQLTemplateFilterRows"><link rel="next" href="tSQLTemplateRollback.html" title="tSQLTemplateRollback"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="FR" class="section" title="tSQLTemplateMerge"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tSQLTemplateMerge"></a>tSQLTemplateMerge</h2></div></div></div><div class="mediaobject"><img src="../images/tSQLTemplateMerge_icon32.png"></div><a name="Xaa3965418"></a><div class="section" title="Propri&eacute;t&eacute;s du tSQLTemplateMerge"><div class="titlepage"><div><div><h3 class="title"><a name="d0e185569"></a>Propri&eacute;t&eacute;s du tSQLTemplateMerge</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Famille de composant</strong></span>
									</p>
								</td><td valign="top">
									<p>ELT/SQLTemplate</p>
								</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Fonction</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Le composant <span class="bold"><strong>tSQLTemplateMerge</strong></span> cr&eacute;e une instruction SQL
										MERGE sur les donn&eacute;es dans une table de la base de
										donn&eacute;es.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Objectif</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Ce composant est utilis&eacute; pour effectuer des op&eacute;rations de
										MERGE sur les donn&eacute;es (insertion, mise &agrave; jour ou
										suppression) directement dans une table du SGBD. Pour cela,
										il cr&eacute;e et ex&eacute;cute une instruction MERGE. </p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Database Type</em></span>
									</p>
								</td><td valign="top">
									<p>S&eacute;lectionnez dans le menu d&eacute;roulant le type de base de
										donn&eacute;es sur lequel vous voulez travailler.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Component list</em></span>
									</p>
								</td><td valign="top">
									<p>S&eacute;lectionnez le composant ELT de connexion le plus
										pertinent dans la liste si vous pr&eacute;voyez d&#8217;ajouter plus
										d&#8217;une connexion &agrave; votre Job en cours. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Source table name</em></span>
									</p>
								</td><td valign="top">
									<p>Nom de la table contenant les donn&eacute;es sur lesquelles vous
										souhaitez effectuer les op&eacute;rations d&#8217;insertion ou de mise &agrave;
										jour dans la table cible.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Target table name</em></span>
									</p>
								</td><td valign="top">
									<p>Nom de la table dans laquelle vous souhaitez effectuer les
										op&eacute;rations d&#8217;insertion ou de mise &agrave; jour.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="emphasis"><em>Schema</em></span> et <span class="emphasis"><em>Edit
											schema</em></span></p>
								</td><td valign="top">
									<p>Un sch&eacute;ma est une description de lignes, i.e., il d&eacute;finit
										le nombre de champs qui sont trait&eacute;s et pass&eacute;s au composant
										suivant. Le sch&eacute;ma est soit local (built-in) soit distant
										dans le Repository.</p>
									<p>Cliquez sur <span class="bold"><strong>Edit Schema</strong></span>
										pour modifier le sch&eacute;ma. Notez que si vous modifiez le
										sch&eacute;ma, il devient automatiquement built-in.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Built-in&nbsp;</strong></span>: Le sch&eacute;ma sera
										cr&eacute;&eacute; et conserv&eacute; pour ce composant seulement. Voir
										&eacute;galement&nbsp;le <span class="bold"><strong>Guide
											utilisateur</strong></span> de <span class="bluebold">Talend Open Studio</span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Repository&nbsp;</strong></span>: Le sch&eacute;ma
										existe d&eacute;j&agrave; et est stock&eacute; dans le Repository. Ainsi, il peut
										&ecirc;tre r&eacute;utilis&eacute; dans divers projets et Jobs. Voir
										&eacute;galement&nbsp;le <span class="bold"><strong>Guide
											utilisateur</strong></span> de <span class="bluebold">Talend Open Studio</span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>Merge ON</p>
								</td><td valign="top">
									<p>Sp&eacute;cifiez les colonnes source et cible que vous souhaitez
										utiliser comme cl&eacute;s primaires. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Use UPDATE (WHEN MATCHED)</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour mettre &agrave; jour les enregistrements
										existants. Une fois cette case coch&eacute;e, la table <span class="bold"><strong>UPDATE Columns</strong></span> appara&icirc;t, vous
										permettant de d&eacute;finir les colonnes dans lesquelles les
										enregistrements seront mis &agrave; jour.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Specify additional output columns</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour mettre &agrave; jour les enregistrements
										dans des colonnes autres que celles list&eacute;es dans la table
											<span class="bold"><strong>UPDATE Columns</strong></span>. Une
										fois cette case coch&eacute;e, la table <span class="bold"><strong>Additional UPDATE Columns</strong></span> appara&icirc;t, vous
										permettant de d&eacute;finir des colonnes suppl&eacute;mentaires.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Specify UPDATE WHERE clause</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case et saisissez une clause de type WHERE
										dans le champ <span class="bold"><strong>WHERE clause</strong></span>
										afin de filtrer les donn&eacute;es lors de l&#8217;op&eacute;ration de mise &agrave;
										jour.</p>
									<p> </p>
									<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p> Il est probable que cette option ne fonctionne pas
											avec certaines versions des bases de donn&eacute;es, notamment
											Oracle&nbsp;9i.</p></td></tr></table></div>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Use INSERT (WHEN MATCHED)</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour ins&eacute;rer de nouveaux
										enregistrements. Une fois cette case coch&eacute;e, la table
											<span class="bold"><strong>INSERT Columns</strong></span>
										appara&icirc;t, vous permettant de d&eacute;finir des colonnes &agrave;
										impliquer dans l'op&eacute;ration d'insertion.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Specify additional output columns</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour ins&eacute;rer des enregistrements dans
										les colonnes des colonnes autres que celles list&eacute;es dans la
										table <span class="bold"><strong>INSERT Columns</strong></span>. Une
										fois cette case coch&eacute;e, la table <span class="bold"><strong>Additional INSERT Columns</strong></span> appara&icirc;t, vous
										permettant de d&eacute;finir des colonnes suppl&eacute;mentaires.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Specify INSERT WHERE clause</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case et saisissez une clause de type WHERE
										dans le champ <span class="bold"><strong>WHERE clause</strong></span>
										fin de filtrer les donn&eacute;es lors de l&#8217;op&eacute;ration
										d&#8217;insertion.</p>
									<p> </p>
									<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p> Il est probable que cette option ne fonctionne pas
											avec certaines versions des bases de donn&eacute;es, notamment
											Oracle&nbsp;9i.</p></td></tr></table></div>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Advanced settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>tStatCatcher Statistics</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour collecter les donn&eacute;es de log aussi
										bien au niveau du Job qu&#8217;au niveau du composant.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>SQL Template</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>SQL Template List</em></span>
									</p>
								</td><td valign="top">
									<p>Cliquez sur le bouton <span class="bold"><strong>Add</strong></span>
										pour ajouter un ou plusieurs mod&egrave;le SQL du syst&egrave;me &agrave; la
										liste <span class="bold"><strong>SQLTemplateList</strong></span>.
										Cliquez dans la cellule de la colonne <span class="bold"><strong>SQLTemplate List</strong></span> que vous venez d&#8217;ajouter et
										s&eacute;lectionnez le mod&egrave;le SQL du syst&egrave;me ad&eacute;quat dans la liste
										de mod&egrave;les fournis par <span class="bold"><strong>Talend</strong></span>. </p>
									<p>
										<span class="bold"><strong>Note&nbsp;:</strong></span> Vous pouvez cr&eacute;er
										vos propres mod&egrave;les SQL et les ajouter &agrave; la liste <span class="bold"><strong>SQLTemplate List</strong></span>.</p>
									<p> </p>
									<p> Pour cr&eacute;er un nouveau mod&egrave;le SQL&nbsp;:</p>
									<p>1- S&eacute;lectionnez un mod&egrave;le d&eacute;j&agrave; existant dans la liste
											<span class="bold"><strong>SQLTemplate list</strong></span> et
										cliquez dans son code dans le champ de code. Une bo&icirc;te de
										dialogue s&#8217;ouvrira vous demandant de cr&eacute;er un nouveau
										mod&egrave;le.</p>
									<p>2- Cliquez sur <span class="bold"><strong>Yes</strong></span> pour
										ouvrir la bo&icirc;te de dialogue <span class="bold"><strong>New
											SQLTemplate</strong></span>.</p>
									<p>3- Renseignez les informations de votre mod&egrave;le SQL et
										cliquez sur <span class="bold"><strong>Finish</strong></span> pour
										fermer la bo&icirc;te de dialogue. Un &eacute;diteur de mod&egrave;le SQL
										appara&icirc;t dans lequel vous pouvez saisir votre code.</p>
									<p>4- Cliquez sur le bouton <span class="bold"><strong>Add</strong></span> pour ajouter le nouveau mod&egrave;le dans la
										liste <span class="bold"><strong>SQLTemplate
										list</strong></span>.</p>
									<p>Pour plus d&#8217;informations, consultez le <span class="bold"><strong>Guide utilisateur </strong></span> de <span class="bluebold">Talend Open Studio</span>.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Utilisation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Ce composant est un composant interm&eacute;diaire. Vous pouvez
										l&#8217;utiliser avec d&#8217;autres composants de base de donn&eacute;es,
										notamment les composants de connexion et de commit.</p>
								</td></tr></tbody></table></div></div><div class="section" title="Sc&eacute;nario&nbsp;: Effectuer des op&eacute;rations de MERGE directement dans le SGBD"><div class="titlepage"><div><div><h3 class="title"><a name="d0e186073"></a>Sc&eacute;nario&nbsp;: Effectuer des op&eacute;rations de MERGE directement dans le SGBD</h3></div></div></div><p>Ce sc&eacute;nario d&eacute;crit un Job simple permettant d&#8217;ouvrir une connexion &agrave; une base
					de donn&eacute;es MySQL, d&#8217;effectuer des op&eacute;rations d&#8217;insertion ou de mise &agrave; jour sur
					les donn&eacute;es d&#8217;une table source vers une table cible en fonction de l&#8217;identifiant
					de l&#8217;utilisateur et d&#8217;afficher le contenu de la table cible avant et apr&egrave;s les
					op&eacute;rations de MERGE. Une clause de type WHERE est utilis&eacute;e pour filtrer les
					donn&eacute;es lors de ces op&eacute;rations.</p><div class="mediaobject"><img src="../images/Use_Case_tSQLTemplateMerge1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>A partir de la <span class="bold"><strong>Palette, </strong></span>d&eacute;posez les
							composants suivants dans l&#8217;espace de mod&eacute;lisation graphique&nbsp;: un
								<span class="bold"><strong>tMysqlConnection</strong></span>, un <span class="bold"><strong>tSQLTemplateMerge</strong></span>, deux <span class="bold"><strong>tMysqlInput</strong></span> et deux <span class="bold"><strong>tLogRow</strong></span>. </p></li><li class="listitem"><p>Connectez le composant <span class="bold"><strong>tMysqlConnection</strong></span> au premier <span class="bold"><strong>tMysqlInput</strong></span> &agrave; l&#8217;aide d&#8217;un lien <span class="bold"><strong>Trigger</strong></span> &gt; <span class="bold"><strong>OnSubjobOK</strong></span>.</p></li><li class="listitem"><p>Connectez le premier <span class="bold"><strong>tMysqlInput</strong></span> au
							premier <span class="bold"><strong>tLogRow</strong></span> &agrave; l&#8217;aide d&#8217;un lien
								<span class="bold"><strong>Row</strong></span> &gt; <span class="bold"><strong>Main</strong></span>. Cette ligne affichera le contenu initial de la
							table cible dans la console de la vue <span class="bold"><strong>Run</strong></span>.</p></li><li class="listitem"><p>Connectez le premier <span class="bold"><strong>tMysqlInput</strong></span> au
							composant <span class="bold"><strong>tSQLTemplateMerge</strong></span>, et le
								<span class="bold"><strong>tSQLTemplateMerge</strong></span> au second
							composant <span class="bold"><strong>tMysqlInput</strong></span> &agrave; l&#8217;aide de
							connexions <span class="bold"><strong>Trigger</strong></span>&nbsp;&gt;&nbsp;<span class="bold"><strong>OnSubjobOK</strong></span>.</p></li><li class="listitem"><p>Connectez le second <span class="bold"><strong>tMysqlInput</strong></span> au
							second <span class="bold"><strong>tLogRow</strong></span> &agrave; l&#8217;aide d&#8217;un lien
								<span class="bold"><strong>Row</strong></span> &gt; <span class="bold"><strong>Main</strong></span>. Cette ligne affichera le r&eacute;sultat des op&eacute;rations
							de MERGE dans la console de la vue <span class="bold"><strong>Run</strong></span>.</p></li><li class="listitem"><p>Double-cliquez sur le composant <span class="bold"><strong>tMysqlConnection</strong></span> pour afficher l&#8217;onglet <span class="bold"><strong>Basic settings</strong></span> de sa vue <span class="bold"><strong>Component</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSQLTemplateMerge2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Param&eacute;trez manuellement les d&eacute;tails de la connexion &agrave; la base de
							donn&eacute;es ou s&eacute;lectionnez <span class="bold"><strong>Repository</strong></span> dans
							la liste <span class="bold"><strong>Property Type</strong></span> et s&eacute;lectionnez
							votre connexion &agrave; une base de donn&eacute;es si celle-ci a d&eacute;j&agrave; &eacute;t&eacute; d&eacute;finie et
							stock&eacute;e dans la zone <span class="bold"><strong>Metadata</strong></span> de la vue
								<span class="bold"><strong>Repository</strong></span>.</p><p>Pour plus d&#8217;informations concernant les M&eacute;tadonn&eacute;es, consultez le
								<span class="bold"><strong>Guide utilisateur</strong></span> de <span class="bluebold">Talend Open Studio</span>. </p></li><li class="listitem"><p>Double-cliquez sur le premier composant <span class="bold"><strong>tMysqlInput</strong></span> pour afficher l&#8217;onglet <span class="bold"><strong>Basic settings</strong></span> de sa vue <span class="bold"><strong>Component</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSQLTemplateMerge3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cochez la case <span class="bold"><strong>Use an existing
								connection</strong></span>. Si vous souhaitez utiliser plus d&#8217;un
							composant de connexion dans votre Job, s&eacute;lectionnez le composant que
							vous souhaitez utiliser &agrave; partir de la liste <span class="bold"><strong>Component List</strong></span>.</p></li><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>[...]</strong></span> &agrave; c&ocirc;t&eacute; de
								<span class="bold"><strong>Edit schema</strong></span> et d&eacute;finissez la
							structure des donn&eacute;es de la table cible, ou s&eacute;lectionnez <span class="bold"><strong>Repository</strong></span> &agrave; partir de la liste <span class="bold"><strong>Schema</strong></span> puis s&eacute;lectionnez la table cible si le
							sch&eacute;ma a d&eacute;j&agrave; &eacute;t&eacute; d&eacute;fini et stock&eacute; dans la zone <span class="bold"><strong>Metadata</strong></span> de la vue <span class="bold"><strong>Repository</strong></span>.</p><p>Pour ce sc&eacute;nario, choisissez <span class="bold"><strong>Built-in</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSQLTemplateMerge4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>D&eacute;finissez les colonnes comme indiqu&eacute; ci-dessus, puis cliquez sur
								<span class="bold"><strong>OK</strong></span> pour propager la structure du
							sch&eacute;ma au composant de sortie et fermer la bo&icirc;te de dialogue.</p></li><li class="listitem"><p>Renseignez le champ <span class="bold"><strong>Table Name</strong></span> avec
							le nom de la table cible, soit&nbsp;<span class="emphasis"><em>customer_info_merge</em></span>
							pour ce sc&eacute;nario.</p></li><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>Guess Query</strong></span>, ou
							saisissez <code class="code">&#8220;SELECT * FROM customer_info_merge&#8221;</code> dans la zone
								<span class="bold"><strong>Query</strong></span> afin de r&eacute;cup&eacute;rer toutes les
							colonnes des tables.</p></li><li class="listitem"><p>D&eacute;finissez les propri&eacute;t&eacute;s du second composant <span class="bold"><strong>tMysqlInput</strong></span> en utilisant exactement les m&ecirc;mes param&egrave;tres
							que dans le premier composant <span class="bold"><strong>tMysqlInput</strong></span>.</p></li><li class="listitem"><p>Dans l&#8217;onglet <span class="bold"><strong>Basic settings</strong></span> de la
							vue <span class="bold"><strong>Component</strong></span> de chaque composant
								<span class="bold"><strong>tLogRow</strong></span>, s&eacute;lectionnez l&#8217;option
								<span class="bold"><strong>Table</strong></span> dans la zone <span class="bold"><strong>Mode</strong></span> afin d&#8217;afficher le r&eacute;sultat sous forme
							de tableau dans la console de la vue <span class="bold"><strong>Run</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSQLTemplateMerge5.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Double-cliquez sur le composant <span class="bold"><strong>tSQLTemplateMerge</strong></span> pour afficher l&#8217;onglet <span class="bold"><strong>Basic settings</strong></span> de sa vue <span class="bold"><strong>Component</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSQLTemplateMerge6.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Saisissez les noms de la table source et de la table cible dans les
							champs correspondants. </p><p>Pour ce sc&eacute;nario, la table
								source,&nbsp;<span class="emphasis"><em>new_customer_info</em></span>, contient huit
							enregistrements&nbsp;; la table
								cible,&nbsp;<span class="emphasis"><em>customer_info_merge</em></span>, contient cinq
							enregistrements et les deux tables ont la m&ecirc;me structure.</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Il est possible que la table source et la table cible aient des sch&eacute;mas
						diff&eacute;rents. Dans ce cas, cependant, assurez-vous que la colonne source et la
						colonne cible sp&eacute;cifi&eacute;es dans chaque ligne des tables <span class="bold"><strong>Merge ON</strong></span>, <span class="bold"><strong>UPDATE Columns</strong></span> et
							<span class="bold"><strong>INSERT Columns</strong></span> aient un type de donn&eacute;es
						identique et que la longueur de la colonne cible permette l&#8217;insertion de
						donn&eacute;es &agrave; partir de la colonne source correspondante.</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>D&eacute;finissez le sch&eacute;ma source manuellement, ou s&eacute;lectionnez <span class="bold"><strong>Repository</strong></span> &agrave; partir de la liste <span class="bold"><strong>Schema</strong></span> et s&eacute;lectionnez la table souhait&eacute;e si
							le sch&eacute;ma a d&eacute;j&agrave; &eacute;t&eacute; d&eacute;fini et stock&eacute; dans la zone <span class="bold"><strong>Metadata</strong></span> de la vue <span class="bold"><strong>Repository</strong></span>.</p><p>Pour ce sc&eacute;nario, nous utilisons des sch&eacute;mas en mode <span class="bold"><strong>Built-in</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSQLTemplateMerge7.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>D&eacute;finissez les colonnes comme indiqu&eacute; ci-dessus puis cliquez sur
								<span class="bold"><strong>OK</strong></span> pour fermer la bo&icirc;te de
							dialogue. Faites de m&ecirc;me pour le sch&eacute;ma cible.</p></li><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>[+]</strong></span> sous la
							table <span class="bold"><strong>Merge ON</strong></span> pour ajouter une ligne
							et s&eacute;lectionnez la colonne <span class="emphasis"><em>ID</em></span> comme cl&eacute;
							primaire.</p></li></ul></div><div class="mediaobject"><img src="../images/use_case-tsqltemplatemerge8half.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cochez la case <span class="bold"><strong>Use UPDATE (WHEN
								MATCHED)</strong></span> pour mettre &agrave; jour les donn&eacute;es existantes lors
							des op&eacute;rations de MERGE, d&eacute;finissez les colonnes &agrave; mettre &agrave; jour en
							cliquant sur le bouton <span class="bold"><strong>[+]</strong></span> et
							s&eacute;lectionnez les colonnes souhait&eacute;es. </p><p>Le but de ce sc&eacute;nario est de mettre &agrave; jour toutes les colonnes selon
							l&#8217;identifiant (ID) des utilisateurs. Pour cela, s&eacute;lectionnez toutes les
							colonnes sauf la colonne&nbsp;<span class="emphasis"><em>ID</em></span>.</p></li></ul></div><div class="warning" title="Avertissement" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Avertissement]" src="../images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						<span class="emphasis"><em>Les colonnes d&eacute;finies comme cl&eacute;s primaires NE PEUVENT et NE
							DOIVENT PAS &ecirc;tre mises &agrave; jour.</em></span>
					</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cochez la case <span class="bold"><strong>Specify UPDATE WHERE
								clause</strong></span> et saisissez <code class="code">customer_info_merge.ID &gt;=
								4</code> entre guillemets doubles, dans le champ <span class="bold"><strong>WHERE clause</strong></span> afin que seuls les
							enregistrements existants ayant un ID &eacute;gal ou sup&eacute;rieur &agrave;&nbsp;4 soient mis &agrave;
							jour.</p></li></ul></div><div class="mediaobject"><img src="../images/use_case-tsqltemplatemerge8half2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cochez la case <span class="bold"><strong>Use INSERT</strong></span> puis
							d&eacute;finissez dans la table <span class="bold"><strong>INSERT Columns</strong></span>
							les colonnes o&ugrave; les donn&eacute;es seront prises et ins&eacute;r&eacute;es.</p><p>Pour ce sc&eacute;nario, nous souhaitons ins&eacute;rer tous les enregistrements qui
							n&#8217;existent pas dans la table cible.</p></li></ul></div><div class="mediaobject"><img src="../images/use_case-tsqltemplatemerge8half3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnez l&#8217;onglet <span class="bold"><strong>SQL Template</strong></span>
							pour afficher et ajouter les mod&egrave;les SQL &agrave; utiliser.</p><p>Par d&eacute;faut, le composant <span class="bold"><strong>SQLTemplateMerge</strong></span> utilise deux mod&egrave;les SQL syst&egrave;me&nbsp;:
								<span class="bold"><strong>MergeUpdate</strong></span> et <span class="bold"><strong>MergeInsert</strong></span>. </p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Dans l&#8217;onglet <span class="bold"><strong>SQL Template</strong></span>, vous pouvez
						ajouter des mod&egrave;les SQL syst&egrave;me ou cr&eacute;er vos propres mod&egrave;les et les utiliser
						dans votre Job pour effectuer des op&eacute;rations cod&eacute;es. Pour plus
						d&#8217;informations, consultez&nbsp;<a class="xref" href="tSQLTemplateFilterColumns.html#Raa83276-tSQLTemplateFilterColumns-prop" title="Propri&eacute;t&eacute;s du tSQLTemplateFilterColumns">la section intitul&eacute;e &laquo;&nbsp;Propri&eacute;t&eacute;s du tSQLTemplateFilterColumns&nbsp;&raquo;</a>.</p></td></tr></table></div><div class="mediaobject"><img src="../images/Use_Case_tSQLTemplateMerge9.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>Add</strong></span> pour
							ajouter une ligne puis s&eacute;lectionnez <span class="bold"><strong>Commit</strong></span> dans la liste des mod&egrave;les afin de commiter les
							r&eacute;sultats des op&eacute;rations de MERGE dans votre base de donn&eacute;es.</p><p>Autrement, vous pouvez connecter le composant <span class="bold"><strong>tSQLTemplateMerge</strong></span> &agrave; un <span class="bold"><strong>tSQLTemplateCommit</strong></span> ou un <span class="bold"><strong>tMysqlCommit</strong></span> &agrave; l&#8217;aide d&#8217;un lien <span class="bold"><strong>Trigger</strong></span> &gt; <span class="bold"><strong>OnSubjobOK</strong></span>
							afin de commiter les r&eacute;sultats des op&eacute;rations dans votre base de
							donn&eacute;es.</p></li><li class="listitem"><p>Sauvegardez votre Job et appuyez sur <span class="bold"><strong>F6</strong></span> pour l&#8217;ex&eacute;cuter.</p><p>La console de la vue <span class="bold"><strong>Run</strong></span> affiche &agrave; la
							fois le contenu d&#8217;origine de la table cible ainsi que les r&eacute;sultats des
							op&eacute;rations de MERGE. Dans la table cible, les enregistrements No.&nbsp;4 et
							No.&nbsp;5 contiennent les informations mises &agrave; jour, tandis que les
							enregistrements No&nbsp;.6, No.&nbsp;7 et No.&nbsp;8 contiennent les informations
							ins&eacute;r&eacute;es dans la table. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tSQLTemplateMerge10.png"></div></div></div></body></html>