<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tMap</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch15.html" title="Chapitre&nbsp;15.&nbsp;Composants Processing"><link rel="prev" href="tJoin.html" title="tJoin"><link rel="next" href="tNormalize.html" title="tNormalize"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="FR" class="section" title="tMap"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tMap"></a>tMap</h2></div></div></div><div class="mediaobject"><img src="../images/tMap.png"></div><a name="Xaa4558340"></a><div class="section" title="Propri&eacute;t&eacute;s du tMap"><div class="titlepage"><div><div><h3 class="title"><a name="d0e252428"></a>Propri&eacute;t&eacute;s du tMap</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Famille de composant</strong></span>
									</p>
								</td><td valign="top">
									<p>Processing</p>
								</td><td valign="top"> </td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Fonction</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Le <span class="bold"><strong>tMap</strong></span> est un composant
										avanc&eacute; qui s&#8217;int&egrave;gre &agrave; <span class="bluebold">Talend Open Studio</span> comme
										un plug-in.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Objectif</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Le <span class="bold"><strong>tMap</strong></span> transforme et
										dirige les donn&eacute;es &agrave; partir d&#8217;une ou plusieurs source(s) et
										vers une ou plusieurs destination(s).</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Preview</em></span>
									</p>
								</td><td valign="top">
									<p>L&#8217;aper&ccedil;u est un instantan&eacute; des donn&eacute;es du Mapper. Il n&#8217;est
										visible que lorsque les propri&eacute;t&eacute;s du Mapper sont
										renseign&eacute;es. La synchronisation de l&#8217;aper&ccedil;u ne prend effet
										qu&#8217;apr&egrave;s la sauvegarde des modifications.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Mapping links display as</em></span>
									</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Auto</strong></span>&nbsp;: par d&eacute;faut, les
										liens sont en forme de courbes.</p>
									<p><span class="bold"><strong>Curves&nbsp;</strong></span>: les liens du
										mapping sont en forme de courbes.</p>
									<p><span class="bold"><strong>Lines&nbsp;</strong></span>: les liens du
										mapping sont en forme de lignes droites. Cette derni&egrave;re
										option am&eacute;liore l&eacute;g&egrave;rement les performances.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Map editor</em></span>
									</p>
								</td><td valign="top">
									<p>Le Mapper est l&#8217;&eacute;diteur du <span class="bold"><strong>tMap</strong></span>. Il vous permet de d&eacute;finir les
										propri&eacute;t&eacute;s d&#8217;aiguillage et de transformation des
										donn&eacute;es.</p>
									<p> </p>
									<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Si vous ne souhaitez pas g&eacute;rer les erreurs
											d&#8217;ex&eacute;cution, vous pouvez utiliser l&#8217;option<span class="bold"><strong> Die on error </strong></span>(coch&eacute;e par
											d&eacute;faut), en haut &agrave; droite de l&#8217;&eacute;diteur. Cette option
											arr&ecirc;te le Job en cas d&#8217;erreur.</p><p> </p></td></tr></table></div>


								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Utilisation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Plusieurs utilisations sont possibles, de la simple
										r&eacute;organisation des champs de donn&eacute;es aux transformations les
										plus complexes, telles que le multiplexage et le
										d&eacute;multiplexage de donn&eacute;es, la concat&eacute;nation, l&#8217;inversion, le
										filtrage, etc.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Limitation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>L&#8217;utilisation du composant <span class="bold"><strong>tMap</strong></span> requiert un niveau moyen de
										connaissances en Java afin d&#8217;exploiter au mieux ses
										fonctionnalit&eacute;s.</p>
									<p>Ce composant est utilis&eacute; comme une &eacute;tape interm&eacute;diaire,
										c&#8217;est pourquoi il ne peut pas &ecirc;tre utilis&eacute; comme composant
										de d&eacute;but ou de fin de Job.</p>
								</td></tr></tbody></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Pour plus d&#8217;informations, consultez&nbsp;le <span class="bold"><strong>Guide
							utilisateur</strong></span> de <span class="bluebold">Talend Open Studio</span>. </p></td></tr></table></div></div><div class="section" title="Sc&eacute;nario&nbsp;1&nbsp;: Mapping simple de donn&eacute;es avec filtre et jointure explicite"><div class="titlepage"><div><div><h3 class="title"><a name="processing-tmap-scenario-explicit_join"></a>Sc&eacute;nario&nbsp;1&nbsp;: Mapping simple de donn&eacute;es avec filtre et jointure
					explicite</h3></div></div></div><p>Le Job Java ci-dessous a pour objectif de lire des donn&eacute;es d&#8217;un fichier .csv
					stock&eacute; dans le <span class="bold"><strong>Repository</strong></span>, de rechercher des
					donn&eacute;es d&#8217;un fichier de r&eacute;f&eacute;rence, dont le sch&eacute;ma est &eacute;galement stock&eacute; dans le
						<span class="bold"><strong>Repository</strong></span> puis d&#8217;extraire des donn&eacute;es de
					ces deux fichiers en fonction de filtres et d&#8217;envoyer ces donn&eacute;es vers les
					fichiers de sortie et de rejet.</p><div class="mediaobject"><img src="../images/UseCase_tMap2-1-1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur <span class="bold"><strong>File</strong></span> dans la <span class="bold"><strong>Palette</strong></span> de composants, s&eacute;lectionnez <span class="bold"><strong>tFileInputDelimited</strong></span> et d&eacute;posez-le dans
							l&#8217;espace de mod&eacute;lisation. Changez le libell&eacute;
								en&nbsp;<span class="emphasis"><em>Cars</em></span> (v&eacute;hicules), soit en double-cliquant
							sur le libell&eacute; directement dans l&#8217;espace de mod&eacute;lisation graphique, soit
							via l&#8217;onglet <span class="bold"><strong>View</strong></span> de la vue <span class="bold"><strong>Component</strong></span>.</p></li><li class="listitem"><p>R&eacute;p&eacute;tez cette op&eacute;ration et renommez le second composant d&#8217;entr&eacute;e
								en&nbsp;<span class="emphasis"><em>Owners</em></span> (propri&eacute;taires).</p></li><li class="listitem"><p>Cliquez sur <span class="bold"><strong>Processing</strong></span> dans la
								<span class="bold"><strong>Palette</strong></span> de composants, s&eacute;lectionnez
							le <span class="bold"><strong>tMap</strong></span> et d&eacute;posez-le dans l&#8217;espace de
							mod&eacute;lisation.</p></li><li class="listitem"><p>Reliez les deux composants d&#8217;entr&eacute;e&nbsp;<span class="emphasis"><em>Owners</em></span> et
								<span class="emphasis"><em>Cars</em></span> au composant <span class="bold"><strong>tMap</strong></span> et renommez les libell&eacute;s des
								connexions,&nbsp;<span class="emphasis"><em>Cars_data</em></span>
								et&nbsp;<span class="emphasis"><em>Owners_data</em></span> respectivement.</p></li><li class="listitem"><p>Double-cliquez sur le composant <span class="bold"><strong>tFileInputDelimited</strong></span> nomm&eacute;&nbsp;<span class="emphasis"><em>Cars</em></span> pour
							param&eacute;trer ses propri&eacute;t&eacute;s de base (<span class="bold"><strong>Basic
								settings</strong></span>).</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tMap2-1-2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnez <span class="bold"><strong>Repository</strong></span> dans les
							champs <span class="bold"><strong>Property type</strong></span> et <span class="bold"><strong>Schema</strong></span>. Pour le sch&eacute;ma, s&eacute;lectionnez la
								m&eacute;tadonn&eacute;e&nbsp;<span class="emphasis"><em>cars</em></span> dans la bo&icirc;te de dialogue
								<span class="bold"><strong>[Repository Content]</strong></span>. Le reste des
							champs est automatiquement renseign&eacute; lorsque vous s&eacute;lectionnez la
							m&eacute;tadonn&eacute;e appropri&eacute;e dans la liste.</p></li><li class="listitem"><p>Double-cliquez sur le composant&nbsp;<span class="emphasis"><em>Owners</em></span> et
							d&eacute;finissez &agrave; nouveau les propri&eacute;t&eacute;s. S&eacute;lectionnez la m&eacute;tadonn&eacute;e
								appropri&eacute;e,&nbsp;<span class="emphasis"><em>owners</em></span> dans cet exemple.</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Dans ce sc&eacute;nario, les sch&eacute;mas d&#8217;entr&eacute;e sont stock&eacute;s dans le n&#339;ud <span class="bold"><strong>Metadata</strong></span> de la vue <span class="bold"><strong>Repository</strong></span> afin de les retrouver plus facilement. Pour plus
						d&#8217;informations concernant la cr&eacute;ation de m&eacute;tadonn&eacute;es dans le Repository,
						consultez le <span class="bold"><strong>Guide utilisateur</strong></span> de <span class="bluebold">Talend Open Studio</span>.</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Double-cliquez sur le composant <span class="bold"><strong>tMap</strong></span>
							pour ouvrir le Mapper. La zone Input (donn&eacute;es en entr&eacute;e) est d&eacute;j&agrave;
							renseign&eacute;e avec les sch&eacute;mas des composants d&#8217;entr&eacute;e et la premi&egrave;re table
							correspond au flux principal (<span class="bold"><strong>Main
							Row</strong></span>). Les libell&eacute;s de chacune des connexions d&#8217;entr&eacute;e
							apparaissent en en-t&ecirc;te des tables.</p></li><li class="listitem"><p>Cr&eacute;ez une jointure entre les deux tables d&#8217;entr&eacute;e en faisant
							simplement glisser le champ <span class="emphasis"><em>ID_Owner</em></span> de la table
							principale (<span class="emphasis"><em>Cars_data</em></span>) vers le champ &eacute;quivalent de
							la table de r&eacute;f&eacute;rence (<span class="emphasis"><em>Owners_data</em></span>).</p></li><li class="listitem"><p>D&eacute;finissez le lien en <span class="bold"><strong>Inner Join</strong></span> en
							cliquant sur le bouton <span class="bold"><strong>tMap settings</strong></span>,
							en cliquant dans le champ <span class="bold"><strong>Value</strong></span>
								pour&nbsp;<span class="emphasis"><em>Join Model</em></span>, en cliquant sur le bouton qui
							appara&icirc;t dans le champ et en s&eacute;lectionnant <span class="bold"><strong>Inner
								Join</strong></span> dans la liste <span class="bold"><strong>Options</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap2-1-3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur le signe <span class="bold"><strong>[+]</strong></span> dans la zone
								<span class="bold"><strong>Output</strong></span> (sortie) du Map Editor et
							ajoutez trois tables de sortie&nbsp;: <span class="emphasis"><em>Insured</em></span>,
								<span class="emphasis"><em>Reject_NoInsur</em></span>,
								<span class="emphasis"><em>Reject_OwnerID</em></span>.</p></li><li class="listitem"><p>Glissez et d&eacute;posez le contenu de la
								table&nbsp;<span class="emphasis"><em>Cars_data</em></span> vers la
								table&nbsp;<span class="emphasis"><em>Insured</em></span>. </p></li><li class="listitem"><p>Glissez les colonnes&nbsp;<span class="emphasis"><em>ID_Owner</em></span>,
								<span class="emphasis"><em>Registration</em></span>
								et&nbsp;<span class="emphasis"><em>ID_Reseller</em></span> de la
								table&nbsp;<span class="emphasis"><em>Cars_data</em></span>, ainsi que la
								colonne&nbsp;<span class="emphasis"><em>Name</em></span> de la
								table&nbsp;<span class="emphasis"><em>Owners_data</em></span> dans la
								table&nbsp;<span class="emphasis"><em>Reject_NoInsur</em></span>.</p></li><li class="listitem"><p>Glissez toutes les colonnes de la table&nbsp;<span class="emphasis"><em>Cars_data</em></span>
							dans la table&nbsp;<span class="emphasis"><em>Reject_OwnerID</em></span>.</p><p>Pour plus d&#8217;informations concernant le mapping de donn&eacute;es, consultez
							le <span class="bold"><strong>Guide utilisateur</strong></span> de <span class="bluebold">Talend Open Studio</span>. </p></li><li class="listitem"><p>Cliquez sur le bouton<span class="bold"><strong> [+]</strong></span> en haut de
							la table&nbsp;Insured afin d&#8217;ajouter une ligne de filtre.</p></li><li class="listitem"><p>Glissez la colonne&nbsp;<span class="emphasis"><em>ID_Insurance</em></span> de la
								table&nbsp;<span class="emphasis"><em>Owners_data</em></span> vers la zone de filtre et
							saisissez la formule suivante d&#8217;exclusion des valeurs non d&eacute;finies&nbsp;:
								<code class="code">Owners_data.ID_Insurance != null</code>.</p><p>Avec ce filtre, la table <span class="emphasis"><em>Insured</em></span> va rassemble
							tous les enregistrements qui poss&egrave;dent un <span class="emphasis"><em>ID
								Insurance</em></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tMap2-1-4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>tMap settings</strong></span>
							en haut de la table&nbsp;<span class="emphasis"><em>Reject_NoInsur</em></span> et s&eacute;lectionnez
								<span class="bold"><strong>true</strong></span> pour <span class="bold"><strong>Catch lookup inner join reject</strong></span> afin que de d&eacute;finir cette
							table comme le flux de rejet standard pour rassembler les
							enregistrements n&#8217;ayant pas d&#8217;<span class="emphasis"><em>ID Insurance</em></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/use_case-tmap2-1-5halftop.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>tMap Settings</strong></span>
							en haut de la table&nbsp;<span class="emphasis"><em>Reject_OwnerID</em></span> puis
							s&eacute;lectionnez <span class="bold"><strong>true</strong></span> pour <span class="bold"><strong>Catch lookup inner join reject</strong></span> afin que cette
							table rassemble les enregistrements du
								flux&nbsp;<span class="emphasis"><em>Cars_data</em></span> ayant des IDs manquants ou ne
							correspondant pas.</p></li></ul></div><div class="mediaobject"><img src="../images/use_case-tmap2-1-5halfbot.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur <span class="bold"><strong>OK</strong></span> pour valider et
							revenir &agrave; l&#8217;espace de mod&eacute;lisation.</p></li><li class="listitem"><p>Ajoutez trois composants <span class="bold"><strong>tFileOutputDelimited</strong></span> dans l&#8217;espace de mod&eacute;lisation
							graphique. Reliez le <span class="bold"><strong>tMap</strong></span> &agrave; l&#8217;aide &agrave;
							ces trois composants de sortie &agrave; l&#8217;aide des liens <span class="bold"><strong>Row</strong></span> correspondants.</p></li><li class="listitem"><p>Renommez les trois composants selon les liens.</p></li><li class="listitem"><p>Double-cliquez sur chacun des composants de sortie afin de d&eacute;finir
							leurs propri&eacute;t&eacute;s. Si vous souhaitez cr&eacute;er un nouveau fichier, parcourez
							votre syst&egrave;me jusqu&#8217;au dossier de destination et saisissez le nom du
							fichier avec son extension.</p></li><li class="listitem"><p>Cochez la case <span class="bold"><strong>Include header</strong></span> pour
							r&eacute;utiliser les libell&eacute;s des colonnes du sch&eacute;ma d&#8217;entr&eacute;e dans comme
							en-t&ecirc;te dans votre fichier de sortie.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tMap2-1-6.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Sauvegardez votre Job et appuyez sur <span class="bold"><strong>F6</strong></span> pour ex&eacute;cuter le Job ou passez &agrave; l&#8217;onglet <span class="bold"><strong>Run Job</strong></span> et cliquez sur le bouton <span class="bold"><strong>Run</strong></span>.</p><p>Les fichiers de sortie sont cr&eacute;&eacute;s et ils contiennent les donn&eacute;es
							d&eacute;finies.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap2-1-7.png"></div></div><div class="section" title="Sc&eacute;nario&nbsp;2&nbsp;: Mapping de donn&eacute;es avec rejet Inner join"><div class="titlepage"><div><div><h3 class="title"><a name="d0e252994"></a>Sc&eacute;nario&nbsp;2&nbsp;: Mapping de donn&eacute;es avec rejet Inner join</h3></div></div></div><p>Ce sc&eacute;nario, bas&eacute; sur le sc&eacute;nario&nbsp;1, requiert l&#8217;ajout d&#8217;un fichier d&#8217;entr&eacute;e
					contenant les informations sur les revendeurs, ainsi que l&#8217;ajout de champs
					suppl&eacute;mentaires dans la table de sortie principale. De plus, deux filtres sont
					ajout&eacute;s sur les jointures Inner Join afin de r&eacute;cup&eacute;rer les rejets
					sp&eacute;cifiques.</p><div class="mediaobject"><img src="../images/UseCase_tmap2-2-2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur <span class="bold"><strong>File</strong></span> dans la <span class="bold"><strong>Palette</strong></span> des composants et d&eacute;posez un
							composant <span class="bold"><strong>tFileInputDelimited</strong></span> dans
							l&#8217;espace de mod&eacute;lisation graphique.
								Renommez-le&nbsp;<span class="emphasis"><em>Resellers</em></span>.</p></li><li class="listitem"><p>Connectez ce nouveau composant au <span class="bold"><strong>tMap</strong></span> et ajoutez un libell&eacute; &agrave; cette connexion&nbsp;: ici,
								<span class="emphasis"><em>Resellers_data</em></span>.</p></li><li class="listitem"><p>Double-cliquez sur le composant&nbsp;<span class="emphasis"><em>Resellers</em></span> pour
							d&eacute;finir ses propri&eacute;t&eacute;s dans la vue <span class="bold"><strong>Basic
								settings</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap2-2-1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnez <span class="bold"><strong>Repository</strong></span> dans la
								liste<span class="bold"><strong> Property Type </strong></span>et s&eacute;lectionnez
							le sch&eacute;ma&nbsp;<span class="italic">resellers</span>, dans la bo&icirc;te de
							dialogue <span class="bold"><strong>[Repository Content]</strong></span>. Les
							autres champs sont automatiquement renseign&eacute;s.</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Dans ce sc&eacute;nario, les sch&eacute;mas d&#8217;entr&eacute;e sont stock&eacute;s sous le n&#339;ud <span class="bold"><strong>Metadata</strong></span> du <span class="bold"><strong>Repository</strong></span> afin de les retrouver facilement. Pour plus
						d&#8217;informations concernant la cr&eacute;ation de m&eacute;tadonn&eacute;es dans le <span class="bold"><strong>Repository</strong></span>, consultez&nbsp;le<span class="bold"><strong>
							Guide utilisateur</strong></span> de <span class="bluebold">Talend Open Studio</span>.</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Double-cliquez sur le composant <span class="bold"><strong>tMap</strong></span>
							pour ouvrir le <span class="bold"><strong>Map Editor</strong></span>. Vous
							remarquerez que le sch&eacute;ma est automatiquement ajout&eacute; &agrave; la zone Input des
							sch&eacute;mas d&#8217;entr&eacute;e.</p></li><li class="listitem"><p>Cr&eacute;ez une jointure entre le flux d&#8217;entr&eacute;e principal et le nouveau flux
							d&#8217;entr&eacute;e en d&eacute;posant la colonne&nbsp;<span class="emphasis"><em>ID_Reseller</em></span> de la
								table&nbsp;<span class="emphasis"><em>Cars_data</em></span> dans la
								colonne&nbsp;<span class="emphasis"><em>ID_Reseller</em></span> de la
								table&nbsp;<span class="emphasis"><em>Resellers_data</em></span>.</p></li><li class="listitem"><p>Cliquez sur le bouton<span class="bold"><strong> tMap settings</strong></span>
							en haut de la table&nbsp;<span class="emphasis"><em>Resellers_data</em></span> et s&eacute;lectionnez
								<span class="bold"><strong>Inner Join</strong></span> comme mod&egrave;le de jointure
								(<span class="bold"><strong>Join Model</strong></span>).</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap2-2-3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Glissez-d&eacute;posez toutes les colonnes de la table
								<span class="emphasis"><em>Resellers_data</em></span>
								sauf&nbsp;<span class="emphasis"><em>ID_Reseller</em></span> dans la table de sortie
								principale,&nbsp;<span class="emphasis"><em>Insured</em></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap2-2-4.png"></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Lorsque deux Inner Joins sont d&eacute;finis, vous devez soit d&eacute;finir deux tables
						de rejet inner join pour diff&eacute;rencier les deux rejets, soit rassembler les
						deux rejets inner join dans une seule et m&ecirc;me table de sortie, s&#8217;il n&#8217;y a
						qu&#8217;une seule sortie.</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Dans la zone de sortie Output, cliquez sur le signe <span class="bold"><strong>[+]</strong></span> pour ajouter une nouvelle table de sortie
							et nommez-la&nbsp;<span class="emphasis"><em>Reject_ResellerID</em></span>.</p></li><li class="listitem"><p>D&eacute;posez toutes les colonnes de la table&nbsp;<span class="emphasis"><em>Cars_data</em></span>
							dans la table&nbsp;<span class="emphasis"><em>Reject_ResellerID</em></span>.</p></li><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>tMap Settings</strong></span>
							puis s&eacute;lectionnez true pour <span class="bold"><strong>Catch lookup inner
								join reject</strong></span> afin de d&eacute;finir la derni&egrave;re table comme &eacute;tant
							la table du flux de sortie de rejets Inner Join. Si la jointure Inner
							Join ne peut &ecirc;tre &eacute;tablie pour une entr&eacute;e, les informations concernant
							les voitures correspondantes seront rassembl&eacute;es dans le flux de sortie.
						</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap2-2-5.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Appliquez maintenant un filtre sur chacune des sorties de rejet Inner
							Join afin de distinguer les deux types de rejets.</p></li><li class="listitem"><p>Dans la premi&egrave;re table de rejet (<span class="emphasis"><em>Reject_OwnerID</em></span>),
							cliquez sur la fl&egrave;che dot&eacute;e d&#8217;un signe [+] pour ajouter une ligne de
							filtre et renseignez ce champ avec la formule suivante pour ne
							recueillir que les rejets li&eacute;s au champ <span class="emphasis"><em>OwnerID</em></span> non
							d&eacute;fini&nbsp;: <code class="code">Owners_data.ID_Owner==null</code>
						</p></li><li class="listitem"><p>Dans la seconde table de rejet Inner Join
								(<span class="emphasis"><em>Reject_ResellerID</em></span>), renouvelez l&#8217;op&eacute;ration et
							utilisez la formule suivante&nbsp;:
								<code class="code">Resellers_data.ID_Reseller==null</code>
						</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap2-2-6.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur <span class="bold"><strong>Apply</strong></span> pour enregistrer
							les changements, puis sur <span class="bold"><strong>OK</strong></span> pour
							fermer le Mapper.</p></li><li class="listitem"><p>D&eacute;posez un nouveau composant <span class="bold"><strong>tFileOutputDelimited</strong></span> de la <span class="bold"><strong>Palette</strong></span> dans l&#8217;espace de mod&eacute;lisation graphique et
								nommez-le&nbsp;<span class="emphasis"><em>No_Reseller_ID</em></span>.</p></li><li class="listitem"><p>Configurez ses propri&eacute;t&eacute;s. Dans ce sc&eacute;nario, sp&eacute;cifiez simplement le
							chemin d&#8217;acc&egrave;s au fichier de sortie et cochez la case <span class="bold"><strong>Include Header</strong></span>. Laissez les autres param&egrave;tres
							tels qu&#8217;ils sont.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap2-2-7.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Connectez le <span class="bold"><strong>tMap</strong></span> au nouveau
								<span class="bold"><strong>tFileOutputDelimited</strong></span> &agrave; l&#8217;aide du
							lien <span class="bold"><strong>Row</strong></span>
								nomm&eacute;&nbsp;<span class="emphasis"><em>Reject_ResellerID</em></span>.</p></li><li class="listitem"><p>Pour comprendre le fonctionnement du Mapper, dans ce sc&eacute;nario, retirez
							du fichier <span class="emphasis"><em>Resellers.csv</em></span> les lignes correspondant
							aux <span class="emphasis"><em>Reseller ID 5 et 8</em></span>.</p></li><li class="listitem"><p>Ex&eacute;cutez le Job via la touche <span class="bold"><strong>F6</strong></span> du
							clavier, ou &agrave; partir de la vue <span class="bold"><strong>Run</strong></span>.</p><p>Les quatre fichiers de sortie sont tous cr&eacute;&eacute;s dans le dossier d&eacute;fini
							dans les propri&eacute;t&eacute;s de la vue <span class="bold"><strong>Component</strong></span>. </p><p>Remarquez que dans le fichier de rejet li&eacute; &agrave; l&#8217;Inner Join,
								<span class="emphasis"><em>NoResellerID.csv</em></span>, le champ
								<span class="emphasis"><em>ID_Owners</em></span> correspond aux entr&eacute;es du fichier
								<span class="emphasis"><em>Cars</em></span> dont le Reseller ID est &eacute;gal &agrave; 5 et 8,
							manquant dans le fichier&nbsp;Resellers.csv.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap2-2-8.png"></div></div><div class="section" title="Sc&eacute;nario&nbsp;3&nbsp;: Mapping de jointure en cascade"><div class="titlepage"><div><div><h3 class="title"><a name="d0e253279"></a>Sc&eacute;nario&nbsp;3&nbsp;: Mapping de jointure en cascade</h3></div></div></div><p>Un troisi&egrave;me sc&eacute;nario plus avanc&eacute; et bas&eacute; sur le sc&eacute;nario&nbsp;2 requiert l&#8217;ajout
					d&#8217;une nouvelle entr&eacute;e contenant les informations d&#8217;assurance, par
					exemple.</p><p>Dans le <span class="bold"><strong>Mapper</strong></span>, mettez en place une jointure
						<span class="bold"><strong>Inner Join</strong></span> entre deux tables de r&eacute;f&eacute;rence
					(Lookup) des flux secondaires <span class="emphasis"><em>Owners</em></span> et
						<span class="emphasis"><em>Insurance</em></span> afin de g&eacute;rer les r&eacute;f&eacute;rences en cascade et
					par cons&eacute;quent de r&eacute;cup&eacute;rer les informations de la table
						<span class="emphasis"><em>Insurance</em></span> via les donn&eacute;es de la table
						<span class="emphasis"><em>Owners</em></span>.</p></div><div class="section" title="Sc&eacute;nario&nbsp;4&nbsp;: Mapping avanc&eacute; avec filtres, jointures explicites et rejet Inner join"><div class="titlepage"><div><div><h3 class="title"><a name="Raa32575"></a>Sc&eacute;nario&nbsp;4&nbsp;: Mapping avanc&eacute; avec filtres, jointures explicites et rejet Inner
					join</h3></div></div></div><p>Ce sc&eacute;nario pr&eacute;sente un Job utilisant le <span class="bold"><strong>tMap</strong></span>
					et permettant de trouver les clients propri&eacute;taires d&#8217;une voiture de marque
					d&eacute;finie et avoir entre&nbsp;2 et 6&nbsp;enfants (inclus) dans un but de vente
					incitative.</p><div class="mediaobject"><img src="../images/UseCase_tmap4-1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez-d&eacute;posez les composants suivants de la <span class="bold"><strong>Palette</strong></span> dans l&#8217;espace de mod&eacute;lisation graphique&nbsp;:
								<span class="bold"><strong>tFileInputDelimited</strong></span> (x3), <span class="bold"><strong>tMap</strong></span>, <span class="bold"><strong>tFileOutputDelimited</strong></span> (x2)</p></li><li class="listitem"><p>Connectez les composants d&#8217;entr&eacute;e au <span class="bold"><strong>tMap</strong></span> &agrave; l&#8217;aide de connexions de type <span class="bold"><strong>Main row</strong></span>. Faites attention au premier
							composant que vous connectez car son flux de donn&eacute;es sera
							automatiquement un flux <span class="bold"><strong>Main</strong></span>
							(principal). Et toutes les autres connexions seront alors de type
								<span class="bold"><strong>Lookup</strong></span> (flux de r&eacute;f&eacute;rence). Dans ce
							sc&eacute;nario, le composant d&#8217;entr&eacute;e&nbsp;<span class="emphasis"><em>Owners</em></span> sera reli&eacute;
							au <span class="bold"><strong>tMap</strong></span> par le flux <span class="bold"><strong>Main</strong></span>.</p></li><li class="listitem"><p>D&eacute;finissez les propri&eacute;t&eacute;s de chaque composant d&#8217;entr&eacute;e dans l&#8217;onglet
								<span class="bold"><strong>Basic settings</strong></span>. Configurez les
							propri&eacute;t&eacute;s du composant&nbsp;<span class="emphasis"><em>Owners</em></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap4-2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnez <span class="bold"><strong>Repository</strong></span> dans la
								liste<span class="bold"><strong> Property Type </strong></span>et s&eacute;lectionnez
							le sch&eacute;ma&nbsp;<span class="italic">resellers</span>, dans la bo&icirc;te de
							dialogue <span class="bold"><strong>[Repository Content]</strong></span>. Les
							autres champs sont automatiquement renseign&eacute;s.</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Dans ce sc&eacute;nario, les sch&eacute;mas d&#8217;entr&eacute;e sont stock&eacute;s sous le n&#339;ud <span class="bold"><strong>Metadata</strong></span> du <span class="bold"><strong>Repository</strong></span> afin de les retrouver facilement. Pour plus
						d&#8217;informations concernant la cr&eacute;ation de m&eacute;tadonn&eacute;es dans le <span class="bold"><strong>Repository</strong></span>, consultez le<span class="bold"><strong>
							Guide utilisateur</strong></span> de <span class="bluebold">Talend Open Studio</span>.</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>R&eacute;p&eacute;tez ces &eacute;tapes pour les autres composants d&#8217;entr&eacute;e&nbsp;:
								<span class="emphasis"><em>Cars</em></span> et&nbsp;<span class="emphasis"><em>Resellers</em></span>. Ces
							deux flux de r&eacute;f&eacute;rence (<span class="bold"><strong>Lookup</strong></span>)
							renseigneront les tables secondaires (lookup) de la zone d&#8217;entr&eacute;e du
								<span class="bold"><strong>Map Editor</strong></span>.</p></li><li class="listitem"><p>Double-cliquez sur le composant <span class="bold"><strong>tMap</strong></span>
							pour ouvrir le <span class="bold"><strong>Map Editor</strong></span> et d&eacute;finir le
							mapping et les filtres.</p></li><li class="listitem"><p>Configurez une jointure explicite entre le flux <span class="bold"><strong>Main</strong></span>&nbsp;<span class="emphasis"><em>Owner</em></span> et le flux <span class="bold"><strong>Lookup</strong></span>&nbsp;<span class="emphasis"><em>Cars</em></span> en
							glissant-d&eacute;posant la colonne&nbsp;<span class="emphasis"><em>ID_Owner</em></span> de la
								table&nbsp;<span class="emphasis"><em>Owner</em></span> dans la colonne&nbsp;<span class="emphasis"><em>ID_Owner
							</em></span>de la table&nbsp;<span class="emphasis"><em>Cars</em></span>. La jointure explicite
							s&#8217;affiche avec une cl&eacute; de hachage.</p></li></ul></div><div class="mediaobject"><img src="..\images\use_case-tmap4-3cut2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Dans le champ <span class="bold"><strong>Expr. Key</strong></span> de la colonne
								<span class="emphasis"><em>Make</em></span> (Marque), saisissez (en Java) le filtre &agrave;
							appliquer. Dans ce cas d&#8217;utilisation, saisissez simplement
								<span class="emphasis"><em>&#8220;BMW&#8221;</em></span> puisque ce qui est recherch&eacute; ce sont les
							propri&eacute;taires (<span class="emphasis"><em>Owners</em></span>) de cette marque en
							particulier.</p></li></ul></div><div class="mediaobject"><img src="../images/use_case-tmap4-3cut3top.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Effectuez une jointure en cascade entre les deux tables de r&eacute;f&eacute;rence
								<span class="emphasis"><em>Cars</em></span> et&nbsp;<span class="emphasis"><em>Resellers</em></span>, sur la
								colonne&nbsp;<span class="emphasis"><em>ID_Reseller</em></span>, afin de retrouver les
							informations sur les propri&eacute;taires et plus pr&eacute;cis&eacute;ment le nombre
							d&#8217;enfants qu&#8217;ils ont.</p></li><li class="listitem"><p>Comme vous souhaitez exclure les valeurs nulles dans une table s&eacute;par&eacute;e
							et les exclure de la sortie standard, cliquez sur le bouton <span class="bold"><strong>tMap Settings</strong></span> puis s&eacute;lectionnez <span class="bold"><strong>Inner Join</strong></span> comme mod&egrave;le de jointure pour
							chaque table <span class="bold"><strong>Lookup</strong></span> &agrave; filtrer.</p></li></ul></div><div class="mediaobject"><img src="../images/use_case-tmap4-3cut3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Dans les param&egrave;tres du <span class="bold"><strong>tMap</strong></span>, vous
							pouvez s&eacute;lectionner une des options suivantes&nbsp;: <span class="bold"><strong>Unique match</strong></span>, <span class="bold"><strong>First
								match</strong></span>, ou <span class="bold"><strong>All Matches</strong></span>.
							Dans cet exemple, s&eacute;lectionnez l&#8217;option <span class="bold"><strong>All
								matches</strong></span>. Ainsi, si plusieurs correspondances sont
							trouv&eacute;es dans l&#8217;Inner Join (i.e. les lignes r&eacute;pondant &agrave; la jointure
							explicite ainsi qu&#8217;au filtre), elles seront toutes prises en compte dans
							le flux de sortie (soit dans le flux de rejet, soit dans le flux de
							sortie standard).</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>L&#8217;option <span class="bold"><strong>Unique match</strong></span> fonctionne de la
						m&ecirc;me mani&egrave;re que l&#8217;option<span class="bold"><strong> Last match</strong></span>. Les
						options <span class="bold"><strong>First match</strong></span> et <span class="bold"><strong>All matches</strong></span> fonctionnent comme l&#8217;indiquent leurs
						noms (respectivement premi&egrave;re correspondance et toutes les
						correspondances).</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Puis dans la zone <span class="bold"><strong>Output</strong></span> du <span class="bold"><strong>Map Editor</strong></span>, ajoutez deux tables&nbsp;: une pour
							les correspondances r&eacute;pondant &agrave; la jointure explicite et au filtre et
							une pour les rejets.</p></li><li class="listitem"><p>D&eacute;posez toutes les colonnes de la table&nbsp;<span class="emphasis"><em>Owners</em></span>,
							les
								colonnes&nbsp;<span class="emphasis"><em>Registration</em></span>,&nbsp;<span class="emphasis"><em>Make</em></span>
								et&nbsp;<span class="emphasis"><em>Color</em></span> de la table&nbsp;<span class="emphasis"><em>Cars</em></span>
							ainsi que les colonnes&nbsp;<span class="emphasis"><em>ID_Reseller</em></span>
								et&nbsp;<span class="emphasis"><em>Name_Reseller </em></span>de la
								table&nbsp;<span class="emphasis"><em>Reseller</em></span> dans la table de sortie
							principale.</p></li><li class="listitem"><p>D&eacute;posez toutes les colonnes de la table&nbsp;<span class="emphasis"><em>Owners</em></span>
							dans la table de rejets.</p></li><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>Filter</strong></span> en haut
							de la table de sortie principale afin d&#8217;afficher la zone d&#8217;expression
								<span class="bold"><strong>Filter</strong></span>.</p></li><li class="listitem"><p>Saisissez une instruction afin de r&eacute;duire le nombre de lignes charg&eacute;es
							dans le flux principale de sortie. Dans cet exemple, saisissez&nbsp;:
								<code class="code">Owners.Children_Nr &gt;=2 &amp;&amp; Owners.Children_Nr &lt;=
								6</code>.</p></li><li class="listitem"><p>Dans la table de rejets, cliquez sur le bouton <span class="bold"><strong>tMap settings</strong></span> et d&eacute;finissez les types de rejets.</p></li><li class="listitem"><p>S&eacute;lectionnez <span class="bold"><strong>true</strong></span> pour <span class="bold"><strong>Catch output reject </strong></span>afin de collecter des
							donn&eacute;es concernant les d&eacute;tenteurs de voitures BMW ayant moins de deux
							enfants ou plus de six enfants.</p></li><li class="listitem"><p>S&eacute;lectionnez <span class="bold"><strong>true</strong></span> pour <span class="bold"><strong>Catch lookup inner join reject</strong></span> afin de
							collecter des donn&eacute;es concernant les propri&eacute;taires d&#8217;autres marques et
							ceux pour qui l&#8217;information&nbsp;<span class="emphasis"><em>Reseller</em></span> est
							introuvable.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap4-3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur <span class="bold"><strong>OK</strong></span> pour valider le
							mapping et fermer l&#8217;&eacute;diteur.</p></li><li class="listitem"><p>Dans l&#8217;&eacute;diteur graphique, cliquez droit sur le <span class="bold"><strong>tMap</strong></span> et cr&eacute;ez une connexion de sortie vers les
							composants correspondants.</p></li><li class="listitem"><p>D&eacute;finissez les param&egrave;tres des composants de sortie dans l&#8217;onglet
								<span class="bold"><strong>Basic settings</strong></span>.</p><p>Dans ce sc&eacute;nario, sp&eacute;cifiez simplement les chemins d&#8217;acc&egrave;s aux
							fichiers de sortie et cochez la case <span class="bold"><strong>Include
								Header</strong></span>. Laissez les autres param&egrave;tres tels qu&#8217;ils
							sont.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap4-4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Enregistrez votre Job, puis appuyez sur <span class="bold"><strong>F6</strong></span> pour l&#8217;ex&eacute;cuter.</p><p>Le fichier de sortie principal contient les informations concernant
							les d&eacute;tenteurs de BMW ayant entre deux et six enfants, et le fichier de
							rejet contient les informations concernant les autres possesseurs de
							voiture(s).</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap4-5.png"></div></div><div class="section" title="Sc&eacute;nario&nbsp;5&nbsp;: Mapping avanc&eacute; avec filtres et diff&eacute;rents rejets"><div class="titlepage"><div><div><h3 class="title"><a name="d0e253665"></a>Sc&eacute;nario&nbsp;5&nbsp;: Mapping avanc&eacute; avec filtres et diff&eacute;rents rejets</h3></div></div></div><p>Ce sc&eacute;nario est une version modifi&eacute;e du sc&eacute;nario pr&eacute;c&eacute;dent. Il d&eacute;crit un Job
					qui applique des filtres pour limiter la recherche aux possesseurs de voitures
					BMW ou Mercedes ayant entre deux et six enfants et divise les donn&eacute;es sans
					correspondance en diff&eacute;rents flux de rejets.</p><div class="mediaobject"><img src="../images/UseCase_tmap5-1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Reprenez le Job de <a class="xref" href="tMap.html#Raa32575" title="Sc&eacute;nario&nbsp;4&nbsp;: Mapping avanc&eacute; avec filtres, jointures explicites et rejet Inner join">la section intitul&eacute;e &laquo;&nbsp;Sc&eacute;nario&nbsp;4&nbsp;: Mapping avanc&eacute; avec filtres, jointures explicites et rejet Inner
					join&nbsp;&raquo;</a>.</p></li><li class="listitem"><p>D&eacute;posez un nouveau <span class="bold"><strong>tFileOutputDelimited</strong></span> de la <span class="bold"><strong>Palette</strong></span> dans l&#8217;espace de mod&eacute;lisation graphique et
								nommez-le&nbsp;<span class="emphasis"><em>Rejects_BMW_Mercedes</em></span>.</p></li><li class="listitem"><p>Connectez le composant <span class="bold"><strong>tMap</strong></span> au
							nouveau composant de sortie &agrave; l&#8217;aide d&#8217;une connexion <span class="bold"><strong>Row</strong></span> et nommez cette connexion selon la
							fonction du composant de sortie.</p><p>Ce lien deviendra le nom de la nouvelle table de sortie dans le
								<span class="bold"><strong>Map Editor</strong></span>.</p></li><li class="listitem"><p>Renommez les connexions et les composants de sortie existants afin de
							pr&eacute;senter leur fonction.</p><p>Les tables de sortie dans le <span class="bold"><strong>Map Editor
							</strong></span>seront automatiquement renomm&eacute;es selon le libell&eacute; des liens.
							Dans cet exemple, renommez les connexions de
								sortie&nbsp;<span class="emphasis"><em>BMW_Mercedes_withChildren</em></span>
								et&nbsp;<span class="emphasis"><em>Owners_Other_Makes</em></span>, respectivement.</p></li><li class="listitem"><p>Double-cliquez sur le composant <span class="bold"><strong>tMap</strong></span>
							afin de lancer le <span class="bold"><strong>Map Editor</strong></span> pour
							modifier le mapping et les filtres.</p><p>Remarquez que la zone de sortie contient une nouvelle table de sortie,
							vide, nomm&eacute;e&nbsp;<span class="emphasis"><em>Rejects&nbsp;BMW_Mercedes</em></span>. Vous pouvez
							ajuster la position de la table en la s&eacute;lectionnant et en cliquant sur
							les fl&egrave;ches pointant vers le haut ou vers le bas, en haut de la zone de
							sortie.</p></li><li class="listitem"><p>Supprimez le filtre&nbsp;<span class="emphasis"><em>BMW</em></span> de la
								table&nbsp;<span class="emphasis"><em>Cars</em></span> dans la zone d&#8217;entr&eacute;e.</p></li><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>Filters</strong></span> pour
							afficher le champ <span class="bold"><strong>Filter</strong></span> et saisissez
							un nouveau filtre afin de limiter la recherche aux seules marques de
							voitures BMW et Mercedes. L&#8217;instruction est la suivante&nbsp;:
								<code class="code">Cars.Make.equals(&#8220;BMW&#8221;) ||
							Cars.Make.equals(&#8220;Mercedes&#8221;)</code>.</p></li></ul></div><div class="mediaobject"><img src="../images/use_case-tmap5-2cut2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnez toutes les colonnes de la table principale de sortie et
							d&eacute;posez-les dans la nouvelle table de sortie.</p><p>Sinon, vous pouvez glisser les colonnes des tables d&#8217;entr&eacute;e
							correspondantes dans la nouvelle table de sortie.</p></li><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>tMap settings</strong></span>
							en haut de la nouvelle table de sortie et s&eacute;lectionnez <span class="bold"><strong>true</strong></span> pour <span class="bold"><strong>Catch output
								reject</strong></span> afin de collecter les donn&eacute;es concernant les
							d&eacute;tenteurs de voiture(s) BMW ou Mercedes ayant moins de deux enfants ou
							plus de six.</p></li><li class="listitem"><p>Dans la table&nbsp;<span class="emphasis"><em>Owners_Other_Makes</em></span>, s&eacute;lectionnez
								<span class="bold"><strong>true</strong></span> pour <span class="bold"><strong>Catch lookup inner join reject</strong></span> afin de collecter les
							donn&eacute;es concernant les possesseurs de voitures d&#8217;autres marques et ceux
							dont l&#8217;information&nbsp;<span class="emphasis"><em>reseller</em></span> est introuvable.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap5-2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur <span class="bold"><strong>OK</strong></span> pour valider le
							mapping et fermer le <span class="bold"><strong>Map Editor</strong></span>.</p></li><li class="listitem"><p>Configurez les propri&eacute;t&eacute;s des composants de sortie dans leur vue
								<span class="bold"><strong>Basic settings</strong></span> respective. Dans ce
							sc&eacute;nario, d&eacute;finissez simplement les nouveaux chemins d&#8217;acc&egrave;s aux
							fichiers de sortie et cochez la case <span class="bold"><strong>Include
								Header</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap5-3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Sauvegardez votre Job et appuyez sur <span class="bold"><strong>F6</strong></span> pour l&#8217;ex&eacute;cuter.</p><p>Le contenu du flux de sortie principal montre que les lignes filtr&eacute;es
							sont bien pass&eacute;es.</p></li></ul></div><div class="mediaobject" align="center"><img src="../images/UseCase_tmap5-4_5.png" align="middle"></div></div><div class="section" title="Sc&eacute;nario&nbsp;6&nbsp;: Mapping avanc&eacute; avec rechargement de la base de r&eacute;f&eacute;rence &agrave; chaque ligne"><div class="titlepage"><div><div><h3 class="title"><a name="Raa71120"></a>Sc&eacute;nario&nbsp;6&nbsp;: Mapping avanc&eacute; avec rechargement de la base de r&eacute;f&eacute;rence &agrave;
					chaque ligne</h3></div></div></div><p>Le sc&eacute;nario suivant d&eacute;crit un Job permettant de r&eacute;cup&eacute;rer certaines
					informations sur des personnes dans une base de donn&eacute;es de r&eacute;f&eacute;rence, en se
					basant sur une jointure effectu&eacute;e sur leur &acirc;ge. Le flux principal des donn&eacute;es
					source est lu &agrave; partir d&#8217;une table MySQL appel&eacute;e <span class="emphasis"><em>people_age</em></span>
					contenant certains d&eacute;tails sur les personnes, comme leur identifiant
					(num&eacute;rique), leur nom et pr&eacute;nom (alphanum&eacute;rique) ainsi que leur &acirc;ge (num&eacute;rique),
					qui peut &ecirc;tre soit 40, soit 60&nbsp;ans. On a intentionnellement r&eacute;duit le nombre
					d&#8217;entr&eacute;es de cette table. </p><p>Les informations de r&eacute;f&eacute;rence sont &eacute;galement stock&eacute;es dans une table MySQL
					appel&eacute;e <span class="emphasis"><em>large_data_volume</em></span>. Cette table de r&eacute;f&eacute;rence
					contient un certain nombre d&#8217;entr&eacute;es, dont le nom des villes dans lesquelles les
					personnes enregistr&eacute;es dans la table principale sont all&eacute;es. Le nombre d&#8217;entr&eacute;es
					a &eacute;t&eacute; restreint pour plus de clart&eacute; mais, dans le cas d&#8217;une utilisation normale,
					le Job ci-dessous a des r&eacute;sultats plus significatifs quand on traite un gros
					volume de donn&eacute;es de r&eacute;f&eacute;rence. </p><p>Pour optimiser les performances, un composant de connexion aux bases de
					donn&eacute;es est utilis&eacute; au d&eacute;but de ce Job pour ouvrir une connexion &agrave; la base de
					donn&eacute;es de r&eacute;f&eacute;rence afin de ne pas ouvrir et refermer une connexion &agrave; chaque
					ligne de la table de r&eacute;f&eacute;rence charg&eacute;e.</p><p>Un filtre d&#8217;expression (expression filter) est appliqu&eacute; &agrave; ce flux de
					r&eacute;f&eacute;rence, qui permet de ne s&eacute;lectionner que les donn&eacute;es des personnes dont
					l&#8217;&acirc;ge est 60 ou 40&nbsp;ans. Ainsi, seules les lignes pertinentes de la table de
					r&eacute;f&eacute;rence sont enregistr&eacute;es pour chaque ligne du flux principal. </p><p>Ce Job pr&eacute;sente donc comment, &agrave; partir d&#8217;un nombre limit&eacute; de lignes de flux
					principal, on peut optimiser la base de donn&eacute;es de r&eacute;f&eacute;rence pour n&#8217;enregistrer
					que les r&eacute;sultats correspondant &agrave; la cl&eacute; d&#8217;expression (expression key).</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>En g&eacute;n&eacute;ral, comme le chargement des r&eacute;f&eacute;rences s&#8217;effectue pour chacune des
						lignes de flux principal, il est plus int&eacute;ressant d&#8217;utiliser cette option
						quand on ne traite qu&#8217;un nombre limit&eacute; de lignes de flux principal et un
						grand nombre de lignes de r&eacute;f&eacute;rence. </p></td></tr></table></div><p>La jointure s&#8217;effectue au niveau du champ&nbsp;<span class="emphasis"><em>age</em></span>. Les
					informations de la base de r&eacute;f&eacute;rence sont ensuite charg&eacute;es pour chacune des
					lignes du flux principal en entr&eacute;e, en utilisant l&#8217;option de chargement
					appropri&eacute;e dans l&#8217;&eacute;diteur du composant <span class="bold"><strong>tMap</strong></span>. </p><div class="mediaobject"><img src="../images/UseCase_tMap6-1.png"></div><p>Dans cet exemple, les m&eacute;tadonn&eacute;es ont &eacute;t&eacute; pr&eacute;par&eacute;es pour le composant de
					connexion et les composants source. Pour plus d&#8217;informations sur les m&eacute;tadonn&eacute;es
					de connexion aux bases de donn&eacute;es et les m&eacute;tadonn&eacute;es de cr&eacute;ation de sch&eacute;mas des
					tables, consultez la section d&eacute;di&eacute;e au sujet dans le <span class="bold"><strong>Guide
						utilisateur</strong></span> de <span class="bluebold">Talend Open Studio</span>.</p><p>Le Job est form&eacute; de cinq composants, quatre composants de bases de donn&eacute;es et
					un composant de mapping. </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>A partir du n&#339;ud <span class="bold"><strong>Metadata</strong></span> &gt;
								<span class="bold"><strong>Db Connections</strong></span> dans le <span class="bold"><strong>Repository</strong></span>, glissez le sch&eacute;ma de base de
							donn&eacute;es dans l&#8217;&eacute;diteur graphique. Dans cet exemple, la table source
							s&#8217;appelle <span class="emphasis"><em>people_age</em></span>.</p></li><li class="listitem"><p>Lorsque vous d&eacute;posez le composant, une liste appara&icirc;t &agrave; l&#8217;&eacute;cran&nbsp;:
							s&eacute;lectionnez le composant <span class="bold"><strong>tMysqlInput</strong></span>.
						</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tMap6-2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>D&eacute;posez le sch&eacute;ma de base de donn&eacute;e de r&eacute;f&eacute;rence &agrave; partir du n&#339;ud
								<span class="bold"><strong>Metadata &gt; Db Connections</strong></span>. Dans
							cet exemple, la table de r&eacute;f&eacute;rence s&#8217;appelle
								<span class="emphasis"><em>large_data_volume</em></span>.</p></li><li class="listitem"><p>De la m&ecirc;me mani&egrave;re, glissez une connexion &agrave; la base de donn&eacute;es du n&#339;ud
								<span class="bold"><strong>Db Connections </strong></span>dans le <span class="bold"><strong>Repository</strong></span> dans l&#8217;&eacute;diteur graphique. Dans la
							bo&icirc;te de dialogue <span class="bold"><strong>[Components]</strong></span>,
							s&eacute;lectionnez le composant <span class="bold"><strong>tMysqlConnection</strong></span>. Ce composant cr&eacute;e une connexion
							permanente &agrave; la base de donn&eacute;es de r&eacute;f&eacute;rence afin d&#8217;&eacute;viter que la
							connexion ne se referme au chargement que chaque ligne de r&eacute;f&eacute;rence.
						</p></li><li class="listitem"><p>A partir de la <span class="bold"><strong>Palette</strong></span>, d&eacute;posez dans
							l&#8217;&eacute;diteur graphique le composant <span class="bold"><strong>tMap</strong></span>
							(famille <span class="bold"><strong>Processing</strong></span>) et les composants
								<span class="bold"><strong>tMysqlCommit</strong></span> et <span class="bold"><strong>tMysqlOutput</strong></span> (famille <span class="bold"><strong>Database</strong></span>). </p></li><li class="listitem"><p>Reliez maintenant tous les composants entre eux&nbsp;: faites un clic-droit
							sur le <span class="bold"><strong>tMysqlInput</strong></span> correspondant &agrave; la
							table <span class="emphasis"><em>people</em></span> et maintenez le bouton enfonc&eacute; tout en
							d&eacute;pla&ccedil;ant le curseur jusqu&#8217;au <span class="bold"><strong>tMap</strong></span>.</p></li><li class="listitem"><p>Rel&acirc;chez le bouton lorsque vous &ecirc;tes sur le <span class="bold"><strong>tMap</strong></span>, le flux principal de lignes est cr&eacute;&eacute;
							automatiquement. </p></li><li class="listitem"><p>Renommez le lien de type <span class="bold"><strong>Main</strong></span> en
								<span class="emphasis"><em>people</em></span>, pour pouvoir identifier plus facilement
							le flux de donn&eacute;es principal. </p></li><li class="listitem"><p>Effectuez la m&ecirc;me op&eacute;ration pour connecter la table de r&eacute;f&eacute;rence
								(<span class="emphasis"><em>large_data_volume</em></span>) au <span class="bold"><strong>tMap</strong></span> et le <span class="bold"><strong>tMap</strong></span> au
								<span class="bold"><strong>tMysqlOutput</strong></span>.</p></li><li class="listitem"><p>Une bo&icirc;te de dialogue appara&icirc;t et vous devez donner un nom au lien de
							sortie. Dans cet exemple, le flux de sortie s&#8217;appelle
								<span class="emphasis"><em>people_mixandmatch. </em></span></p></li><li class="listitem"><p>Renommez &eacute;galement le lien de connexion &agrave; la base de r&eacute;f&eacute;rence en
								<span class="emphasis"><em>large_volume</em></span> pour pouvoir identifier plus
							facilement le flux de donn&eacute;es. </p></li><li class="listitem"><p>Connectez le <span class="bold"><strong>tMysqlConnection</strong></span> au
								<span class="bold"><strong>tMysqlInput</strong></span> via un lien de type
								<span class="bold"><strong>OnSubjobOk</strong></span>.</p></li><li class="listitem"><p>Double-cliquez ensuite sur le composant <span class="bold"><strong>tMap</strong></span> pour ouvrir l&#8217;&eacute;diteur graphique de mapping. </p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tMap6-3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>La table <span class="bold"><strong>Output</strong></span> (qui s&#8217;est cr&eacute;&eacute;e
							automatiquement quand vous avez li&eacute; le <span class="bold"><strong>tMap</strong></span> au <span class="bold"><strong>tMysqlOutput</strong></span>)
							sera compos&eacute;e des lignes concordantes du flux de r&eacute;f&eacute;rence
								(<span class="emphasis"><em>large_data_volume</em></span>) et du flux principal
								(<span class="emphasis"><em>people_age</em></span>).</p></li><li class="listitem"><p>S&eacute;lectionnez les lignes du flux principal que vous voulez passer en
							sortie et faites les glisser vers la table de sortie (dans le coin
							sup&eacute;rieur droit de l&#8217;&eacute;diteur de mapping)&nbsp;: ils y seront copi&eacute;s. </p></li><li class="listitem"><p>Dans cet exemple, la s&eacute;lection des lignes du flux principal inclut les
							champs suivants&nbsp;: <span class="emphasis"><em>id</em></span>,
								<span class="emphasis"><em>first_name</em></span>, <span class="emphasis"><em>last_Name</em></span> et
								<span class="emphasis"><em>age</em></span>. </p></li><li class="listitem"><p>Dans la table de r&eacute;f&eacute;rence, la colonne <span class="emphasis"><em>city</em></span> est
							s&eacute;lectionn&eacute;e. </p></li><li class="listitem"><p>Faites glisser les colonnes s&eacute;lectionn&eacute;es des tables d&#8217;entr&eacute;e
								(<span class="emphasis"><em>people</em></span> et <span class="emphasis"><em>large_volume</em></span>)
							vers la table de sortie.</p></li><li class="listitem"><p>Cr&eacute;ez maintenant la jointure entre le flux principal et le flux de
							r&eacute;f&eacute;rence. </p></li><li class="listitem"><p>S&eacute;lectionnez la colonne <span class="emphasis"><em>age</em></span> dans la table du flux
							principal (en haut) et faites-la glisser vers la colonne
								<span class="emphasis"><em>age</em></span> de la table du flux de r&eacute;f&eacute;rence
								(<span class="emphasis"><em>large_volume</em></span> dans cet exemple).</p></li><li class="listitem"><p>L&#8217;ic&ocirc;ne d&#8217;une cl&eacute; appara&icirc;t &agrave; c&ocirc;t&eacute; de l&#8217;expression li&eacute;e dans la table
							de r&eacute;f&eacute;rence. La jointure est maintenant &eacute;tablie. </p></li><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>tMap Settings</strong></span>
							puis sur le bouton <span class="bold"><strong>[...]</strong></span> correspondant
							&agrave; <span class="bold"><strong>Lookup Model </strong></span>et s&eacute;lectionnez l&#8217;option
								<span class="bold"><strong>Reload at each row</strong></span> dans la bo&icirc;te de
							dialogue <span class="bold"><strong>[Options]</strong></span> pour que la base de
							r&eacute;f&eacute;rence soit charg&eacute;e &agrave; nouveau pour chaque nouvelle ligne trait&eacute;e.
						</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tMap6-4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>De la m&ecirc;me mani&egrave;re, param&eacute;trez <span class="bold"><strong>Match
								Model</strong></span> comme <span class="bold"><strong>All matches</strong></span>
							dans la table de r&eacute;f&eacute;rence pour r&eacute;cup&eacute;rer dans le flux de sortie toutes
							les occurrences de <span class="emphasis"><em>age</em></span> qui correspondent.</p></li><li class="listitem"><p>Impl&eacute;mentez ensuite le filtre, &eacute;tabli &agrave; partir de la colonne
								<span class="emphasis"><em>age</em></span>, dans la table de r&eacute;f&eacute;rence. Le champ
								<span class="bold"><strong>GlobalMapKey</strong></span> est cr&eacute;&eacute;
							automatiquement lorsque vous s&eacute;lectionnez l&#8217;option <span class="bold"><strong>Reload at each row</strong></span>. Vous pouvez donc utiliser cette
							expression pour filtrer les donn&eacute;es de r&eacute;f&eacute;rence de mani&egrave;re dynamique,
							pour que seules les informations pertinentes soient charg&eacute;es avec le
							flux principal. </p></li></ul></div><p>Comme l&#8217;a soulign&eacute; l&#8217;introduction de ce sc&eacute;nario, le flux de donn&eacute;es principal
					contient uniquement les personnes dont l&#8217;&acirc;ge est de&nbsp;40 ou&nbsp;60. Pour &eacute;viter de
					charger toutes les lignes de la table de r&eacute;f&eacute;rence, dont les &acirc;ges sont
					diff&eacute;rents de&nbsp;40 et&nbsp;60, vous pouvez utiliser la valeur &acirc;ge du flux principal
					comme variable globale pour alimenter le filtre de r&eacute;f&eacute;rence. </p><div class="mediaobject"><img src="../images/UseCase_tMap6-5.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Glissez la colonne <span class="emphasis"><em>Age</em></span> de la table de flux
							principal vers le champ <span class="bold"><strong>Expr.</strong></span> dans la
							table de r&eacute;f&eacute;rence. </p></li><li class="listitem"><p>Renseignez ensuite le nom de la variable dans le champ <span class="bold"><strong>globalMap Key</strong></span>, en utilisant une expression.
							Dans cet exemple, l&#8217;expression est&nbsp;: <code class="code">&#8220;people.Age&#8221;</code>. </p></li><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>OK</strong></span> pour
							enregistrer les param&egrave;tres de mapping et retourner dans l&#8217;&eacute;diteur
							graphique. </p></li><li class="listitem"><p>Pour terminer l&#8217;impl&eacute;mentation du filtrage dynamique du flux de
							r&eacute;f&eacute;rence, vous devez maintenant ajouter une clause WHERE &agrave; la requ&ecirc;te
							de la base de donn&eacute;es d&#8217;entr&eacute;e. </p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tMap6-6.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>A la fin du champ <span class="bold"><strong>Query</strong></span>, juste apr&egrave;s
							la commande <code class="code">Select</code>, entrez la clause de type WHERE
							suivante&nbsp;: </p><p>
							<code class="code">WHERE AGE ='"+((Integer)globalMap.get("people.Age"))+"'".</code>
						</p></li><li class="listitem"><p>Assurez-vous que le type correspond &agrave; la colonne utilis&eacute;e comme
							variable. Dans cet exemple, la donn&eacute;e <span class="emphasis"><em>Age</em></span> est du
							type <code class="code">Integer</code>. Veillez aussi &agrave; utiliser la variable de la
							mani&egrave;re dont vous l&#8217;avez param&eacute;tr&eacute;e dans le champ <span class="bold"><strong>globalMap key</strong></span> de l&#8217;&eacute;diteur de mapping. </p></li><li class="listitem"><p>Double-cliquez ensuite sur le composant <span class="bold"><strong>tMysqlOutput</strong></span> et v&eacute;rifiez que le sch&eacute;ma correspond aux
							param&egrave;tres de mapping. </p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tmap6-7.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cochez la case <span class="bold"><strong>Use an existing
								connection</strong></span> afin d&#8217;utiliser la connexion cr&eacute;&eacute;e. </p></li><li class="listitem"><p>Sp&eacute;cifiez dans le champ <span class="bold"><strong>Table</strong></span> le nom
							de la table cible.</p><p>Dans les listes <span class="bold"><strong>Action on table </strong></span>et
								<span class="bold"><strong>Action on data</strong></span>, s&eacute;lectionnez les
							actions que vous souhaitez effectuer.</p></li><li class="listitem"><p>Cliquez sur l&#8217;onglet <span class="bold"><strong>Run</strong></span> au bas de
							l&#8217;espace de mod&eacute;lisation graphique, afin d&#8217;afficher l&#8217;onglet
							d&#8217;ex&eacute;cution. </p></li><li class="listitem"><p>Dans la vue <span class="bold"><strong>Debug Run</strong></span>, cliquez sur le
							bouton <span class="bold"><strong>Traces Debug</strong></span> pour voir la
							progression du traitement des donn&eacute;es.</p></li></ul></div><p>Pour une meilleure visibilit&eacute;, il est possible d&#8217;agrandir la vue du Job dans
					l&#8217;&eacute;diteur graphique lors de l&#8217;ex&eacute;cution en double-cliquant simplement sur
					l&#8217;onglet portant le nom du Job. </p><div class="mediaobject"><img src="../images/UseCase_tMap6-9.png"></div><p>Les donn&eacute;es de r&eacute;f&eacute;rence sont charg&eacute;es &agrave; nouveau pour chaque ligne du flux
					principal qui correspond &agrave; la contrainte d&#8217;&acirc;ge. Toutes les correspondances &agrave; la
					condition <span class="emphasis"><em>age</em></span> sont r&eacute;cup&eacute;r&eacute;es &agrave; partir des lignes de la
					table de r&eacute;f&eacute;rence et regroup&eacute;es dans le flux de sortie. </p><p>Si vous v&eacute;rifiez les donn&eacute;es contenues dans la table
						<span class="emphasis"><em>people_mixandmatch </em></span>nouvellement cr&eacute;&eacute;e, vous y trouverez
					toutes les copies bas&eacute;es sur <span class="emphasis"><em>age</em></span> correspondant aux
					diff&eacute;rentes personnes dont l&#8217;&acirc;ge vaut&nbsp;40 ou 60, ainsi que les villes o&ugrave; ils sont
					all&eacute;s. </p><div class="mediaobject"><img src="../images/UseCase_tmap6-10.png"></div></div><div class="section" title="Sc&eacute;nario 7&nbsp;: Mapping avec des tables de sortie"><div class="titlepage"><div><div><h3 class="title"><a name="Raa21819"></a>Sc&eacute;nario 7&nbsp;: Mapping avec des tables de sortie</h3></div></div></div><p>Le sc&eacute;nario suivant d&eacute;crit un Job traitant des flux de rejet sans les s&eacute;parer
					du flux principal. </p><div class="mediaobject"><img src="../images/UseCase_tmap7-1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Dans la vue <span class="bold"><strong>Repository</strong></span>, cliquez sur
								<span class="bold"><strong>Metadata</strong></span> &gt; <span class="bold"><strong>File delimited</strong></span>. Glissez-d&eacute;posez la m&eacute;tadonn&eacute;e
								<span class="emphasis"><em>customers</em></span> dans l&#8217;espace de mod&eacute;lisation
							graphique. </p><p>La m&eacute;tadonn&eacute;e&nbsp;<span class="italic">customers</span> contient
							des informations relatives aux clients, comme leur ID, leur nom, leur
							adresse, etc.</p><p>Pour plus d&#8217;informations concernant la centralisation des m&eacute;tadonn&eacute;es,
							consultez&nbsp;le <span class="bold"><strong>Guide Utilisateur</strong></span> de
								<span class="bluebold">Talend Open Studio</span>.</p></li><li class="listitem"><p>Une bo&icirc;te de dialogue s&#8217;ouvre et vous demande de choisir le type de
							composant que vous souhaitez utiliser. S&eacute;lectionnez le composant
								<span class="bold"><strong>tFileInputDelimited</strong></span> et cliquez sur
								<span class="bold"><strong>OK</strong></span>.</p></li><li class="listitem"><p>Ensuite, glissez-d&eacute;posez la m&eacute;tadonn&eacute;e <span class="emphasis"><em>states</em></span>.
							S&eacute;lectionnez le m&ecirc;me composant dans la bo&icirc;te de dialogue et cliquez sur
								<span class="bold"><strong>OK</strong></span>. </p><p>La m&eacute;tadonn&eacute;e <span class="emphasis"><em>states</em></span> contient l&#8217;identifiant de
							l&#8217;&eacute;tat, ainsi que son nom.</p></li><li class="listitem"><p>Glissez-d&eacute;posez de la <span class="bold"><strong>Palette</strong></span> dans
							l&#8217;espace de mod&eacute;lisation graphique un <span class="bold"><strong>tMap</strong></span> et deux composants <span class="bold"><strong>tLogRow</strong></span>.</p></li><li class="listitem"><p>Reliez le composant <span class="emphasis"><em>customers</em></span> au <span class="bold"><strong>tMap</strong></span> &agrave; l&#8217;aide d&#8217;un lien <span class="bold"><strong>Row </strong></span>&gt; <span class="bold"><strong>Main</strong></span>.</p></li><li class="listitem"><p>Reliez le composant <span class="emphasis"><em>states</em></span> au <span class="bold"><strong>tMap</strong></span>, en utilisant un lien <span class="bold"><strong>Row </strong></span>&gt;<span class="bold"><strong>
								Main</strong></span>. Il sera automatiquement d&eacute;fini comme <span class="bold"><strong>Lookup</strong></span>.</p></li><li class="listitem"><p>Double-cliquez sur le composant <span class="bold"><strong>tMap</strong></span>
							afin d&#8217;ouvrir le <span class="bold"><strong>Map Editor</strong></span>. </p></li><li class="listitem"><p>Glissez-d&eacute;posez la colonne <span class="emphasis"><em>idState</em></span> dans la
							premi&egrave;re ligne de la seconde table, afin de cr&eacute;er une jointure.</p></li><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>tMap settings</strong></span>
							et s&eacute;lectionnez <span class="bold"><strong>Inner Join</strong></span> pour
								<span class="bold"><strong>Join Model</strong></span>.</p></li><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>Property
								settings</strong></span> en haut de la zone d&#8217;entr&eacute;e afin d&#8217;ouvrir la
							bo&icirc;te de dialogue <span class="bold"><strong>[Property settings]
							</strong></span>et d&eacute;cochez la case <span class="bold"><strong>Die on
								error</strong></span> si vous souhaitez g&eacute;rer les erreurs d&#8217;ex&eacute;cution. </p><p>La table <span class="bold"><strong>ErrorReject</strong></span> est maintenant
							cr&eacute;&eacute;e.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tMap7-2_TOS.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnez les
								colonnes&nbsp;<span class="emphasis"><em>id</em></span>,&nbsp;<span class="emphasis"><em>idState</em></span>,&nbsp;<span class="emphasis"><em>RegTime</em></span>
								et&nbsp;<span class="emphasis"><em>RegisterTime</em></span> de la table d&#8217;entr&eacute;e et
							d&eacute;posez-les dans la table <span class="bold"><strong>ErrorReject</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tMap7-3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>[+]</strong></span> en haut &agrave;
							droite de l&#8217;&eacute;diteur afin d&#8217;ajouter une table de sortie. Dans la bo&icirc;te de
							dialogue qui s&#8217;ouvre, s&eacute;lectionnez<span class="bold"><strong> New
								output</strong></span>. Dans le champ &agrave; c&ocirc;t&eacute;, saisissez le nom de la
								table,&nbsp;<span class="emphasis"><em>out1</em></span>. Cliquez sur <span class="bold"><strong>OK</strong></span>.</p></li><li class="listitem"><p>D&eacute;posez les colonnes suivantes des tables d&#8217;entr&eacute;e dans la
								table&nbsp;<span class="emphasis"><em>out1</em></span>&nbsp;:&nbsp;<span class="emphasis"><em>id</em></span>,
								<span class="emphasis"><em>CustomerName</em></span>, <span class="emphasis"><em>idState</em></span>
								et&nbsp;<span class="emphasis"><em>LabelState</em></span>.</p></li><li class="listitem"><p>Ajoutez deux colonnes&nbsp;<span class="emphasis"><em>RegTime</em></span>
								et&nbsp;<span class="emphasis"><em>RegisterTime</em></span> &agrave; la fin de la
								colonne&nbsp;<span class="emphasis"><em>out1</em></span> et param&eacute;trez leur format de
							date&nbsp;: <code class="code">&#8220;dd/MM/yyyy HH:mm&#8221;</code> et <code class="code">&#8220;yyyy-MM-dd
								HH:mm:ss.SSS&#8221;</code>, respectivement.</p></li><li class="listitem"><p>Cliquez sur le champ <span class="bold"><strong>Expression</strong></span>
								pour&nbsp;<span class="emphasis"><em>RegTime</em></span> et appuyez sur <span class="bold"><strong>Ctrl+Espace</strong></span> pour afficher la liste
							d&#8217;autocompl&eacute;tion. S&eacute;lectionnez <code class="code">TalendDate.parseDate</code>.
							Changez le mod&egrave;le en <code class="code">("dd/MM/yyyy
							HH:mm",row1.RegTime)</code>.</p></li><li class="listitem"><p>R&eacute;p&eacute;tez l&#8217;op&eacute;ration pour la seconde colonne, mais changez le mod&egrave;le en
								<code class="code">("yyyy-MM-dd HH:mm:ss.SSS",row1.RegisterTime)</code>.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tMap7-4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>[+]</strong></span> en haut &agrave;
							droite de l&#8217;&eacute;diteur, afin d&#8217;ajouter une table de sortie. Dans la bo&icirc;te
							de dialogue qui s&#8217;ouvre, s&eacute;lectionnez <span class="bold"><strong>Create join
								table from</strong></span>, choisissez <span class="emphasis"><em>Out1</em></span> et
							donnez le nom&nbsp;<span class="emphasis"><em>rejectInner</em></span>. Cliquez sur <span class="bold"><strong>OK</strong></span>.</p></li><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>tMap settings</strong></span>
							et s&eacute;lectionnez <span class="bold"><strong>true</strong></span> pour <span class="bold"><strong>Catch lookup inner join reject</strong></span>, afin de g&eacute;rer
							les rejets.</p></li><li class="listitem"><p>D&eacute;posez les
								colonnes&nbsp;<span class="emphasis"><em>id</em></span>,&nbsp;<span class="emphasis"><em>CustomerName</em></span>
								et&nbsp;<span class="emphasis"><em>idState</em></span> des tables d&#8217;entr&eacute;e dans les
							colonnes correspondantes de la
							table&nbsp;<span class="emphasis"><em>rejectInner</em></span>.</p></li><li class="listitem"><p>Cliquez dans le champ <span class="bold"><strong>Expression</strong></span> de
							la colonne <span class="emphasis"><em>LabelState</em></span> et saisissez
								<code class="code">&#8220;UNKNOWN&#8221;</code>.</p></li><li class="listitem"><p>Cliquez dans le champ <span class="bold"><strong>Expression</strong></span> de
							la colonne <span class="emphasis"><em>RegTime</em></span>, appuyez sur <span class="bold"><strong>Ctrl+Espace</strong></span>, et s&eacute;lectionnez <code class="code">TalendDate.parseDate</code>. Changez le mod&egrave;le en
								<code class="code">("dd/MM/yyyy HH:mm",row1.RegTime.)</code></p></li><li class="listitem"><p>Dans la colonne <span class="emphasis"><em>RegisterTime</em></span>, appuyez sur
								<span class="bold"><strong>Ctrl+Espace</strong></span>, et s&eacute;lectionnez
									<code class="code">TalendDate.parseDate</code>, mais changez le mod&egrave;le en
								<code class="code">("yyyy-MM-dd HH:mm:ss.SSS",row1.RegisterTime)</code>.</p><p>Si les donn&eacute;es de la ligne <span class="emphasis"><em>row1</em></span> ont un mod&egrave;le
							incorrect, elles seront retourn&eacute;es par le flux
								<span class="emphasis"><em>ErrorReject</em></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tMap7-4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur <span class="bold"><strong>OK</strong></span> afin de valider les
							modifications et fermer l&#8217;&eacute;diteur. </p></li><li class="listitem"><p>Double-cliquez sur le composant <span class="bold"><strong>tLogRow</strong></span> afin d&#8217;afficher sa vue <span class="bold"><strong>Component</strong></span>.</p></li><li class="listitem"><p>Cliquez sur <span class="bold"><strong>Sync columns</strong></span> pour
							r&eacute;cup&eacute;rer la structure du sch&eacute;ma depuis le mapper si n&eacute;cessaire.</p></li><li class="listitem"><p>Dans la zone <span class="bold"><strong>Mode</strong></span>, s&eacute;lectionnez
								<span class="bold"><strong>Table.</strong></span>
						</p></li><li class="listitem"><p>R&eacute;p&eacute;tez l&#8217;op&eacute;ration avec le second <span class="bold"><strong>tLogRow</strong></span>.</p></li><li class="listitem"><p>Sauvegardez votre Job et appuyez sur <span class="bold"><strong>F6</strong></span> pour l&#8217;ex&eacute;cuter.</p><p>La console de la vue <span class="bold"><strong>Run</strong></span> affiche les
							flux de sortie principal et le flux&nbsp;<span class="emphasis"><em>ErrorReject</em></span>. Le
							flux de sortie principal unifie les donn&eacute;es valides et les rejets Inner
							Join, alors que le flux&nbsp;<span class="emphasis"><em>ErrorReject</em></span> contient les
							informations des erreurs concernant les lignes ayant un format de date
							non analysable </p></li></ul></div><div class="mediaobject"><img src="../images/UseCase_tMap7-5.png"></div></div></div></body></html>