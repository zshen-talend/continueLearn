<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tFileOutputMSXML</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch10.html" title="Chapitre&nbsp;10.&nbsp;Composants File"><link rel="prev" href="tFileOutputMSPositional.html" title="tFileOutputMSPositional"><link rel="next" href="tFileOutputPositional.html" title="tFileOutputPositional"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="FR" class="section" title="tFileOutputMSXML"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tFileOutputMSXML"></a>tFileOutputMSXML</h2></div></div></div><div class="mediaobject"><img src="../images/tFileOutputMSXML_icon32.png"></div><a name="Xaa3477995"></a><div class="section" title="Propri&eacute;t&eacute;s du tFileOutputMSXML"><div class="titlepage"><div><div><h3 class="title"><a name="d0e209727"></a>Propri&eacute;t&eacute;s du tFileOutputMSXML</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Famille de composant</strong></span>
									</p>
								</td><td valign="top">
									<p>File/Output</p>
								</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Fonction</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Le composant <span class="bold"><strong>tFileOutputMSXML</strong></span> permet d&#8217;&eacute;crire des sch&eacute;mas
										multiples dans un fichier XML structur&eacute;.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Objectif</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p><span class="bold"><strong>tFileOutputMSXML</strong></span> cr&eacute;e un
										fichier XML multi&nbsp;structure complexe &agrave; l&#8217;aide de la
										structure des donn&eacute;es (sch&eacute;mas) venant des diff&eacute;rents flux
										d&#8217;entr&eacute;e de type <span class="bold"><strong>Row</strong></span>.
									</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>File Name</em></span>
									</p>
								</td><td valign="top">
									<p>Chemin d&#8217;acc&egrave;s et nom du fichier &agrave; cr&eacute;er, et/ou variable &agrave;
										utiliser.</p>
									<p> </p>
									<p> Pour plus d&#8217;informations concernant l&#8217;utilisation et la
										d&eacute;finition de variables, consultez le<span class="bold"><strong>Guide utilisateur</strong></span> de <span class="bluebold">Talend Open Studio</span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Configure XML tree</em></span>
									</p>
								</td><td valign="top">
									<p>Ouvre l&#8217;interface d&eacute;di&eacute;e pour vous aider &agrave; mettre en place
										le mapping XML. Pour plus de d&eacute;tails sur l&#8217;interface, voir
											<a class="xref" href="tFileOutputMSXML.html#Raa56979" title="D&eacute;finir un arbre XML Multisch&eacute;ma">la section intitul&eacute;e &laquo;&nbsp;D&eacute;finir un arbre XML Multisch&eacute;ma&nbsp;&raquo;</a>.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Advanced settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Create directory if not exists</em></span>
									</p>
								</td><td valign="top">
									<p>Cette case est coch&eacute;e par d&eacute;faut. Cette option permet de
										cr&eacute;er le dossier contenant le fichier d&eacute;limit&eacute; de sortie
										s&#8217;il n&#8217;existe pas d&eacute;j&agrave;.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Advanced separator (for numbers)</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette option pour modifier les s&eacute;parateurs utilis&eacute;s
										pour les nombres&nbsp;:</p>
									<p><span class="bold"><strong>Thousands separator</strong></span>&nbsp;:
										d&eacute;finissez le s&eacute;parateur utilis&eacute; pour les milliers.</p>
									<p><span class="bold"><strong>Decimal separator</strong></span>&nbsp;:
										d&eacute;finissez le s&eacute;parateur utilis&eacute; pour les d&eacute;cimaux. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Encoding</em></span>
									</p>
								</td><td valign="top">
									<p>S&eacute;lectionnez l&#8217;encodage &agrave; partir de la liste ou
										s&eacute;lectionnez <span class="bold"><strong>Custom</strong></span> et
										d&eacute;finissez-le manuellement. Ce champ est obligatoire pour la
										manipulation des donn&eacute;es de base de donn&eacute;es.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Don&#8217;t generate empty file</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour annuler la g&eacute;n&eacute;ration du fichier si
										celui-ci est vide. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>tStatCatcher Statistics</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour collecter les m&eacute;tadonn&eacute;es de
										process du Job, aussi bien au niveau du Job qu&#8217;au niveau de
										chaque composant. </p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Limitation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>n/a</p>
								</td></tr></tbody></table></div><div class="section" title="D&eacute;finir un arbre XML Multisch&eacute;ma"><div class="titlepage"><div><div><h4 class="title"><a name="Raa56979"></a>D&eacute;finir un arbre XML Multisch&eacute;ma</h4></div></div></div><p>Double-cliquez sur le composant <span class="bold"><strong>tFileOutputMSXML</strong></span> pour ouvrir l&#8217;interface d&eacute;di&eacute;e ou cliquez
						sur le bouton <span class="bold"><strong>[...]</strong></span> de l&#8217;onglet <span class="bold"><strong>Basic settings </strong></span>de la vue <span class="bold"><strong>Component</strong></span>. </p><div class="mediaobject"><img src="../images/MSXMLtree_adv_mapping1.png"></div><p>La liste d&eacute;roulante de la zone <span class="bold"><strong>Linker
							source</strong></span>, &agrave; gauche de l&#8217;interface, contient tous les sch&eacute;mas
						d&#8217;entr&eacute;e qui peuvent &ecirc;tre ajout&eacute;s au fichier XML multisch&eacute;ma de sortie (&agrave; la
						condition que plusieurs flux d&#8217;entr&eacute;e soient connect&eacute;s au composant
							<span class="bold"><strong>tFileOutputMSXML</strong></span>).</p><p>Dans le champ <span class="bold"><strong>Schema List</strong></span>, on retrouve la
						liste de toutes les colonnes r&eacute;cup&eacute;r&eacute;es du flux d&#8217;entr&eacute;e de la s&eacute;lection. </p><p>Sur la droite de l&#8217;interface, d&eacute;finissez la structure XML que vous
						souhaitez obtenir dans le fichier XML en sortie. </p><p>Vous pouvez la cr&eacute;er manuellement ou tout simplement importer la structure
						XML. Puis importez les colonnes de chaque sch&eacute;ma d&#8217;entr&eacute;e de la s&eacute;lection
						dans l&#8217;&eacute;l&eacute;ment de l&#8217;arbre XML correspondant. </p><div class="section" title="Importer un arbre XML"><div class="titlepage"><div><div><h5 class="title"><a name="d0e210005"></a>Importer un arbre XML</h5></div></div></div><p>Le meilleur moyen de renseigner l&#8217;arbre XML est d&#8217;importer un fichier
							XML bien form&eacute;.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Dans la colonne <span class="bold"><strong>XML Tree</strong></span>,
									cliquez une fois sur le champ <span class="bold"><strong>root
										tag</strong></span>, qui s&#8217;affiche par d&eacute;faut, pour le renommer.
								</p></li><li class="listitem"><p>Cliquez droit sur ce champ pour afficher le menu
									contextuel.</p></li><li class="listitem"><p>Dans le menu, s&eacute;lectionnez <span class="bold"><strong>Import XML
										tree</strong></span>.</p></li><li class="listitem"><p>S&eacute;lectionnez le fichier &agrave; importer et cliquez sur <span class="bold"><strong>OK</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/MSXMLtree_adv_mapping2.png"></div><p>La colonne <span class="bold"><strong>XML Tree</strong></span> est donc
							automatiquement renseign&eacute;e avec les bons &eacute;l&eacute;ments. Vous pouvez supprimer
							et ajouter des &eacute;l&eacute;ments ou des sous &eacute;l&eacute;ments &agrave; l&#8217;arbre&nbsp;: </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnez l&#8217;&eacute;l&eacute;ment ad&eacute;quat dans l&#8217;arbre.</p></li><li class="listitem"><p>Cliquez-droit pour faire appara&icirc;tre le menu contextuel.</p></li><li class="listitem"><p>S&eacute;lectionnez <span class="bold"><strong>Delete</strong></span> pour
									supprimer la s&eacute;lection de l&#8217;arbre ou s&eacute;lectionnez l&#8217;option
									ad&eacute;quate parmi les suivantes&nbsp;: <span class="bold"><strong>Add
										sub-element</strong></span>, <span class="bold"><strong>Add
										attribute</strong></span>, <span class="bold"><strong>Add
										namespace</strong></span> pour enrichir l&#8217;arbre.</p></li></ul></div></div><div class="section" title="Cr&eacute;er manuellement l&#8217;arbre XML"><div class="titlepage"><div><div><h5 class="title"><a name="d0e210065"></a>Cr&eacute;er manuellement l&#8217;arbre XML</h5></div></div></div><p>Si vous ne poss&eacute;dez pas de structure XML d&eacute;j&agrave; d&eacute;finie, vous pouvez la
							cr&eacute;er manuellement.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Dans la colonne <span class="bold"><strong>XML Tree</strong></span>,
									cliquez une fois sur le champ <span class="bold"><strong>root
										tag</strong></span>, qui s&#8217;affiche par d&eacute;faut, pour le renommer.
								</p></li><li class="listitem"><p>Cliquez-droit sur ce champ pour afficher le menu
									contextuel.</p></li><li class="listitem"><p>Dans le menu, s&eacute;lectionnez <span class="bold"><strong>Add
										sub-element</strong></span> pour cr&eacute;er le premier &eacute;l&eacute;ment de la
									structure. </p></li></ul></div><p>Vous pouvez aussi ajouter un attribut ou un &eacute;l&eacute;ment enfant &agrave; n&#8217;importe
							quel &eacute;l&eacute;ment de l&#8217;arbre ou supprimer n&#8217;importe quel &eacute;l&eacute;ment de
							l&#8217;arbre.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnez l&#8217;&eacute;l&eacute;ment ad&eacute;quat dans l&#8217;arbre que vous venez de
									cr&eacute;er.</p></li><li class="listitem"><p>Cliquez-droit &agrave; gauche du nom de l&#8217;&eacute;l&eacute;ment pour afficher le
									menu contextuel.</p></li><li class="listitem"><p>Dans le menu, s&eacute;lectionnez l&#8217;option ad&eacute;quate parmi les
									suivantes&nbsp;: <span class="bold"><strong>Add sub-element</strong></span>,
										<span class="bold"><strong>Add attribute</strong></span>, <span class="bold"><strong>Add namespace</strong></span> ou <span class="bold"><strong>Delete</strong></span>.</p></li></ul></div></div></div><div class="section" title="Mapping de donn&eacute;es XML &agrave; partir de sources multisch&eacute;ma"><div class="titlepage"><div><div><h4 class="title"><a name="d0e210113"></a>Mapping de donn&eacute;es XML &agrave; partir de sources multisch&eacute;ma</h4></div></div></div><p>Une fois votre arbre XML cr&eacute;&eacute;, s&eacute;lectionnez le premier sch&eacute;ma &agrave; mapper. </p><p>Vous pouvez alimenter chaque &eacute;l&eacute;ment ou sous-&eacute;l&eacute;ment XML avec les colonnes
						du flux d&#8217;entr&eacute;e dans la colonne <span class="bold"><strong>Related
							Column&nbsp;</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur l&#8217;une des entr&eacute;es de la colonne <span class="bold"><strong>Schema column name</strong></span>.</p></li><li class="listitem"><p>Glissez-la dans le sous-&eacute;l&eacute;ment correspondant &agrave; droite.</p></li><li class="listitem"><p>Rel&acirc;chez-la pour que le mapping soit effectif.</p></li></ul></div><div class="mediaobject"><img src="../images/MSXMLtree_adv_mapping3.png"></div><p>Une fl&egrave;che bleue appara&icirc;t pour illustrer ce mapping. S&#8217;il est disponible,
						utilisez le bouton <span class="bold"><strong>Auto-Map</strong></span> situ&eacute; en bas &agrave;
						gauche de l&#8217;interface, il permet d&#8217;effectuer cette op&eacute;ration
						automatiquement.</p><p>Vous pouvez d&eacute;connecter n&#8217;importe quel mapping de n&#8217;importe quel &eacute;l&eacute;ment
						de l&#8217;arbre XML&nbsp;:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnez l&#8217;&eacute;l&eacute;ment de l&#8217;arbre XML que vous souhaitez
								d&eacute;connecter de sa source respective.</p></li><li class="listitem"><p>Cliquez-droit &agrave; gauche de son nom pour afficher le menu
								contextuel.</p></li><li class="listitem"><p>S&eacute;lectionnez <span class="bold"><strong>Disconnect
								linker</strong></span>.</p></li></ul></div><p>La fl&egrave;che bleue dispara&icirc;t.</p></div><div class="section" title="D&eacute;finir le statut du n&#339;ud"><div class="titlepage"><div><div><h4 class="title"><a name="d0e210161"></a>D&eacute;finir le statut du n&#339;ud</h4></div></div></div><p>D&eacute;finir l&#8217;arbre XML et le transfert de donn&eacute;es ne suffit pas. Vous devez
						aussi d&eacute;finir les &eacute;l&eacute;ments sur lesquels la boucle est effectu&eacute;e <span class="bold"><strong>pour chacune des sources de la s&eacute;lection</strong></span> et, si
						n&eacute;cessaire, l&#8217;&eacute;l&eacute;ment &agrave; partir duquel le regroupement est effectu&eacute;.</p><div class="section" title="El&eacute;ment Boucle"><div class="titlepage"><div><div><h5 class="title"><a name="d0e210169"></a>El&eacute;ment Boucle</h5></div></div></div><p>L&#8217;&eacute;l&eacute;ment Boucle permet de d&eacute;finir l&#8217;&eacute;l&eacute;ment objet d&#8217;une it&eacute;ration.
							L&#8217;&eacute;l&eacute;ment Boucle est g&eacute;n&eacute;ralement un g&eacute;n&eacute;rateur de lignes.</p><p>Pour d&eacute;finir un &eacute;l&eacute;ment comme un &eacute;l&eacute;ment Boucle&nbsp;: </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnez l&#8217;&eacute;l&eacute;ment ad&eacute;quat dans l&#8217;arbre XML.</p></li><li class="listitem"><p>Cliquez-droit &agrave; gauche du nom de l&#8217;&eacute;l&eacute;ment pour afficher le
									menu contextuel.</p></li><li class="listitem"><p>S&eacute;lectionnez l&#8217;option <span class="bold"><strong>Set as Loop
										Element</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/MSXMLtree_adv_mapping4.png"></div><p>La colonne <span class="bold"><strong>Node Status</strong></span> affiche le
							nouveau statut s&eacute;lectionn&eacute;.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Il ne peut y avoir qu&#8217;un seul &eacute;l&eacute;ment Boucle &agrave; la fois.</p></td></tr></table></div></div><div class="section" title="El&eacute;ment Group"><div class="titlepage"><div><div><h5 class="title"><a name="d0e210200"></a>El&eacute;ment Group</h5></div></div></div><p>L&#8217;&eacute;l&eacute;ment Group est optionnel, il repr&eacute;sente un &eacute;l&eacute;ment constant sur
							lequel est effectu&eacute;e une fonction Groupby. L&#8217;&eacute;l&eacute;ment Group ne peut &ecirc;tre
							d&eacute;fini que si un &eacute;l&eacute;ment Boucle a &eacute;t&eacute; pr&eacute;alablement d&eacute;fini.</p><p>Lorsque vous utilisez un &eacute;l&eacute;ment Group, les lignes doivent &ecirc;tre tri&eacute;es
							pour pouvoir &ecirc;tre regroup&eacute;es par le noeud s&eacute;lectionn&eacute;.</p><p>Pour d&eacute;finir un &eacute;l&eacute;ment comme &eacute;l&eacute;ment Group&nbsp;: </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionnnez l&#8217;&eacute;l&eacute;ment ad&eacute;quat dans l&#8217;arbre XML.</p></li><li class="listitem"><p>Cliquez-droit &agrave; gauche du nom de l&#8217;&eacute;l&eacute;ment pour afficher le
									menu contextuel.</p></li><li class="listitem"><p>S&eacute;lectionnez l&#8217;option <span class="bold"><strong>Set as Group
										Element</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/MSXMLtree_adv_mapping5.png"></div><p>La colonne <span class="bold"><strong>Node Status</strong></span> affiche le
							nouveau statut s&eacute;lectionn&eacute; et tout autre statut de regroupement est
							automatiquement d&eacute;fini, si n&eacute;cessaire. </p><p>Une fois le mapping termin&eacute;, cliquez sur <span class="bold"><strong>OK</strong></span> pour valider les param&egrave;tres et continuez la
							configuration de votre Job.</p></div></div></div><div class="section" title="Sc&eacute;nario associ&eacute;"><div class="titlepage"><div><div><h3 class="title"><a name="d0e210235"></a>Sc&eacute;nario associ&eacute;</h3></div></div></div><p>Aucun sc&eacute;nario n&#8217;est disponible pour ce composant.</p></div></div></body></html>