<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tContextLoad</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch13.html" title="Chapitre&nbsp;13.&nbsp;Composants Misc"><link rel="prev" href="tContextDump.html" title="tContextDump"><link rel="next" href="tFixedFlowInput.html" title="tFixedFlowInput"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="FR" class="section" title="tContextLoad"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tContextLoad"></a>tContextLoad</h2></div></div></div><div class="mediaobject"><img src="../images/tContextLoad.png"></div><div class="section" title="Propri&eacute;t&eacute;s du tContextLoad"><div class="titlepage"><div><div><h3 class="title"><a name="d0e239243"></a>Propri&eacute;t&eacute;s du tContextLoad</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Famille de composant</strong></span>
									</p>
								</td><td valign="top">
									<p>Misc</p>
								</td><td valign="top"> </td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Fonction</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Le composant <span class="bold"><strong>tContextLoad</strong></span>
										modifie dynamiquement les valeurs du contexte actif.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Objectif</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Le <span class="bold"><strong>tContextLoad</strong></span> permet de
										charger un contexte &agrave; partir d&#8217;un flux entrant.</p>
									<p>Ce composant effectue aussi deux contr&ocirc;les. Il pr&eacute;vient
										lorsque les param&egrave;tres d&eacute;finis dans le flux entrant ne sont
										pas d&eacute;finis dans le contexte. Il avertit &eacute;galement lorsque
										la valeur d&#8217;un contexte n&#8217;est pas initialis&eacute;e dans le flux
										entrant.</p>
									<p>Notez que ces avertissements ne bloquent pas le
										traitement.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p><span class="emphasis"><em>Schema</em></span> et <span class="emphasis"><em>Edit
											Schema</em></span></p>
								</td><td valign="top">
									<p>Le sch&eacute;ma du composant <span class="bold"><strong>tContextLoad</strong></span> doit &ecirc;tre compos&eacute; de deux
										colonnes, l&#8217;une contenant le nom du param&egrave;tre et la deuxi&egrave;me
										contenant la valeur du param&egrave;tre &agrave; charger.</p>
									<p>Un sch&eacute;ma est une description de lignes, i.e., il d&eacute;finit
										le nombre de champ qui sont trait&eacute;s et pass&eacute;s au composant
										suivant. Le sch&eacute;ma est soit local (built-in) soit distant
										dans le Repository.</p>
									<p>Cliquez sur <span class="bold"><strong>Edit Schema</strong></span>
										pour modifier le sch&eacute;ma. Notez que si vous modifiez le
										sch&eacute;ma, les propri&eacute;t&eacute;s deviennent automatiquement
										built-in.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Built-in</strong></span>&nbsp;: Le sch&eacute;ma est
										cr&eacute;&eacute; et conserv&eacute; ponctuellement pour ce composant seulement.
										Voir &eacute;galement&nbsp;le <span class="bold"><strong>Guide
											utilisateur</strong></span>
										<span class="bluebold">Talend Open Studio</span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p><span class="bold"><strong>Repository&nbsp;</strong></span>: Le sch&eacute;ma
										existe d&eacute;j&agrave; et est stock&eacute; dans le Repository. Ainsi, il peut
										&ecirc;tre r&eacute;utilis&eacute; dans divers projets et Jobs. Voir
										&eacute;galement&nbsp;le <span class="bold"><strong>Guide
											utilisateur</strong></span> de <span class="bluebold">Talend Open Studio</span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>If a variable loaded, but not in the
											context</em></span>
									</p>
								</td><td valign="top">
									<p>Si une variable est charg&eacute;e mais n&#8217;appara&icirc;t pas dans le
										contexte, choisissez comment doit s&#8217;afficher la
										notification. Sous forme d&#8217;erreur (<span class="bold"><strong>Error</strong></span>), de warning (<span class="bold"><strong>warning</strong></span>), ou d&#8217;information (<span class="bold"><strong>info</strong></span>).</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>If a variable in the context, but not
											loaded</em></span>
									</p>
								</td><td valign="top">
									<p>Si une variable appara&icirc;t dans le contexte mais n&#8217;est pas
										charg&eacute;e, choisissez comment doit s&#8217;afficher la notification.
										Sous forme d&#8217;erreur (<span class="bold"><strong>Error</strong></span>), de warning (<span class="bold"><strong>warning</strong></span>), ou d&#8217;information (<span class="bold"><strong>info</strong></span>).</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Print operations</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour afficher les param&egrave;tres de contexte
										dans la vue <span class="bold"><strong>Run</strong></span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Disable errors</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour ne pas afficher d&#8217;erreur.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Disable warnings</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour ne pas afficher de warning.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Disable infos</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour ne pas afficher
										d&#8217;information.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Die on error</em></span>
									</p>
								</td><td valign="top">
									<p>Cette case est coch&eacute;e par d&eacute;faut et stoppe le Job en cas
										d&#8217;erreur. D&eacute;cochez cette case pour terminer le traitement
										avec les lignes sans erreurs, et les lignes contenant les
										erreurs seront ignor&eacute;es.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Advanced settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="italic">tStatCatcher Statistics</span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour collecter les donn&eacute;es de log au
										niveau du composant. </p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Utilisation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Ce composant s&#8217;appuie sur le flux de donn&eacute;es pour charger
										les valeurs de contexte &agrave; utiliser. Ainsi, il requiert un
										composant d&#8217;entr&eacute;e et ne peut pas &ecirc;tre un composant de
										d&eacute;but.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Limitation</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Le <span class="bold"><strong>tContextLoad</strong></span> ne cr&eacute;e
										aucune variable qui n&#8217;a pas &eacute;t&eacute; d&eacute;finie dans le contexte par
										d&eacute;faut.</p>
								</td></tr></tbody></table></div></div><div class="section" title="Sc&eacute;nario&nbsp;: Utiliser un contexte dynamique lors d&#8217;un insert dans une base de donn&eacute;es MySQL"><div class="titlepage"><div><div><h3 class="title"><a name="Raa15947"></a>Sc&eacute;nario&nbsp;: Utiliser un contexte dynamique lors d&#8217;un insert dans une base de
					donn&eacute;es MySQL</h3></div></div></div><p>Ce sc&eacute;nario est compos&eacute; de deux sous-Jobs. Le premier permet de charger
					dynamiquement des param&egrave;tres de contexte et le deuxi&egrave;me utilise ces param&egrave;tres
					charg&eacute;s pour afficher le contenu d&#8217;une base de donn&eacute;es.</p><div class="mediaobject"><img src="../images/Use_Case_tContextLoad1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez et d&eacute;posez les composants&nbsp;: <span class="bold"><strong>tFilelist</strong></span>, <span class="bold"><strong>tFileInputDelimited</strong></span>, <span class="bold"><strong>tContextLoad</strong></span> pour le premier sous-Job.</p></li><li class="listitem"><p>Et cliquez et d&eacute;posez les composants <span class="bold"><strong>tMysqlInput</strong></span> et <span class="bold"><strong>tLogRow</strong></span>
							pour le deuxi&egrave;me.</p></li><li class="listitem"><p>Connectez-les comme indiqu&eacute; sur le sch&eacute;ma ci-dessus.</p></li><li class="listitem"><p>Cr&eacute;ez autant de fichiers d&eacute;limit&eacute;s qu&#8217;il y a de contextes diff&eacute;rents
							et conservez-les dans un r&eacute;pertoire sp&eacute;cifique appel&eacute;
								<span class="emphasis"><em>Contexts</em></span>. Dans ce sc&eacute;nario,
								<span class="emphasis"><em>test.txt</em></span> contient les informations de connexion
							&agrave; la base de donn&eacute;es locale de test et <span class="emphasis"><em>prod.txt</em></span>
							contient les informations de connexion de la base de donn&eacute;es distante de
							production.</p></li><li class="listitem"><p>Chaque fichier est constitu&eacute; de deux champs contenant le nom du
							param&egrave;tre et sa valeur correspondante, en fonction du contexte.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tContextLoad2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Dans l&#8217;onglet <span class="bold"><strong>Basic settings</strong></span> du
							composant <span class="bold"><strong>tFileList</strong></span>, s&eacute;lectionnez le
							r&eacute;pertoire <span class="emphasis"><em>contexts</em></span> dans lequel les deux fichiers
								<span class="emphasis"><em>test</em></span> et <span class="emphasis"><em>prod</em></span> seront
							stock&eacute;s.</p></li><li class="listitem"><p>Dans l&#8217;onglet <span class="bold"><strong>Basic settings</strong></span> du
							composant <span class="bold"><strong>tFileInputDelimited</strong></span>, dans le
							champ <span class="bold"><strong>File Name</strong></span>, appuyez sur <span class="bold"><strong>Ctrl+Espace</strong></span> pour acc&eacute;der &agrave; la liste des
							variables globales. S&eacute;lectionnez
								<code class="code">tFileList_1.CURRENT_FILEPATH</code> qui permet de faire une
							boucle sur le r&eacute;pertoire contenant les fichiers de contexte.</p></li><li class="listitem"><p>D&eacute;finissez le sch&eacute;ma manuellement (Built-in) en cliquant sur le bouton
								<span class="bold"><strong>Edit schema</strong></span>. Il contient deux
							colonnes&nbsp;: <span class="emphasis"><em>Key</em></span> et <span class="emphasis"><em>Value</em></span>,
							correspondant respectivement au param&egrave;tre et sa valeur.</p></li><li class="listitem"><p>Acceptez la propagation du sch&eacute;ma d&eacute;fini au composant suivant
								(<span class="bold"><strong>tContextLoad</strong></span>).</p></li><li class="listitem"><p>Pour ce sc&eacute;nario, cochez la case <span class="bold"><strong>Print
								operations</strong></span> pour afficher les param&egrave;tres de contexte
							utilis&eacute;s dans la vue <span class="bold"><strong>Run</strong></span>.</p></li><li class="listitem"><p>Puis double-cliquez sur le composant <span class="bold"><strong>tMysqlInput</strong></span> pour acc&eacute;der &agrave; ses propri&eacute;t&eacute;s dans l&#8217;onget
								<span class="bold"><strong>Basic settings</strong></span>.</p></li><li class="listitem"><p>Pour chacune des valeurs stock&eacute;es dans le fichier de contexte, appuyez
							sur <span class="bold"><strong>F5</strong></span> et d&eacute;finissez le param&egrave;tre de
							contexte devant &ecirc;tre d&eacute;fini par l&#8217;utilisateur. Par exemple, le champ
								<span class="bold"><strong>Host</strong></span> a pour valeur de param&egrave;tre
								<code class="code">context.host</code>, dont le nom de param&egrave;tre est
								<span class="emphasis"><em>host</em></span> dans le fichier de contexte. Sa valeur
							actuelle est <span class="emphasis"><em>talend-dbms</em></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tContextLoad4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Puis dans le champ <span class="bold"><strong>Schema Type</strong></span>,
							renseignez les informations sur le sch&eacute;ma. Si le sch&eacute;ma est stock&eacute; dans
							le noeud <span class="bold"><strong>Metadata</strong></span> du <span class="bold"><strong>Repository</strong></span> sous forme de m&eacute;tadonn&eacute;e,
							s&eacute;lectionnez-le apr&egrave;s avoir s&eacute;lectionn&eacute; l&#8217;option <span class="bold"><strong>Repository</strong></span>.</p></li><li class="listitem"><p>Dans le champ <span class="bold"><strong>Query</strong></span>, saisissez la
							requ&ecirc;te SQL devant &ecirc;tre ex&eacute;cut&eacute;e sur la table sp&eacute;cifi&eacute;e. Dans ce Job,
							effectuez un simple SELECT des colonnes de la table, qui seront ensuite
							affich&eacute;es dans l&#8217;onglet <span class="bold"><strong>Run</strong></span> gr&acirc;ce au
							composant <span class="bold"><strong>tLogRow</strong></span>.</p></li><li class="listitem"><p>Enfin, appuyez sur <span class="bold"><strong>F6</strong></span> pour ex&eacute;cuter
							le Job.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tContextLoad5.png"></div><p>Les param&egrave;tres de contexte et les valeurs s&eacute;lectionn&eacute;s dans la table sont
					affich&eacute;s dans la console <span class="bold"><strong>Run</strong></span>.</p></div></div></body></html>