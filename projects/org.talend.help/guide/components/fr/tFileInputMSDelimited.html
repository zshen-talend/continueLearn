<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tFileInputMSDelimited</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="index.html" title="Talend Open Studio"><link rel="up" href="ch10.html" title="Chapitre&nbsp;10.&nbsp;Composants File"><link rel="prev" href="tFileInputMail.html" title="tFileInputMail"><link rel="next" href="tFileInputMSPositional.html" title="tFileInputMSPositional"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="FR" class="section" title="tFileInputMSDelimited"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tFileInputMSDelimited"></a>tFileInputMSDelimited</h2></div></div></div><div class="mediaobject"><img src="../images/tFileInputMSDelimited_icon32.png"></div><a name="Xaa3475734"></a><div class="section" title="Propri&eacute;t&eacute;s du tFileInputMSDelimited"><div class="titlepage"><div><div><h3 class="title"><a name="d0e201029"></a>Propri&eacute;t&eacute;s du tFileInputMSDelimited</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
									<p>
										<span class="bold"><strong>Famille du composant</strong></span>
									</p>
								</td><td valign="top">
									<p>File/Input</p>
								</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Fonction</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Le composant <span class="bold"><strong>tFileInputMSDelimited</strong></span> permet de lire des
										fichiers d&eacute;limit&eacute;s multi&nbsp;structure complexes. </p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Objectif</strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Le <span class="bold"><strong>tFileInputMSDelimited</strong></span>
										ouvre le fichier multi&nbsp;structure complexe, en lit la
										structure (sch&eacute;mas) puis utilise des liens de type <span class="bold"><strong>Row</strong></span> pour envoyer les champs, tels
										qu&#8217;ils ont &eacute;t&eacute; d&eacute;finis dans les diff&eacute;rents sch&eacute;mas, vers les
										composants suivants dans le Job. </p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Basic settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Multi Schema Editor</em></span>
									</p>
								</td><td valign="top">
									<p>L&#8217;&eacute;diteur de sch&eacute;mas <span class="bold"><strong>[Multi Schema
											Editor]</strong></span> permet de construire et de configurer
										le flux de donn&eacute;es dans un fichier d&eacute;limit&eacute; multi&nbsp;structure
										pour pouvoir associer un sch&eacute;ma pour chaque sortie. </p>
									<p>Pour plus d&#8217;informations, consultez&nbsp;<a class="xref" href="tFileInputMSDelimited.html#Raa13068" title="L&#8217;&eacute;diteur de sch&eacute;mas Multi Schema Editor">la section intitul&eacute;e &laquo;&nbsp;L&#8217;&eacute;diteur de sch&eacute;mas Multi Schema Editor&nbsp;&raquo;</a>. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Output</em></span>
									</p>
								</td><td valign="top">
									<p>Les sch&eacute;mas d&eacute;finis dans l&#8217;&eacute;diteur de sch&eacute;mas <span class="bold"><strong>[Multi Schema Editor]</strong></span>, ainsi que
										les types d&#8217;enregistrements correspondants, s&#8217;affichent
										automatiquement dans le tableau <span class="bold"><strong>Output</strong></span>.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Die on error</em></span>
									</p>
								</td><td valign="top">
									<p>Cette case est coch&eacute;e par d&eacute;faut et stoppe le Job en cas
										d&#8217;erreur. D&eacute;cochez cette case pour terminer le traitement
										avec les lignes sans erreurs, et ignorer les lignes en
										erreur.</p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Advanced settings</strong></span>
									</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Trim all columns</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour supprimer les espaces en d&eacute;but et
										en fin de champ dans toutes les colonnes.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Validate date</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour v&eacute;rifier strictement le format de
										la date par rapport au sch&eacute;ma d&#8217;entr&eacute;e.</p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="emphasis"><em>Advanced separator (for numbers)</em></span>
									</p>
								</td><td valign="top">
									<p>Cochez cette option pour modifier les s&eacute;parateurs utilis&eacute;s
										pour les nombres&nbsp;:</p>
									<p><span class="bold"><strong>Thousands separator</strong></span>&nbsp;:
										d&eacute;finissez le s&eacute;parateur utilis&eacute; pour les milliers.</p>
									<p><span class="bold"><strong>Decimal separator</strong></span>&nbsp;:
										d&eacute;finissez le s&eacute;parateur utilis&eacute; pour les d&eacute;cimaux. </p>
								</td></tr><tr><td>
									<p>&nbsp;</p>
								</td><td valign="top">
									<p>
										<span class="italic">tStatCatcher Statistics</span>
									</p>
								</td><td valign="top">
									<p>Cochez cette case pour collecter les donn&eacute;es de log au
										niveau du composant. </p>
								</td></tr><tr><td valign="top">
									<p>
										<span class="bold"><strong>Utilisation </strong></span>
									</p>
								</td><td colspan="2" valign="top">
									<p>Utilisez ce composant pour lire des fichiers d&eacute;limit&eacute;s
										multi&nbsp;structure et d&eacute;finissez un s&eacute;parateur de champs pour
										diff&eacute;rencier les champs contenus dans ces fichiers. </p>
								</td></tr></tbody></table></div><div class="section" title="L&#8217;&eacute;diteur de sch&eacute;mas Multi Schema Editor"><div class="titlepage"><div><div><h4 class="title"><a name="Raa13068"></a>L&#8217;&eacute;diteur de sch&eacute;mas Multi Schema Editor</h4></div></div></div><p>L&#8217;&eacute;diteur <span class="bold"><strong>[Multi Shema Editor]</strong></span> vous
						permet de d&eacute;finir&nbsp;:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>le chemin d&#8217;acc&egrave;s au fichier source,</p></li><li class="listitem"><p>les propri&eacute;t&eacute;s du fichier source,</p></li><li class="listitem"><p>la structure des donn&eacute;es pour chacun des sch&eacute;mas de sortie.
							</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Lorsque vous d&eacute;finissez la structure de chaque sch&eacute;ma de sortie dans
							le <span class="bold"><strong>[Multi Schema Editor]</strong></span>, le nom des
							colonnes des diff&eacute;rentes structures s&#8217;affichent automatiquement dans la
							liste du sch&eacute;ma d&#8217;entr&eacute;e des composants qui suivent le <span class="bold"><strong>tFileInputMSDelimited</strong></span>. Vous pouvez cependant
							d&eacute;finir la structure des donn&eacute;es directement dans la vue <span class="bold"><strong>Basic settings</strong></span> de chacun de ces composants.
						</p></td></tr></table></div><p>Le <span class="bold"><strong>[Multi Schema Editor]</strong></span> permet &eacute;galement
						de s&eacute;lectionner un sch&eacute;ma qui servira de source (cl&eacute; primaire) aux donn&eacute;es
						entrantes, afin d&#8217;en assurer l&#8217;unicit&eacute;. L&#8217;&eacute;diteur utilise ce proc&eacute;d&eacute; de
						mapping pour associer tous les sch&eacute;mas trait&eacute;s dans le fichier d&eacute;limit&eacute; au
						sch&eacute;ma source de ce m&ecirc;me fichier. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>L&#8217;&eacute;diteur s&#8217;ouvre en affichant par d&eacute;faut la premi&egrave;re colonne. Cette
							colonne contient g&eacute;n&eacute;ralement l&#8217;indicateur de type des enregistrements.
							Une fois ouvert, vous pouvez cependant d&eacute;finir comme cl&eacute; primaire
							n&#8217;importe quelle colonne du sch&eacute;ma en cochant la case associ&eacute;e.</p></td></tr></table></div><p>L&#8217;image ci-dessous donne un aper&ccedil;u de l&#8217;&eacute;diteur de sch&eacute;mas <span class="bold"><strong>[Multi Schema Editor]</strong></span>.</p><div class="mediaobject"><img src="../images/Use_Case_tFileInputMSDelimeted1.png"></div><p>Pour des informations plus d&eacute;taill&eacute;es sur le <span class="bold"><strong>Multi
							Schema Editor</strong></span>, consultez <a class="xref" href="tFileInputMSDelimited.html#Raa65005" title="Sc&eacute;nario&nbsp;: Lecture d&#8217;un fichier d&eacute;limit&eacute; multi&nbsp;structure">la section intitul&eacute;e &laquo;&nbsp;Sc&eacute;nario&nbsp;: Lecture d&#8217;un fichier d&eacute;limit&eacute; multi&nbsp;structure&nbsp;&raquo;</a>.</p></div></div><div class="section" title="Sc&eacute;nario&nbsp;: Lecture d&#8217;un fichier d&eacute;limit&eacute; multi&nbsp;structure"><div class="titlepage"><div><div><h3 class="title"><a name="Raa65005"></a>Sc&eacute;nario&nbsp;: Lecture d&#8217;un fichier d&eacute;limit&eacute; multi&nbsp;structure</h3></div></div></div><p>Le pr&eacute;sent sc&eacute;nario sert &agrave; cr&eacute;er un Job en Java permettant de lire trois
					sch&eacute;mas dans un m&ecirc;me fichier d&eacute;limit&eacute; et d&#8217;en afficher la structure sur la
					console de la vue <span class="bold"><strong>Run</strong></span>.</p><p>Le fichier d&eacute;limit&eacute; trait&eacute; dans ce sc&eacute;nario se pr&eacute;sente comme suit&nbsp;:</p><div class="mediaobject"><img src="../images/Use_Case_tFileInputMSDelimeted2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>A partir de la <span class="bold"><strong>Palette, </strong></span>cliquez sur
							les composants suivants et d&eacute;posez-les dans l&#8217;&eacute;diteur graphique&nbsp;: un
							composant <span class="bold"><strong>tFileInputMSDelimited</strong></span> et
							trois <span class="bold"><strong>tLogRow</strong></span>. </p></li><li class="listitem"><p>Double-cliquez sur le <span class="bold"><strong>tFileInputMSDelimited
							</strong></span>pour ouvrir l&#8217;&eacute;diteur <span class="bold"><strong>Multi Schema
								Editor</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFileInputMSDelimeted.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>Browse...</strong></span> &agrave;
							c&ocirc;t&eacute; du champ <span class="bold"><strong>File name </strong></span>pour indiquer
							o&ugrave; se trouve le fichier d&eacute;limit&eacute; multi-sch&eacute;ma que vous voulez traiter.
						</p></li><li class="listitem"><p>Dans la zone <span class="bold"><strong>File Settings</strong></span>,
							renseignez&nbsp;:</p><p>-le type d&#8217;encodage de votre fichier source, &agrave; partir de la liste
							d&eacute;roulante. Cette option permet de garantir une certaine coh&eacute;rence entre
							tous les fichiers d&#8217;entr&eacute;e et de sortie. </p><p>-les s&eacute;parateurs de champ et de ligne utilis&eacute;s dans le fichier source.
						</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Cochez la case <span class="bold"><strong>Use Multiple Separator</strong></span> et
						configurez les champs qui suivent si diff&eacute;rents s&eacute;parateurs de champs sont
						utilis&eacute;s pour s&eacute;parer les sch&eacute;mas du fichier source.</p></td></tr></table></div><p>Un aper&ccedil;u des donn&eacute;es du fichier source appara&icirc;t automatiquement dans le
					panneau d&#8217;affichage <span class="bold"><strong>Preview</strong></span>. </p><div class="mediaobject"><img src="../images/Use_Case_tFileInputMSDelimeted1.png"></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>La colonne <span class="bold"><strong>Column 0</strong></span>, qui contient
						g&eacute;n&eacute;ralement l&#8217;indicateur de type des enregistrements est s&eacute;lectionn&eacute;e par
						d&eacute;faut. Vous pouvez cependant d&eacute;finir n&#8217;importe quelle autre colonne comme
						cl&eacute; primaire en cochant sa case associ&eacute;e.</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquez sur le bouton <span class="bold"><strong>Fetch Codes </strong></span>&agrave;
							droite du panneau <span class="bold"><strong>Preview </strong></span>pour
							cataloguer les types de sch&eacute;mas et les enregistrements du fichier
							source. Dans ce sc&eacute;nario, le fichier source comporte trois types de
							sch&eacute;mas (<span class="emphasis"><em>A, B, C</em></span>).</p></li><li class="listitem"><p>A partir du panneau d&#8217;affichage <span class="bold"><strong>Fetch
								Codes</strong></span>, cliquez sur chacun des trois types pour que la
							structure de leurs donn&eacute;es s&#8217;affiche dans le panneau <span class="bold"><strong>Preview</strong></span>.</p></li><li class="listitem"><p>Cliquez dans les cellules de la ligne <span class="emphasis"><em>Name</em></span> et
							choisissez le nom des colonnes de chacun des sch&eacute;mas
							s&eacute;lectionn&eacute;s.</p><p>Dans ce sc&eacute;nario, les colonnes se lisent comme suit&nbsp;:</p><p>-Sch&eacute;ma <span class="emphasis"><em>A</em></span>&nbsp;: <span class="emphasis"><em>Type, DiscName, Author,
								Date</em></span>,</p><p>-Sch&eacute;ma <span class="emphasis"><em>B</em></span>&nbsp;: <span class="emphasis"><em>Type,
							SongName</em></span>,</p><p>-Sch&eacute;ma <span class="emphasis"><em>C&nbsp;</em></span>: <span class="emphasis"><em>Type,
								LibraryName</em></span>.</p></li></ul></div><p>Vous devez &agrave; pr&eacute;sent d&eacute;finir, &agrave; partir des donn&eacute;es d&#8217;entr&eacute;e, la cl&eacute; primaire
					qui permettra de conserver leur unicit&eacute; (dans ce sc&eacute;nario, il s&#8217;agit de
						<span class="emphasis"><em>DiscName</em></span>). Il vous faut pour cela&nbsp;:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionner, &agrave; partir du panneau d&#8217;affichage <span class="bold"><strong>Fetch Codes</strong></span>, le sch&eacute;ma contenant la colonne que vous
							voulez d&eacute;finir comme cl&eacute; primaire (dans ce sc&eacute;nario, il s&#8217;agit du sch&eacute;ma
								<span class="emphasis"><em>A</em></span>) pour en afficher la structure.</p></li><li class="listitem"><p>Cliquer dans la cellule <span class="emphasis"><em>Key</em></span> correspondant &agrave; la
							colonne <span class="emphasis"><em>DiscName</em></span> et cocher la case qui s&#8217;affiche
							alors. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFileInputMSDelimeted4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cliquer n&#8217;importe o&ugrave; dans l&#8217;&eacute;diteur pour que la mention
								<span class="emphasis"><em>false</em></span>, dans la case <span class="emphasis"><em>Key</em></span>,
							devienne <span class="emphasis"><em>true</em></span>.</p></li></ul></div><p>Vous devez maintenant indiquer le sch&eacute;ma &#8220;p&egrave;re&#8221; auquel vous voulez rattacher
					les autres sch&eacute;mas &#8220;fils&#8221; (dans ce sc&eacute;nario, il s&#8217;agit de
						<span class="emphasis"><em>DiscName</em></span>). Il vous faut pour cela&nbsp;: </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>S&eacute;lectionner le sch&eacute;ma <span class="emphasis"><em>B</em></span>, &agrave; partir du panneau
							d&#8217;affichage <span class="bold"><strong>Fetch Codes</strong></span>, puis cliquer
							sur le bouton fl&egrave;che droite pour le d&eacute;placer vers la droite.</p></li><li class="listitem"><p>Faire de m&ecirc;me pour le sch&eacute;ma <span class="emphasis"><em>C</em></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFileInputMSDelimeted3.png"></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="16pt"><img alt="[Note]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Le champ <span class="bold"><strong>Cardinality</strong></span> n&#8217;est pas
						obligatoire. Il vous permet de d&eacute;terminer le nombre (ou l&#8217;intervalle) de
						champs des sch&eacute;mas &#8220;fils&#8221; rattach&eacute;s au sch&eacute;ma &#8220;p&egrave;re&#8221;. Cependant, si vous
						entrez un nombre ou un intervalle inexact et essayez d&#8217;ex&eacute;cuter le Job, un
						message d&#8217;erreur appara&icirc;tra. </p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Dans le <span class="bold"><strong>[Multi Schema Editor]</strong></span>,
							cliquez sur le bouton <span class="bold"><strong>OK</strong></span> pour valider
							tous les changements que vous venez d&#8217;effectuer et fermer l&#8217;&eacute;diteur de
							sch&eacute;mas. </p></li></ul></div><p>Les trois sch&eacute;mas d&eacute;finis, ainsi que les types d&#8217;enregistrements
					correspondants, s&#8217;affichent automatiquement dans la vue <span class="bold"><strong>Basic settings</strong></span> du composant <span class="bold"><strong>tFileInputMSDelimited</strong></span>.</p><div class="mediaobject"><img src="../images/Use_Case_tFileInputMSDelimeted6.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Dans l&#8217;&eacute;diteur graphique, effectuez un clic-droit sur le composant
								<span class="bold"><strong>tFileInputMSDelimited</strong></span> et
							connectez-le aux trois autres composants <span class="bold"><strong>tLogRow1</strong></span>, <span class="bold"><strong>tLogRow2</strong></span> et
								<span class="bold"><strong>tLogRow3</strong></span> &agrave; l&#8217;aide des liens
							respectifs <span class="bold"><strong>row_A_1</strong></span>, <span class="bold"><strong>row_B_1</strong></span> et <span class="bold"><strong>row_C_1</strong></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFileInputMSDelimeted5.png"></div><p>Les trois sch&eacute;mas que vous avez d&eacute;finis dans l&#8217;&eacute;diteur <span class="bold"><strong>[Multi Schema Editor]</strong></span> sont automatiquement communiqu&eacute;s aux trois
					composants <span class="bold"><strong>tLogRow</strong></span>.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Si n&eacute;cessaire, cliquez sur le bouton <span class="bold"><strong>Edit
								schema</strong></span> dans la vue <span class="bold"><strong>Basic
								settings</strong></span> de chacun des composants <span class="bold"><strong>tLogRow</strong></span> pour avoir un aper&ccedil;u des structures de donn&eacute;es
							en entr&eacute;e et en sortie, telles que vous les avez d&eacute;finies dans le
								<span class="bold"><strong>Multi Schema Editor</strong></span>, ou pour les
							modifier. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tFileInputMSDelimeted7.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Enregistrez votre Job puis appuyez sur <span class="bold"><strong>F6</strong></span> pour l&#8217;ex&eacute;cuter.</p></li></ul></div><p>Le fichier d&eacute;limit&eacute; multi-sch&eacute;ma est lu ligne par ligne et les champs extraits
					sont affich&eacute;s dans la console <span class="bold"><strong>Run Job</strong></span> comme
					d&eacute;fini dans le <span class="bold"><strong>[Multi Schema Editor]</strong></span>.</p><div class="mediaobject"><img src="../images/Use_Case_tFileInputMSDelimeted8.png"></div></div></div></body></html>